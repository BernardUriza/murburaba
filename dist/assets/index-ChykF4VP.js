import{g as ba}from"./main-CU1iSu1g.js";function ca(_,R){for(var a0=0;a0<R.length;a0++){const U=R[a0];if(typeof U!="string"&&!Array.isArray(U)){for(const r0 in U)if(r0!=="default"&&!(r0 in _)){const z=Object.getOwnPropertyDescriptor(U,r0);z&&Object.defineProperty(_,r0,z.get?z:{enumerable:!0,get:()=>U[r0]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}var w1={},F1,Te;function U0(){if(Te)return F1;Te=1;function _(E){return new Int8Array(E)}function R(E){return new Int16Array(E)}function a0(E){return new Int32Array(E)}function U(E){return new Float32Array(E)}function r0(E){return new Float64Array(E)}function z(E){if(E.length==1)return U(E[0]);var b=E[0];E=E.slice(1);for(var O=[],t=0;t<b;t++)O.push(z(E));return O}function G(E){if(E.length==1)return a0(E[0]);var b=E[0];E=E.slice(1);for(var O=[],t=0;t<b;t++)O.push(G(E));return O}function J(E){if(E.length==1)return R(E[0]);var b=E[0];E=E.slice(1);for(var O=[],t=0;t<b;t++)O.push(J(E));return O}function q(E){if(E.length==1)return new Array(E[0]);var b=E[0];E=E.slice(1);for(var O=[],t=0;t<b;t++)O.push(q(E));return O}var K={};K.fill=function(E,b,O,t){if(arguments.length==2)for(var p=0;p<E.length;p++)E[p]=arguments[1];else for(var p=b;p<O;p++)E[p]=t};var V={};V.arraycopy=function(E,b,O,t,p){for(var B=b+p;b<B;)O[t++]=E[b++]},V.out={},V.out.println=function(E){console.log(E)},V.out.printf=function(){console.log.apply(console,arguments)};var T={};T.SQRT2=1.4142135623730951,T.FAST_LOG10=function(E){return Math.log10(E)},T.FAST_LOG10_X=function(E,b){return Math.log10(E)*b};function L(E){this.ordinal=E}L.short_block_allowed=new L(0),L.short_block_coupled=new L(1),L.short_block_dispensed=new L(2),L.short_block_forced=new L(3);var $={};$.MAX_VALUE=34028235e31;function g(E){this.ordinal=E}g.vbr_off=new g(0),g.vbr_mt=new g(1),g.vbr_rh=new g(2),g.vbr_abr=new g(3),g.vbr_mtrh=new g(4),g.vbr_default=g.vbr_mtrh;var A=function(E){};return F1={System:V,VbrMode:g,Float:$,ShortBlock:L,Util:T,Arrays:K,new_array_n:q,new_byte:_,new_double:r0,new_float:U,new_float_n:z,new_int:a0,new_int_n:G,new_short:R,new_short_n:J,assert:A},F1}var q1,we;function da(){if(we)return q1;we=1;var _=U0(),R=_.System;_.VbrMode,_.Float,_.ShortBlock;var a0=_.Util,U=_.Arrays;_.new_array_n,_.new_byte,_.new_double;var r0=_.new_float;_.new_float_n,_.new_int,_.new_int_n,_.assert;var z=g0();function G(){var J=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*a0.SQRT2*.5/2384e-9,.017876148*a0.SQRT2*.5/2384e-9,.003134727*a0.SQRT2*.5/2384e-9,.002457142*a0.SQRT2*.5/2384e-9,971317e-9*a0.SQRT2*.5/2384e-9,218868e-9*a0.SQRT2*.5/2384e-9,101566e-9*a0.SQRT2*.5/2384e-9,13828e-9*a0.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],q=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],K=q[z.SHORT_TYPE],V=q[z.SHORT_TYPE],T=q[z.SHORT_TYPE],L=q[z.SHORT_TYPE],$=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function g(b,O,t){for(var p=10,B=O+238-14-286,j=-15;j<0;j++){var X,k,i0;X=J[p+-10],k=b[B+-224]*X,i0=b[O+224]*X,X=J[p+-9],k+=b[B+-160]*X,i0+=b[O+160]*X,X=J[p+-8],k+=b[B+-96]*X,i0+=b[O+96]*X,X=J[p+-7],k+=b[B+-32]*X,i0+=b[O+32]*X,X=J[p+-6],k+=b[B+32]*X,i0+=b[O+-32]*X,X=J[p+-5],k+=b[B+96]*X,i0+=b[O+-96]*X,X=J[p+-4],k+=b[B+160]*X,i0+=b[O+-160]*X,X=J[p+-3],k+=b[B+224]*X,i0+=b[O+-224]*X,X=J[p+-2],k+=b[O+-256]*X,i0-=b[B+256]*X,X=J[p+-1],k+=b[O+-192]*X,i0-=b[B+192]*X,X=J[p+0],k+=b[O+-128]*X,i0-=b[B+128]*X,X=J[p+1],k+=b[O+-64]*X,i0-=b[B+64]*X,X=J[p+2],k+=b[O+0]*X,i0-=b[B+0]*X,X=J[p+3],k+=b[O+64]*X,i0-=b[B+-64]*X,X=J[p+4],k+=b[O+128]*X,i0-=b[B+-128]*X,X=J[p+5],k+=b[O+192]*X,i0-=b[B+-192]*X,k*=J[p+6],X=i0-k,t[30+j*2]=i0+k,t[31+j*2]=J[p+7]*X,p+=18,O--,B++}{var k,i0,v0,Q;i0=b[O+-16]*J[p+-10],k=b[O+-32]*J[p+-2],i0+=(b[O+-48]-b[O+16])*J[p+-9],k+=b[O+-96]*J[p+-1],i0+=(b[O+-80]+b[O+48])*J[p+-8],k+=b[O+-160]*J[p+0],i0+=(b[O+-112]-b[O+80])*J[p+-7],k+=b[O+-224]*J[p+1],i0+=(b[O+-144]+b[O+112])*J[p+-6],k-=b[O+32]*J[p+2],i0+=(b[O+-176]-b[O+144])*J[p+-5],k-=b[O+96]*J[p+3],i0+=(b[O+-208]+b[O+176])*J[p+-4],k-=b[O+160]*J[p+4],i0+=(b[O+-240]-b[O+208])*J[p+-3],k-=b[O+224],v0=k-i0,Q=k+i0,i0=t[14],k=t[15]-i0,t[31]=Q+i0,t[30]=v0+k,t[15]=v0-k,t[14]=Q-i0}{var c;c=t[28]-t[0],t[0]+=t[28],t[28]=c*J[p+-36+7],c=t[29]-t[1],t[1]+=t[29],t[29]=c*J[p+-36+7],c=t[26]-t[2],t[2]+=t[26],t[26]=c*J[p+-72+7],c=t[27]-t[3],t[3]+=t[27],t[27]=c*J[p+-72+7],c=t[24]-t[4],t[4]+=t[24],t[24]=c*J[p+-108+7],c=t[25]-t[5],t[5]+=t[25],t[25]=c*J[p+-108+7],c=t[22]-t[6],t[6]+=t[22],t[22]=c*a0.SQRT2,c=t[23]-t[7],t[7]+=t[23],t[23]=c*a0.SQRT2-t[7],t[7]-=t[6],t[22]-=t[7],t[23]-=t[22],c=t[6],t[6]=t[31]-c,t[31]=t[31]+c,c=t[7],t[7]=t[30]-c,t[30]=t[30]+c,c=t[22],t[22]=t[15]-c,t[15]=t[15]+c,c=t[23],t[23]=t[14]-c,t[14]=t[14]+c,c=t[20]-t[8],t[8]+=t[20],t[20]=c*J[p+-180+7],c=t[21]-t[9],t[9]+=t[21],t[21]=c*J[p+-180+7],c=t[18]-t[10],t[10]+=t[18],t[18]=c*J[p+-216+7],c=t[19]-t[11],t[11]+=t[19],t[19]=c*J[p+-216+7],c=t[16]-t[12],t[12]+=t[16],t[16]=c*J[p+-252+7],c=t[17]-t[13],t[13]+=t[17],t[17]=c*J[p+-252+7],c=-t[20]+t[24],t[20]+=t[24],t[24]=c*J[p+-216+7],c=-t[21]+t[25],t[21]+=t[25],t[25]=c*J[p+-216+7],c=t[4]-t[8],t[4]+=t[8],t[8]=c*J[p+-216+7],c=t[5]-t[9],t[5]+=t[9],t[9]=c*J[p+-216+7],c=t[0]-t[12],t[0]+=t[12],t[12]=c*J[p+-72+7],c=t[1]-t[13],t[1]+=t[13],t[13]=c*J[p+-72+7],c=t[16]-t[28],t[16]+=t[28],t[28]=c*J[p+-72+7],c=-t[17]+t[29],t[17]+=t[29],t[29]=c*J[p+-72+7],c=a0.SQRT2*(t[2]-t[10]),t[2]+=t[10],t[10]=c,c=a0.SQRT2*(t[3]-t[11]),t[3]+=t[11],t[11]=c,c=a0.SQRT2*(-t[18]+t[26]),t[18]+=t[26],t[26]=c-t[18],c=a0.SQRT2*(-t[19]+t[27]),t[19]+=t[27],t[27]=c-t[19],c=t[2],t[19]-=t[3],t[3]-=c,t[2]=t[31]-c,t[31]+=c,c=t[3],t[11]-=t[19],t[18]-=c,t[3]=t[30]-c,t[30]+=c,c=t[18],t[27]-=t[11],t[19]-=c,t[18]=t[15]-c,t[15]+=c,c=t[19],t[10]-=c,t[19]=t[14]-c,t[14]+=c,c=t[10],t[11]-=c,t[10]=t[23]-c,t[23]+=c,c=t[11],t[26]-=c,t[11]=t[22]-c,t[22]+=c,c=t[26],t[27]-=c,t[26]=t[7]-c,t[7]+=c,c=t[27],t[27]=t[6]-c,t[6]+=c,c=a0.SQRT2*(t[0]-t[4]),t[0]+=t[4],t[4]=c,c=a0.SQRT2*(t[1]-t[5]),t[1]+=t[5],t[5]=c,c=a0.SQRT2*(t[16]-t[20]),t[16]+=t[20],t[20]=c,c=a0.SQRT2*(t[17]-t[21]),t[17]+=t[21],t[21]=c,c=-a0.SQRT2*(t[8]-t[12]),t[8]+=t[12],t[12]=c-t[8],c=-a0.SQRT2*(t[9]-t[13]),t[9]+=t[13],t[13]=c-t[9],c=-a0.SQRT2*(t[25]-t[29]),t[25]+=t[29],t[29]=c-t[25],c=-a0.SQRT2*(t[24]+t[28]),t[24]-=t[28],t[28]=c-t[24],c=t[24]-t[16],t[24]=c,c=t[20]-c,t[20]=c,c=t[28]-c,t[28]=c,c=t[25]-t[17],t[25]=c,c=t[21]-c,t[21]=c,c=t[29]-c,t[29]=c,c=t[17]-t[1],t[17]=c,c=t[9]-c,t[9]=c,c=t[25]-c,t[25]=c,c=t[5]-c,t[5]=c,c=t[21]-c,t[21]=c,c=t[13]-c,t[13]=c,c=t[29]-c,t[29]=c,c=t[1]-t[0],t[1]=c,c=t[16]-c,t[16]=c,c=t[17]-c,t[17]=c,c=t[8]-c,t[8]=c,c=t[9]-c,t[9]=c,c=t[24]-c,t[24]=c,c=t[25]-c,t[25]=c,c=t[4]-c,t[4]=c,c=t[5]-c,t[5]=c,c=t[20]-c,t[20]=c,c=t[21]-c,t[21]=c,c=t[12]-c,t[12]=c,c=t[13]-c,t[13]=c,c=t[28]-c,t[28]=c,c=t[29]-c,t[29]=c,c=t[0],t[0]+=t[31],t[31]-=c,c=t[1],t[1]+=t[30],t[30]-=c,c=t[16],t[16]+=t[15],t[15]-=c,c=t[17],t[17]+=t[14],t[14]-=c,c=t[8],t[8]+=t[23],t[23]-=c,c=t[9],t[9]+=t[22],t[22]-=c,c=t[24],t[24]+=t[7],t[7]-=c,c=t[25],t[25]+=t[6],t[6]-=c,c=t[4],t[4]+=t[27],t[27]-=c,c=t[5],t[5]+=t[26],t[26]-=c,c=t[20],t[20]+=t[11],t[11]-=c,c=t[21],t[21]+=t[10],t[10]-=c,c=t[12],t[12]+=t[19],t[19]-=c,c=t[13],t[13]+=t[18],t[18]-=c,c=t[28],t[28]+=t[3],t[3]-=c,c=t[29],t[29]+=t[2],t[2]-=c}}function A(b,O){for(var t=0;t<3;t++){var p,B,j,X,k,i0;X=b[O+6]*q[z.SHORT_TYPE][0]-b[O+15],p=b[O+0]*q[z.SHORT_TYPE][2]-b[O+9],B=X+p,j=X-p,X=b[O+15]*q[z.SHORT_TYPE][0]+b[O+6],p=b[O+9]*q[z.SHORT_TYPE][2]+b[O+0],k=X+p,i0=-X+p,p=(b[O+3]*q[z.SHORT_TYPE][1]-b[O+12])*2069978111953089e-26,X=(b[O+12]*q[z.SHORT_TYPE][1]+b[O+3])*2069978111953089e-26,b[O+0]=B*190752519173728e-25+p,b[O+15]=-k*190752519173728e-25+X,j=j*.8660254037844387*1907525191737281e-26,k=k*.5*1907525191737281e-26+X,b[O+3]=j-k,b[O+6]=j+k,B=B*.5*1907525191737281e-26-p,i0=i0*.8660254037844387*1907525191737281e-26,b[O+9]=B+i0,b[O+12]=B-i0,O++}}function E(b,O,t){var p,B;{var j,X,k,i0,v0,Q,c,T0;j=t[17]-t[9],k=t[15]-t[11],i0=t[14]-t[12],v0=t[0]+t[8],Q=t[1]+t[7],c=t[2]+t[6],T0=t[3]+t[5],b[O+17]=v0+c-T0-(Q-t[4]),B=(v0+c-T0)*V[19]+(Q-t[4]),p=(j-k-i0)*V[18],b[O+5]=p+B,b[O+6]=p-B,X=(t[16]-t[10])*V[18],Q=Q*V[19]+t[4],p=j*V[12]+X+k*V[13]+i0*V[14],B=-v0*V[16]+Q-c*V[17]+T0*V[15],b[O+1]=p+B,b[O+2]=p-B,p=j*V[13]-X-k*V[14]+i0*V[12],B=-v0*V[17]+Q-c*V[15]+T0*V[16],b[O+9]=p+B,b[O+10]=p-B,p=j*V[14]-X+k*V[12]-i0*V[13],B=v0*V[15]-Q+c*V[16]-T0*V[17],b[O+13]=p+B,b[O+14]=p-B}{var H,y,s,m,I,N,v,e;H=t[8]-t[0],s=t[6]-t[2],m=t[5]-t[3],I=t[17]+t[9],N=t[16]+t[10],v=t[15]+t[11],e=t[14]+t[12],b[O+0]=I+v+e+(N+t[13]),p=(I+v+e)*V[19]-(N+t[13]),B=(H-s+m)*V[18],b[O+11]=p+B,b[O+12]=p-B,y=(t[7]-t[1])*V[18],N=t[13]-N*V[19],p=I*V[15]-N+v*V[16]+e*V[17],B=H*V[14]+y+s*V[12]+m*V[13],b[O+3]=p+B,b[O+4]=p-B,p=-I*V[17]+N-v*V[15]-e*V[16],B=H*V[13]+y-s*V[14]-m*V[12],b[O+7]=p+B,b[O+8]=p-B,p=-I*V[16]+N-v*V[17]-e*V[15],B=H*V[12]-y+s*V[13]-m*V[14],b[O+15]=p+B,b[O+16]=p-B}}this.mdct_sub48=function(b,O,t){for(var p=O,B=286,j=0;j<b.channels_out;j++){for(var X=0;X<b.mode_gr;X++){for(var k,i0=b.l3_side.tt[X][j],v0=i0.xr,Q=0,c=b.sb_sample[j][1-X],T0=0,H=0;H<18/2;H++)for(g(p,B,c[T0]),g(p,B+32,c[T0+1]),T0+=2,B+=64,k=1;k<32;k+=2)c[T0-1][k]*=-1;for(k=0;k<32;k++,Q+=18){var y=i0.block_type,s=b.sb_sample[j][X],m=b.sb_sample[j][1-X];if(i0.mixed_block_flag!=0&&k<2&&(y=0),b.amp_filter[k]<1e-12)U.fill(v0,Q+0,Q+18,0);else{if(b.amp_filter[k]<1)for(var H=0;H<18;H++)m[H][$[k]]*=b.amp_filter[k];if(y==z.SHORT_TYPE){for(var H=-12/4;H<0;H++){var I=q[z.SHORT_TYPE][H+3];v0[Q+H*3+9]=s[9+H][$[k]]*I-s[8-H][$[k]],v0[Q+H*3+18]=s[14-H][$[k]]*I+s[15+H][$[k]],v0[Q+H*3+10]=s[15+H][$[k]]*I-s[14-H][$[k]],v0[Q+H*3+19]=m[2-H][$[k]]*I+m[3+H][$[k]],v0[Q+H*3+11]=m[3+H][$[k]]*I-m[2-H][$[k]],v0[Q+H*3+20]=m[8-H][$[k]]*I+m[9+H][$[k]]}A(v0,Q)}else{for(var N=r0(18),H=-36/4;H<0;H++){var v,e;v=q[y][H+27]*m[H+9][$[k]]+q[y][H+36]*m[8-H][$[k]],e=q[y][H+9]*s[H+9][$[k]]-q[y][H+18]*s[8-H][$[k]],N[H+9]=v-e*K[3+H+9],N[H+18]=v*K[3+H+9]+e}E(v0,Q,N)}}if(y!=z.SHORT_TYPE&&k!=0)for(var H=7;H>=0;--H){var r,a;r=v0[Q+H]*T[20+H]+v0[Q+-1-H]*L[28+H],a=v0[Q+H]*L[28+H]-v0[Q+-1-H]*T[20+H],v0[Q+-1-H]=r,v0[Q+H]=a}}}if(p=t,B=286,b.mode_gr==1)for(var n=0;n<18;n++)R.arraycopy(b.sb_sample[j][1][n],0,b.sb_sample[j][0][n],0,32)}}}return q1=G,q1}var X1,ye;function ia(){if(ye)return X1;ye=1;var _=g0(),R=U0(),a0=R.System;R.VbrMode,R.Float,R.ShortBlock,R.Util,R.Arrays,R.new_array_n,R.new_byte,R.new_double;var U=R.new_float,r0=R.new_float_n;R.new_int,R.new_int_n,R.assert;function z(){this.l=U(_.SBMAX_l),this.s=r0([_.SBMAX_s,3]);var G=this;this.assign=function(J){a0.arraycopy(J.l,0,G.l,0,_.SBMAX_l);for(var q=0;q<_.SBMAX_s;q++)for(var K=0;K<3;K++)G.s[q][K]=J.s[q][K]}}return X1=z,X1}var C1,Ie;function Sa(){if(Ie)return C1;Ie=1;var _=ia();function R(){this.thm=new _,this.en=new _}return C1=R,C1}var Y1,Le;function g0(){if(Le)return Y1;Le=1;var _=U0(),R=_.System,a0=_.VbrMode;_.Float,_.ShortBlock,_.Util,_.Arrays;var U=_.new_array_n;_.new_byte,_.new_double;var r0=_.new_float,z=_.new_float_n,G=_.new_int;_.new_int_n;var J=_.assert;q.ENCDELAY=576,q.POSTDELAY=1152,q.MDCTDELAY=48,q.FFTOFFSET=224+q.MDCTDELAY,q.DECDELAY=528,q.SBLIMIT=32,q.CBANDS=64,q.SBPSY_l=21,q.SBPSY_s=12,q.SBMAX_l=22,q.SBMAX_s=13,q.PSFB21=6,q.PSFB12=6,q.BLKSIZE=1024,q.HBLKSIZE=q.BLKSIZE/2+1,q.BLKSIZE_s=256,q.HBLKSIZE_s=q.BLKSIZE_s/2+1,q.NORM_TYPE=0,q.START_TYPE=1,q.SHORT_TYPE=2,q.STOP_TYPE=3,q.MPG_MD_LR_LR=0,q.MPG_MD_LR_I=1,q.MPG_MD_MS_LR=2,q.MPG_MD_MS_I=3,q.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function q(){var K=da(),V=Sa(),T=q.FFTOFFSET,L=q.MPG_MD_MS_LR,$=null;this.psy=null;var g=null,A=null,E=null;this.setModules=function(B,j,X,k){$=B,this.psy=j,g=j,A=k,E=X};var b=new K;function O(B){var j,X;if(B.ATH.useAdjust==0){B.ATH.adjust=1;return}if(X=B.loudness_sq[0][0],j=B.loudness_sq[1][0],B.channels_out==2?(X+=B.loudness_sq[0][1],j+=B.loudness_sq[1][1]):(X+=X,j+=j),B.mode_gr==2&&(X=Math.max(X,j)),X*=.5,X*=B.ATH.aaSensitivityP,X>.03125)B.ATH.adjust>=1?B.ATH.adjust=1:B.ATH.adjust<B.ATH.adjustLimit&&(B.ATH.adjust=B.ATH.adjustLimit),B.ATH.adjustLimit=1;else{var k=31.98*X+625e-6;B.ATH.adjust>=k?(B.ATH.adjust*=k*.075+.925,B.ATH.adjust<k&&(B.ATH.adjust=k)):B.ATH.adjustLimit>=k?B.ATH.adjust=k:B.ATH.adjust<B.ATH.adjustLimit&&(B.ATH.adjust=B.ATH.adjustLimit),B.ATH.adjustLimit=k}}function t(B){var j,X;for(J(0<=B.bitrate_index&&B.bitrate_index<16),J(0<=B.mode_ext&&B.mode_ext<4),B.bitrate_stereoMode_Hist[B.bitrate_index][4]++,B.bitrate_stereoMode_Hist[15][4]++,B.channels_out==2&&(B.bitrate_stereoMode_Hist[B.bitrate_index][B.mode_ext]++,B.bitrate_stereoMode_Hist[15][B.mode_ext]++),j=0;j<B.mode_gr;++j)for(X=0;X<B.channels_out;++X){var k=B.l3_side.tt[j][X].block_type|0;B.l3_side.tt[j][X].mixed_block_flag!=0&&(k=4),B.bitrate_blockType_Hist[B.bitrate_index][k]++,B.bitrate_blockType_Hist[B.bitrate_index][5]++,B.bitrate_blockType_Hist[15][k]++,B.bitrate_blockType_Hist[15][5]++}}function p(B,j){var X=B.internal_flags,k,i0;if(X.lame_encode_frame_init==0){var v0,Q,c=r0(2014),T0=r0(2014);for(X.lame_encode_frame_init=1,v0=0,Q=0;v0<286+576*(1+X.mode_gr);++v0)v0<576*X.mode_gr?(c[v0]=0,X.channels_out==2&&(T0[v0]=0)):(c[v0]=j[0][Q],X.channels_out==2&&(T0[v0]=j[1][Q]),++Q);for(i0=0;i0<X.mode_gr;i0++)for(k=0;k<X.channels_out;k++)X.l3_side.tt[i0][k].block_type=q.SHORT_TYPE;b.mdct_sub48(X,c,T0),J(576>=q.FFTOFFSET),J(X.mf_size>=q.BLKSIZE+B.framesize-q.FFTOFFSET),J(X.mf_size>=512+B.framesize-32)}}this.lame_encode_mp3_frame=function(B,j,X,k,i0,v0){var Q,c=U([2,2]);c[0][0]=new V,c[0][1]=new V,c[1][0]=new V,c[1][1]=new V;var T0=U([2,2]);T0[0][0]=new V,T0[0][1]=new V,T0[1][0]=new V,T0[1][1]=new V;var H,y=[null,null],s=B.internal_flags,m=z([2,4]),I=[.5,.5],N=[[0,0],[0,0]],v=[[0,0],[0,0]],e,r,a;if(y[0]=j,y[1]=X,s.lame_encode_frame_init==0&&p(B,y),s.padding=0,(s.slot_lag-=s.frac_SpF)<0&&(s.slot_lag+=B.out_samplerate,s.padding=1),s.psymodel!=0){var n,l=[null,null],d=0,M=G(2);for(a=0;a<s.mode_gr;a++){for(r=0;r<s.channels_out;r++)l[r]=y[r],d=576+a*576-q.FFTOFFSET;if(B.VBR==a0.vbr_mtrh||B.VBR==a0.vbr_mt?n=g.L3psycho_anal_vbr(B,l,d,a,c,T0,N[a],v[a],m[a],M):n=g.L3psycho_anal_ns(B,l,d,a,c,T0,N[a],v[a],m[a],M),n!=0)return-4;for(B.mode==MPEGMode.JOINT_STEREO&&(I[a]=m[a][2]+m[a][3],I[a]>0&&(I[a]=m[a][3]/I[a])),r=0;r<s.channels_out;r++){var f=s.l3_side.tt[a][r];f.block_type=M[r],f.mixed_block_flag=0}}}else for(a=0;a<s.mode_gr;a++)for(r=0;r<s.channels_out;r++)s.l3_side.tt[a][r].block_type=q.NORM_TYPE,s.l3_side.tt[a][r].mixed_block_flag=0,v[a][r]=N[a][r]=700;if(O(s),b.mdct_sub48(s,y[0],y[1]),s.mode_ext=q.MPG_MD_LR_LR,B.force_ms)s.mode_ext=q.MPG_MD_MS_LR;else if(B.mode==MPEGMode.JOINT_STEREO){var F=0,P=0;for(a=0;a<s.mode_gr;a++)for(r=0;r<s.channels_out;r++)F+=v[a][r],P+=N[a][r];if(F<=1*P){var s0=s.l3_side.tt[0],h0=s.l3_side.tt[s.mode_gr-1];s0[0].block_type==s0[1].block_type&&h0[0].block_type==h0[1].block_type&&(s.mode_ext=q.MPG_MD_MS_LR)}}if(s.mode_ext==L?(H=T0,e=v):(H=c,e=N),B.analysis&&s.pinfo!=null)for(a=0;a<s.mode_gr;a++)for(r=0;r<s.channels_out;r++)s.pinfo.ms_ratio[a]=s.ms_ratio[a],s.pinfo.ms_ener_ratio[a]=I[a],s.pinfo.blocktype[a][r]=s.l3_side.tt[a][r].block_type,s.pinfo.pe[a][r]=e[a][r],R.arraycopy(s.l3_side.tt[a][r].xr,0,s.pinfo.xr[a][r],0,576),s.mode_ext==L&&(s.pinfo.ers[a][r]=s.pinfo.ers[a][r+2],R.arraycopy(s.pinfo.energy[a][r+2],0,s.pinfo.energy[a][r],0,s.pinfo.energy[a][r].length));if(B.VBR==a0.vbr_off||B.VBR==a0.vbr_abr){var u0,c0;for(u0=0;u0<18;u0++)s.nsPsy.pefirbuf[u0]=s.nsPsy.pefirbuf[u0+1];for(c0=0,a=0;a<s.mode_gr;a++)for(r=0;r<s.channels_out;r++)c0+=e[a][r];for(s.nsPsy.pefirbuf[18]=c0,c0=s.nsPsy.pefirbuf[9],u0=0;u0<9;u0++)c0+=(s.nsPsy.pefirbuf[u0]+s.nsPsy.pefirbuf[18-u0])*q.fircoef[u0];for(c0=670*5*s.mode_gr*s.channels_out/c0,a=0;a<s.mode_gr;a++)for(r=0;r<s.channels_out;r++)e[a][r]*=c0}if(s.iteration_loop.iteration_loop(B,e,I,H),$.format_bitstream(B),Q=$.copy_buffer(s,k,i0,v0,1),B.bWriteVbrTag&&A.addVbrFrame(B),B.analysis&&s.pinfo!=null){for(r=0;r<s.channels_out;r++){var M0;for(M0=0;M0<T;M0++)s.pinfo.pcmdata[r][M0]=s.pinfo.pcmdata[r][M0+B.framesize];for(M0=T;M0<1600;M0++)s.pinfo.pcmdata[r][M0]=y[r][M0-T]}E.set_frame_pinfo(B,H)}return t(s),Q}}return Y1=q,Y1}var G1,xe;function Ma(){if(xe)return G1;xe=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock;var R=_.Util;_.Arrays,_.new_array_n,_.new_byte,_.new_double;var a0=_.new_float;_.new_float_n,_.new_int,_.new_int_n,_.assert;var U=g0();function r0(){var z=a0(U.BLKSIZE),G=a0(U.BLKSIZE_s/2),J=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function q(V,T,L){var $=0,g,A,E;L<<=1;var b=T+L;g=4;do{var O,t,p,B,j,X,k;k=g>>1,B=g,j=g<<1,X=j+B,g=j<<1,A=T,E=A+k;do{var i0,v0,Q,c;v0=V[A+0]-V[A+B],i0=V[A+0]+V[A+B],c=V[A+j]-V[A+X],Q=V[A+j]+V[A+X],V[A+j]=i0-Q,V[A+0]=i0+Q,V[A+X]=v0-c,V[A+B]=v0+c,v0=V[E+0]-V[E+B],i0=V[E+0]+V[E+B],c=R.SQRT2*V[E+X],Q=R.SQRT2*V[E+j],V[E+j]=i0-Q,V[E+0]=i0+Q,V[E+X]=v0-c,V[E+B]=v0+c,E+=g,A+=g}while(A<b);for(t=J[$+0],O=J[$+1],p=1;p<k;p++){var T0,H;T0=1-2*O*O,H=2*O*t,A=T+p,E=T+B-p;do{var y,s,m,i0,v0,I,Q,N,c,v;s=H*V[A+B]-T0*V[E+B],y=T0*V[A+B]+H*V[E+B],v0=V[A+0]-y,i0=V[A+0]+y,I=V[E+0]-s,m=V[E+0]+s,s=H*V[A+X]-T0*V[E+X],y=T0*V[A+X]+H*V[E+X],c=V[A+j]-y,Q=V[A+j]+y,v=V[E+j]-s,N=V[E+j]+s,s=O*Q-t*v,y=t*Q+O*v,V[A+j]=i0-y,V[A+0]=i0+y,V[E+X]=I-s,V[E+B]=I+s,s=t*N-O*c,y=O*N+t*c,V[E+j]=m-y,V[E+0]=m+y,V[A+X]=v0-s,V[A+B]=v0+s,E+=g,A+=g}while(A<b);T0=t,t=T0*J[$+0]-O*J[$+1],O=T0*J[$+1]+O*J[$+0]}$+=2}while(g<L)}var K=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(V,T,L,$,g){for(var A=0;A<3;A++){var E=U.BLKSIZE_s/2,b=65535&576/3*(A+1),O=U.BLKSIZE_s/8-1;do{var t,p,B,j,X,k=K[O<<2]&255;t=G[k]*$[L][g+k+b],X=G[127-k]*$[L][g+k+b+128],p=t-X,t=t+X,B=G[k+64]*$[L][g+k+b+64],X=G[63-k]*$[L][g+k+b+192],j=B-X,B=B+X,E-=4,T[A][E+0]=t+B,T[A][E+2]=t-B,T[A][E+1]=p+j,T[A][E+3]=p-j,t=G[k+1]*$[L][g+k+b+1],X=G[126-k]*$[L][g+k+b+129],p=t-X,t=t+X,B=G[k+65]*$[L][g+k+b+65],X=G[62-k]*$[L][g+k+b+193],j=B-X,B=B+X,T[A][E+U.BLKSIZE_s/2+0]=t+B,T[A][E+U.BLKSIZE_s/2+2]=t-B,T[A][E+U.BLKSIZE_s/2+1]=p+j,T[A][E+U.BLKSIZE_s/2+3]=p-j}while(--O>=0);q(T[A],E,U.BLKSIZE_s/2)}},this.fft_long=function(V,T,L,$,g){var A=U.BLKSIZE/8-1,E=U.BLKSIZE/2;do{var b,O,t,p,B,j=K[A]&255;b=z[j]*$[L][g+j],B=z[j+512]*$[L][g+j+512],O=b-B,b=b+B,t=z[j+256]*$[L][g+j+256],B=z[j+768]*$[L][g+j+768],p=t-B,t=t+B,E-=4,T[E+0]=b+t,T[E+2]=b-t,T[E+1]=O+p,T[E+3]=O-p,b=z[j+1]*$[L][g+j+1],B=z[j+513]*$[L][g+j+513],O=b-B,b=b+B,t=z[j+257]*$[L][g+j+257],B=z[j+769]*$[L][g+j+769],p=t-B,t=t+B,T[E+U.BLKSIZE/2+0]=b+t,T[E+U.BLKSIZE/2+2]=b-t,T[E+U.BLKSIZE/2+1]=O+p,T[E+U.BLKSIZE/2+3]=O-p}while(--A>=0);q(T,E,U.BLKSIZE/2)},this.init_fft=function(V){for(var T=0;T<U.BLKSIZE;T++)z[T]=.42-.5*Math.cos(2*Math.PI*(T+.5)/U.BLKSIZE)+.08*Math.cos(4*Math.PI*(T+.5)/U.BLKSIZE);for(var T=0;T<U.BLKSIZE_s/2;T++)G[T]=.5*(1-Math.cos(2*Math.PI*(T+.5)/U.BLKSIZE_s))}}return G1=r0,G1}var P1,Ve;function Ra(){if(Ve)return P1;Ve=1;var _=U0();_.System;var R=_.VbrMode,a0=_.Float,U=_.ShortBlock,r0=_.Util,z=_.Arrays;_.new_array_n,_.new_byte,_.new_double;var G=_.new_float,J=_.new_float_n,q=_.new_int;_.new_int_n;var K=_.assert,V=Ma(),T=g0();function L(){var $=new V,g=2.302585092994046,A=2,E=16,b=2,O=16,t=.34,p=1/(14752*14752)/(T.BLKSIZE/2),B=.01,j=.8,X=.6,k=.3,i0=3.5,v0=21,Q=.2302585093;function c(u){return u}function T0(u,h){for(var w=0,x=0;x<T.BLKSIZE/2;++x)w+=u[x]*h.ATH.eql_w[x];return w*=p,w}function H(u,h,w,x,D,S,Y,Z,C,t0,W){var n0=u.internal_flags;if(C<2)$.fft_long(n0,x[D],C,t0,W),$.fft_short(n0,S[Y],C,t0,W);else if(C==2){for(var m0=T.BLKSIZE-1;m0>=0;--m0){var I0=x[D+0][m0],l0=x[D+1][m0];x[D+0][m0]=(I0+l0)*r0.SQRT2*.5,x[D+1][m0]=(I0-l0)*r0.SQRT2*.5}for(var w0=2;w0>=0;--w0)for(var m0=T.BLKSIZE_s-1;m0>=0;--m0){var I0=S[Y+0][w0][m0],l0=S[Y+1][w0][m0];S[Y+0][w0][m0]=(I0+l0)*r0.SQRT2*.5,S[Y+1][w0][m0]=(I0-l0)*r0.SQRT2*.5}}h[0]=x[D+0][0],h[0]*=h[0];for(var m0=T.BLKSIZE/2-1;m0>=0;--m0){var e0=x[D+0][T.BLKSIZE/2-m0],R0=x[D+0][T.BLKSIZE/2+m0];h[T.BLKSIZE/2-m0]=(e0*e0+R0*R0)*.5}for(var w0=2;w0>=0;--w0){w[w0][0]=S[Y+0][w0][0],w[w0][0]*=w[w0][0];for(var m0=T.BLKSIZE_s/2-1;m0>=0;--m0){var e0=S[Y+0][w0][T.BLKSIZE_s/2-m0],R0=S[Y+0][w0][T.BLKSIZE_s/2+m0];w[w0][T.BLKSIZE_s/2-m0]=(e0*e0+R0*R0)*.5}}{for(var H0=0,m0=11;m0<T.HBLKSIZE;m0++)H0+=h[m0];n0.tot_ener[C]=H0}if(u.analysis){for(var m0=0;m0<T.HBLKSIZE;m0++)n0.pinfo.energy[Z][C][m0]=n0.pinfo.energy_save[C][m0],n0.pinfo.energy_save[C][m0]=h[m0];n0.pinfo.pe[Z][C]=n0.pe[C]}u.athaa_loudapprox==2&&C<2&&(n0.loudness_sq[Z][C]=n0.loudness_sq_save[C],n0.loudness_sq_save[C]=T0(h,n0))}var y=8,s=23,m=15,I,N,v,e=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function r(){I=Math.pow(10,(y+1)/16),N=Math.pow(10,(s+1)/16),v=Math.pow(10,m/10)}var a=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],n=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],l=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function d(u,h,w,x,D,S){var Y;if(h>u)if(h<u*N)Y=h/u;else return u+h;else{if(u>=h*N)return u+h;Y=u/h}if(K(u>=0),K(h>=0),u+=h,x+3<=6){if(Y>=I)return u;var Z=0|r0.FAST_LOG10_X(Y,16);return u*n[Z]}var Z=0|r0.FAST_LOG10_X(Y,16);if(h=D.ATH.cb_l[w]*D.ATH.adjust,K(h>=0),u<v*h){if(u>h){var C,t0;return C=1,Z<=13&&(C=l[Z]),t0=r0.FAST_LOG10_X(u/h,10/15),u*((a[Z]-C)*t0+C)}return Z>13?u:u*l[Z]}return u*a[Z]}var M=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function f(u,h,w){var x;if(u<0&&(u=0),h<0&&(h=0),u<=0)return h;if(h<=0)return u;if(h>u?x=h/u:x=u/h,-2<=w&&w<=2){if(x>=I)return u+h;var D=0|r0.FAST_LOG10_X(x,16);return(u+h)*M[D]}return x<N?u+h:(u<h&&(u=h),u)}function F(u,h){var w=u.internal_flags;if(w.channels_out>1){for(var x=0;x<T.SBMAX_l;x++){var D=w.thm[0].l[x],S=w.thm[1].l[x];w.thm[0].l[x]+=S*h,w.thm[1].l[x]+=D*h}for(var x=0;x<T.SBMAX_s;x++)for(var Y=0;Y<3;Y++){var D=w.thm[0].s[x][Y],S=w.thm[1].s[x][Y];w.thm[0].s[x][Y]+=S*h,w.thm[1].s[x][Y]+=D*h}}}function P(u){for(var h=0;h<T.SBMAX_l;h++)if(!(u.thm[0].l[h]>1.58*u.thm[1].l[h]||u.thm[1].l[h]>1.58*u.thm[0].l[h])){var w=u.mld_l[h]*u.en[3].l[h],x=Math.max(u.thm[2].l[h],Math.min(u.thm[3].l[h],w));w=u.mld_l[h]*u.en[2].l[h];var D=Math.max(u.thm[3].l[h],Math.min(u.thm[2].l[h],w));u.thm[2].l[h]=x,u.thm[3].l[h]=D}for(var h=0;h<T.SBMAX_s;h++)for(var S=0;S<3;S++)if(!(u.thm[0].s[h][S]>1.58*u.thm[1].s[h][S]||u.thm[1].s[h][S]>1.58*u.thm[0].s[h][S])){var w=u.mld_s[h]*u.en[3].s[h][S],x=Math.max(u.thm[2].s[h][S],Math.min(u.thm[3].s[h][S],w));w=u.mld_s[h]*u.en[2].s[h][S];var D=Math.max(u.thm[3].s[h][S],Math.min(u.thm[2].s[h][S],w));u.thm[2].s[h][S]=x,u.thm[3].s[h][S]=D}}function s0(u,h,w){var x=h,D=Math.pow(10,w);h*=2,x*=2;for(var S=0;S<T.SBMAX_l;S++){var Y,Z,C,t0;if(t0=u.ATH.cb_l[u.bm_l[S]]*D,Y=Math.min(Math.max(u.thm[0].l[S],t0),Math.max(u.thm[1].l[S],t0)),Z=Math.max(u.thm[2].l[S],t0),C=Math.max(u.thm[3].l[S],t0),Y*h<Z+C){var W=Y*x/(Z+C);Z*=W,C*=W,K(Z+C>0)}u.thm[2].l[S]=Math.min(Z,u.thm[2].l[S]),u.thm[3].l[S]=Math.min(C,u.thm[3].l[S])}D*=T.BLKSIZE_s/T.BLKSIZE;for(var S=0;S<T.SBMAX_s;S++)for(var n0=0;n0<3;n0++){var Y,Z,C,t0;if(t0=u.ATH.cb_s[u.bm_s[S]]*D,Y=Math.min(Math.max(u.thm[0].s[S][n0],t0),Math.max(u.thm[1].s[S][n0],t0)),Z=Math.max(u.thm[2].s[S][n0],t0),C=Math.max(u.thm[3].s[S][n0],t0),Y*h<Z+C){var W=Y*h/(Z+C);Z*=W,C*=W,K(Z+C>0)}u.thm[2].s[S][n0]=Math.min(u.thm[2].s[S][n0],Z),u.thm[3].s[S][n0]=Math.min(u.thm[3].s[S][n0],C)}}function h0(u,h,w,x,D){var S,Y,Z=0,C=0;for(S=Y=0;S<T.SBMAX_s;++Y,++S){for(var t0=u.bo_s[S],W=u.npart_s,n0=t0<W?t0:W;Y<n0;)K(h[Y]>=0),K(w[Y]>=0),Z+=h[Y],C+=w[Y],Y++;if(u.en[x].s[S][D]=Z,u.thm[x].s[S][D]=C,Y>=W){++S;break}K(h[Y]>=0),K(w[Y]>=0);{var m0=u.PSY.bo_s_weight[S],I0=1-m0;Z=m0*h[Y],C=m0*w[Y],u.en[x].s[S][D]+=Z,u.thm[x].s[S][D]+=C,Z=I0*h[Y],C=I0*w[Y]}}for(;S<T.SBMAX_s;++S)u.en[x].s[S][D]=0,u.thm[x].s[S][D]=0}function u0(u,h,w,x){var D,S,Y=0,Z=0;for(D=S=0;D<T.SBMAX_l;++S,++D){for(var C=u.bo_l[D],t0=u.npart_l,W=C<t0?C:t0;S<W;)K(h[S]>=0),K(w[S]>=0),Y+=h[S],Z+=w[S],S++;if(u.en[x].l[D]=Y,u.thm[x].l[D]=Z,S>=t0){++D;break}K(h[S]>=0),K(w[S]>=0);{var n0=u.PSY.bo_l_weight[D],m0=1-n0;Y=n0*h[S],Z=n0*w[S],u.en[x].l[D]+=Y,u.thm[x].l[D]+=Z,Y=m0*h[S],Z=m0*w[S]}}for(;D<T.SBMAX_l;++D)u.en[x].l[D]=0,u.thm[x].l[D]=0}function c0(u,h,w,x,D,S){var Y=u.internal_flags,Z,C;for(C=Z=0;C<Y.npart_s;++C){for(var t0=0,W=Y.numlines_s[C],n0=0;n0<W;++n0,++Z){var m0=h[S][Z];t0+=m0}w[C]=t0}for(K(C==Y.npart_s),K(Z==129),Z=C=0;C<Y.npart_s;C++){var I0=Y.s3ind_s[C][0],l0=Y.s3_ss[Z++]*w[I0];for(++I0;I0<=Y.s3ind_s[C][1];)l0+=Y.s3_ss[Z]*w[I0],++Z,++I0;{var w0=b*Y.nb_s1[D][C];x[C]=Math.min(l0,w0)}if(Y.blocktype_old[D&1]==T.SHORT_TYPE){var w0=O*Y.nb_s2[D][C],e0=x[C];x[C]=Math.min(w0,e0)}Y.nb_s2[D][C]=Y.nb_s1[D][C],Y.nb_s1[D][C]=l0,K(x[C]>=0)}for(;C<=T.CBANDS;++C)w[C]=0,x[C]=0}function M0(u,h,w,x){var D=u.internal_flags;u.short_blocks==U.short_block_coupled&&!(h[0]!=0&&h[1]!=0)&&(h[0]=h[1]=0);for(var S=0;S<D.channels_out;S++)x[S]=T.NORM_TYPE,u.short_blocks==U.short_block_dispensed&&(h[S]=1),u.short_blocks==U.short_block_forced&&(h[S]=0),h[S]!=0?(K(D.blocktype_old[S]!=T.START_TYPE),D.blocktype_old[S]==T.SHORT_TYPE&&(x[S]=T.STOP_TYPE)):(x[S]=T.SHORT_TYPE,D.blocktype_old[S]==T.NORM_TYPE&&(D.blocktype_old[S]=T.START_TYPE),D.blocktype_old[S]==T.STOP_TYPE&&(D.blocktype_old[S]=T.SHORT_TYPE)),w[S]=D.blocktype_old[S],D.blocktype_old[S]=x[S]}function N0(u,h,w){return w>=1?u:w<=0?h:h>0?Math.pow(u/h,w)*h:0}var X0=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function i(u,h){for(var w=309.07,x=0;x<T.SBMAX_s-1;x++)for(var D=0;D<3;D++){var S=u.thm.s[x][D];if(K(x<X0.length),S>0){var Y=S*h,Z=u.en.s[x][D];Z>Y&&(Z>Y*1e10?w+=X0[x]*(10*g):(K(Y>0),w+=X0[x]*r0.FAST_LOG10(Z/Y)))}}return w}var o=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function d0(u,h){for(var w=281.0575,x=0;x<T.SBMAX_l-1;x++){var D=u.thm.l[x];if(K(x<o.length),D>0){var S=D*h,Y=u.en.l[x];Y>S&&(Y>S*1e10?w+=o[x]*(10*g):(K(S>0),w+=o[x]*r0.FAST_LOG10(Y/S)))}}return w}function S0(u,h,w,x,D){var S,Y;for(S=Y=0;S<u.npart_l;++S){var Z=0,C=0,t0;for(t0=0;t0<u.numlines_l[S];++t0,++Y){var W=h[Y];K(W>=0),Z+=W,C<W&&(C=W)}w[S]=Z,x[S]=C,D[S]=Z*u.rnumlines_l[S],K(u.rnumlines_l[S]>=0),K(Z>=0),K(w[S]>=0),K(x[S]>=0),K(D[S]>=0)}}function V0(u,h,w,x){var D=e.length-1,S=0,Y=w[S]+w[S+1];if(K(Y>=0),Y>0){var Z=h[S];Z<h[S+1]&&(Z=h[S+1]),K(u.numlines_l[S]+u.numlines_l[S+1]-1>0),Y=20*(Z*2-Y)/(Y*(u.numlines_l[S]+u.numlines_l[S+1]-1));var C=0|Y;C>D&&(C=D),x[S]=C}else x[S]=0;for(S=1;S<u.npart_l-1;S++)if(Y=w[S-1]+w[S]+w[S+1],K(Y>=0),Y>0){var Z=h[S-1];Z<h[S]&&(Z=h[S]),Z<h[S+1]&&(Z=h[S+1]),K(u.numlines_l[S-1]+u.numlines_l[S]+u.numlines_l[S+1]-1>0),Y=20*(Z*3-Y)/(Y*(u.numlines_l[S-1]+u.numlines_l[S]+u.numlines_l[S+1]-1));var C=0|Y;C>D&&(C=D),x[S]=C}else x[S]=0;if(K(S>0),K(S==u.npart_l-1),Y=w[S-1]+w[S],K(Y>=0),Y>0){var Z=h[S-1];Z<h[S]&&(Z=h[S]),K(u.numlines_l[S-1]+u.numlines_l[S]-1>0),Y=20*(Z*2-Y)/(Y*(u.numlines_l[S-1]+u.numlines_l[S]-1));var C=0|Y;C>D&&(C=D),x[S]=C}else x[S]=0;K(S==u.npart_l-1)}var y0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(u,h,w,x,D,S,Y,Z,C,t0){var W=u.internal_flags,n0=J([2,T.BLKSIZE]),m0=J([2,3,T.BLKSIZE_s]),I0=G(T.CBANDS+1),l0=G(T.CBANDS+1),w0=G(T.CBANDS+2),e0=q(2),R0=q(2),H0,o0,A0,_0,x0,C0,b0,p0,O0=J([2,576]),P0,t1=q(T.CBANDS+2),z0=q(T.CBANDS+2);for(z.fill(z0,0),H0=W.channels_out,u.mode==MPEGMode.JOINT_STEREO&&(H0=4),u.VBR==R.vbr_off?P0=W.ResvMax==0?0:W.ResvSize/W.ResvMax*.5:u.VBR==R.vbr_rh||u.VBR==R.vbr_mtrh||u.VBR==R.vbr_mt?P0=.6:P0=1,o0=0;o0<W.channels_out;o0++){var G0=h[o0],e1=w+576-350-v0+192;for(K(y0.length==(v0-1)/2),_0=0;_0<576;_0++){var n1,i1;for(n1=G0[e1+_0+10],i1=0,x0=0;x0<(v0-1)/2-1;x0+=2)n1+=y0[x0]*(G0[e1+_0+x0]+G0[e1+_0+v0-x0]),i1+=y0[x0+1]*(G0[e1+_0+x0+1]+G0[e1+_0+v0-x0-1]);O0[o0][_0]=n1+i1}D[x][o0].en.assign(W.en[o0]),D[x][o0].thm.assign(W.thm[o0]),H0>2&&(S[x][o0].en.assign(W.en[o0+2]),S[x][o0].thm.assign(W.thm[o0+2]))}for(o0=0;o0<H0;o0++){var l1,o1,$0=G(12),v1=[0,0,0,0],c1=G(12),L1=1,Se,Me=G(T.CBANDS),Re=G(T.CBANDS),D0=[0,0,0,0],Ae=G(T.HBLKSIZE),Ee=J([3,T.HBLKSIZE_s]);for(K(W.npart_s<=T.CBANDS),K(W.npart_l<=T.CBANDS),_0=0;_0<3;_0++)$0[_0]=W.nsPsy.last_en_subshort[o0][_0+6],K(W.nsPsy.last_en_subshort[o0][_0+4]>0),c1[_0]=$0[_0]/W.nsPsy.last_en_subshort[o0][_0+4],v1[0]+=$0[_0];if(o0==2)for(_0=0;_0<576;_0++){var x1,V1;x1=O0[0][_0],V1=O0[1][_0],O0[0][_0]=x1+V1,O0[1][_0]=x1-V1}{var Be=O0[o0&1],M1=0;for(_0=0;_0<9;_0++){for(var ma=M1+64,j0=1;M1<ma;M1++)j0<Math.abs(Be[M1])&&(j0=Math.abs(Be[M1]));W.nsPsy.last_en_subshort[o0][_0]=$0[_0+3]=j0,v1[1+_0/3]+=j0,j0>$0[_0+3-2]?(K($0[_0+3-2]>0),j0=j0/$0[_0+3-2]):$0[_0+3-2]>j0*10?(K(j0>0),j0=$0[_0+3-2]/(j0*10)):j0=0,c1[_0+3]=j0}}if(u.analysis){var N1=c1[0];for(_0=1;_0<12;_0++)N1<c1[_0]&&(N1=c1[_0]);W.pinfo.ers[x][o0]=W.pinfo.ers_save[o0],W.pinfo.ers_save[o0]=N1}for(Se=o0==3?W.nsPsy.attackthre_s:W.nsPsy.attackthre,_0=0;_0<12;_0++)D0[_0/3]==0&&c1[_0]>Se&&(D0[_0/3]=_0%3+1);for(_0=1;_0<4;_0++){var p1;v1[_0-1]>v1[_0]?(K(v1[_0]>0),p1=v1[_0-1]/v1[_0]):(K(v1[_0-1]>0),p1=v1[_0]/v1[_0-1]),p1<1.7&&(D0[_0]=0,_0==1&&(D0[0]=0))}for(D0[0]!=0&&W.nsPsy.lastAttacks[o0]!=0&&(D0[0]=0),(W.nsPsy.lastAttacks[o0]==3||D0[0]+D0[1]+D0[2]+D0[3]!=0)&&(L1=0,D0[1]!=0&&D0[0]!=0&&(D0[1]=0),D0[2]!=0&&D0[1]!=0&&(D0[2]=0),D0[3]!=0&&D0[2]!=0&&(D0[3]=0)),o0<2?R0[o0]=L1:L1==0&&(R0[0]=R0[1]=0),C[o0]=W.tot_ener[o0],o1=m0,l1=n0,H(u,Ae,Ee,l1,o0&1,o1,o0&1,x,o0,h,w),S0(W,Ae,I0,Me,Re),V0(W,Me,Re,t1),p0=0;p0<3;p0++){var H1,a1;for(c0(u,Ee,l0,w0,o0,p0),h0(W,l0,w0,o0,p0),b0=0;b0<T.SBMAX_s;b0++){if(a1=W.thm[o0].s[b0][p0],a1*=j,D0[p0]>=2||D0[p0+1]==1){var R1=p0!=0?p0-1:2,j0=N0(W.thm[o0].s[b0][R1],a1,X*P0);a1=Math.min(a1,j0)}if(D0[p0]==1){var R1=p0!=0?p0-1:2,j0=N0(W.thm[o0].s[b0][R1],a1,k*P0);a1=Math.min(a1,j0)}else if(p0!=0&&D0[p0-1]==3||p0==0&&W.nsPsy.lastAttacks[o0]==3){var R1=p0!=2?p0+1:0,j0=N0(W.thm[o0].s[b0][R1],a1,k*P0);a1=Math.min(a1,j0)}H1=$0[p0*3+3]+$0[p0*3+4]+$0[p0*3+5],$0[p0*3+5]*6<H1&&(a1*=.5,$0[p0*3+4]*6<H1&&(a1*=.5)),W.thm[o0].s[b0][p0]=a1}}for(W.nsPsy.lastAttacks[o0]=D0[2],C0=0,A0=0;A0<W.npart_l;A0++){for(var m1=W.s3ind[A0][0],O1=I0[m1]*e[t1[m1]],b1=W.s3_ll[C0++]*O1;++m1<=W.s3ind[A0][1];)O1=I0[m1]*e[t1[m1]],b1=d(b1,W.s3_ll[C0++]*O1,m1,m1-A0,W);b1*=.158489319246111,W.blocktype_old[o0&1]==T.SHORT_TYPE?w0[A0]=b1:w0[A0]=N0(Math.min(b1,Math.min(A*W.nb_1[o0][A0],E*W.nb_2[o0][A0])),b1,P0),W.nb_2[o0][A0]=W.nb_1[o0][A0],W.nb_1[o0][A0]=b1}for(;A0<=T.CBANDS;++A0)I0[A0]=0,w0[A0]=0;u0(W,I0,w0,o0)}if((u.mode==MPEGMode.STEREO||u.mode==MPEGMode.JOINT_STEREO)&&u.interChRatio>0&&F(u,u.interChRatio),u.mode==MPEGMode.JOINT_STEREO){var k1;P(W),k1=u.msfix,Math.abs(k1)>0&&s0(W,k1,u.ATHlower*W.ATH.adjust)}for(M0(u,R0,t0,e0),o0=0;o0<H0;o0++){var A1,E1=0,B1,T1;o0>1?(A1=Z,E1=-2,B1=T.NORM_TYPE,(t0[0]==T.SHORT_TYPE||t0[1]==T.SHORT_TYPE)&&(B1=T.SHORT_TYPE),T1=S[x][o0-2]):(A1=Y,E1=0,B1=t0[o0],T1=D[x][o0]),B1==T.SHORT_TYPE?A1[E1+o0]=i(T1,W.masking_lower):A1[E1+o0]=d0(T1,W.masking_lower),u.analysis&&(W.pinfo.pe[x][o0]=A1[E1+o0])}return 0};function B0(u,h,w,x,D,S,Y,Z){var C=u.internal_flags;if(x<2)$.fft_long(C,Y[Z],x,h,w);else if(x==2)for(var t0=T.BLKSIZE-1;t0>=0;--t0){var W=Y[Z+0][t0],n0=Y[Z+1][t0];Y[Z+0][t0]=(W+n0)*r0.SQRT2*.5,Y[Z+1][t0]=(W-n0)*r0.SQRT2*.5}S[0]=Y[Z+0][0],S[0]*=S[0];for(var t0=T.BLKSIZE/2-1;t0>=0;--t0){var m0=Y[Z+0][T.BLKSIZE/2-t0],I0=Y[Z+0][T.BLKSIZE/2+t0];S[T.BLKSIZE/2-t0]=(m0*m0+I0*I0)*.5}{for(var l0=0,t0=11;t0<T.HBLKSIZE;t0++)l0+=S[t0];C.tot_ener[x]=l0}if(u.analysis){for(var t0=0;t0<T.HBLKSIZE;t0++)C.pinfo.energy[D][x][t0]=C.pinfo.energy_save[x][t0],C.pinfo.energy_save[x][t0]=S[t0];C.pinfo.pe[D][x]=C.pe[x]}}function E0(u,h,w,x,D,S,Y,Z){var C=u.internal_flags;if(D==0&&x<2&&$.fft_short(C,Y[Z],x,h,w),x==2)for(var t0=T.BLKSIZE_s-1;t0>=0;--t0){var W=Y[Z+0][D][t0],n0=Y[Z+1][D][t0];Y[Z+0][D][t0]=(W+n0)*r0.SQRT2*.5,Y[Z+1][D][t0]=(W-n0)*r0.SQRT2*.5}S[D][0]=Y[Z+0][D][0],S[D][0]*=S[D][0];for(var t0=T.BLKSIZE_s/2-1;t0>=0;--t0){var m0=Y[Z+0][D][T.BLKSIZE_s/2-t0],I0=Y[Z+0][D][T.BLKSIZE_s/2+t0];S[D][T.BLKSIZE_s/2-t0]=(m0*m0+I0*I0)*.5}}function k0(u,h,w,x){var D=u.internal_flags;u.athaa_loudapprox==2&&w<2&&(D.loudness_sq[h][w]=D.loudness_sq_save[w],D.loudness_sq_save[w]=T0(x,D))}var L0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function f0(u,h,w,x,D,S,Y,Z,C,t0){for(var W=J([2,576]),n0=u.internal_flags,m0=n0.channels_out,I0=u.mode==MPEGMode.JOINT_STEREO?4:m0,l0=0;l0<m0;l0++){firbuf=h[l0];var w0=w+576-350-v0+192;K(L0.length==(v0-1)/2);for(var e0=0;e0<576;e0++){var R0,H0;R0=firbuf[w0+e0+10],H0=0;for(var o0=0;o0<(v0-1)/2-1;o0+=2)R0+=L0[o0]*(firbuf[w0+e0+o0]+firbuf[w0+e0+v0-o0]),H0+=L0[o0+1]*(firbuf[w0+e0+o0+1]+firbuf[w0+e0+v0-o0-1]);W[l0][e0]=R0+H0}D[x][l0].en.assign(n0.en[l0]),D[x][l0].thm.assign(n0.thm[l0]),I0>2&&(S[x][l0].en.assign(n0.en[l0+2]),S[x][l0].thm.assign(n0.thm[l0+2]))}for(var l0=0;l0<I0;l0++){var A0=G(12),_0=G(12),x0=[0,0,0,0],C0=W[l0&1],b0=0,p0=l0==3?n0.nsPsy.attackthre_s:n0.nsPsy.attackthre,O0=1;if(l0==2)for(var e0=0,o0=576;o0>0;++e0,--o0){var P0=W[0][e0],t1=W[1][e0];W[0][e0]=P0+t1,W[1][e0]=P0-t1}for(var e0=0;e0<3;e0++)_0[e0]=n0.nsPsy.last_en_subshort[l0][e0+6],K(n0.nsPsy.last_en_subshort[l0][e0+4]>0),A0[e0]=_0[e0]/n0.nsPsy.last_en_subshort[l0][e0+4],x0[0]+=_0[e0];for(var e0=0;e0<9;e0++){for(var z0=b0+64,G0=1;b0<z0;b0++)G0<Math.abs(C0[b0])&&(G0=Math.abs(C0[b0]));n0.nsPsy.last_en_subshort[l0][e0]=_0[e0+3]=G0,x0[1+e0/3]+=G0,G0>_0[e0+3-2]?(K(_0[e0+3-2]>0),G0=G0/_0[e0+3-2]):_0[e0+3-2]>G0*10?(K(G0>0),G0=_0[e0+3-2]/(G0*10)):G0=0,A0[e0+3]=G0}for(var e0=0;e0<3;++e0){var e1=_0[e0*3+3]+_0[e0*3+4]+_0[e0*3+5],n1=1;_0[e0*3+5]*6<e1&&(n1*=.5,_0[e0*3+4]*6<e1&&(n1*=.5)),Z[l0][e0]=n1}if(u.analysis){for(var i1=A0[0],e0=1;e0<12;e0++)i1<A0[e0]&&(i1=A0[e0]);n0.pinfo.ers[x][l0]=n0.pinfo.ers_save[l0],n0.pinfo.ers_save[l0]=i1}for(var e0=0;e0<12;e0++)C[l0][e0/3]==0&&A0[e0]>p0&&(C[l0][e0/3]=e0%3+1);for(var e0=1;e0<4;e0++){var l1=x0[e0-1],o1=x0[e0],$0=Math.max(l1,o1);$0<4e4&&l1<1.7*o1&&o1<1.7*l1&&(e0==1&&C[l0][0]<=C[l0][e0]&&(C[l0][0]=0),C[l0][e0]=0)}C[l0][0]<=n0.nsPsy.lastAttacks[l0]&&(C[l0][0]=0),(n0.nsPsy.lastAttacks[l0]==3||C[l0][0]+C[l0][1]+C[l0][2]+C[l0][3]!=0)&&(O0=0,C[l0][1]!=0&&C[l0][0]!=0&&(C[l0][1]=0),C[l0][2]!=0&&C[l0][1]!=0&&(C[l0][2]=0),C[l0][3]!=0&&C[l0][2]!=0&&(C[l0][3]=0)),l0<2?t0[l0]=O0:O0==0&&(t0[0]=t0[1]=0),Y[l0]=n0.tot_ener[l0]}}function F0(u,h,w){if(w==0)for(var x=0;x<u.npart_s;x++)u.nb_s2[h][x]=u.nb_s1[h][x],u.nb_s1[h][x]=0}function K0(u,h){for(var w=0;w<u.npart_l;w++)u.nb_2[h][w]=u.nb_1[h][w],u.nb_1[h][w]=0}function q0(u,h,w,x){var D=e.length-1,S=0,Y=w[S]+w[S+1];if(K(Y>=0),Y>0){var Z=h[S];Z<h[S+1]&&(Z=h[S+1]),K(u.numlines_s[S]+u.numlines_s[S+1]-1>0),Y=20*(Z*2-Y)/(Y*(u.numlines_s[S]+u.numlines_s[S+1]-1));var C=0|Y;C>D&&(C=D),x[S]=C}else x[S]=0;for(S=1;S<u.npart_s-1;S++)if(Y=w[S-1]+w[S]+w[S+1],K(S+1<u.npart_s),K(Y>=0),Y>0){var Z=h[S-1];Z<h[S]&&(Z=h[S]),Z<h[S+1]&&(Z=h[S+1]),K(u.numlines_s[S-1]+u.numlines_s[S]+u.numlines_s[S+1]-1>0),Y=20*(Z*3-Y)/(Y*(u.numlines_s[S-1]+u.numlines_s[S]+u.numlines_s[S+1]-1));var C=0|Y;C>D&&(C=D),x[S]=C}else x[S]=0;if(K(S>0),K(S==u.npart_s-1),Y=w[S-1]+w[S],K(Y>=0),Y>0){var Z=h[S-1];Z<h[S]&&(Z=h[S]),K(u.numlines_s[S-1]+u.numlines_s[S]-1>0),Y=20*(Z*2-Y)/(Y*(u.numlines_s[S-1]+u.numlines_s[S]-1));var C=0|Y;C>D&&(C=D),x[S]=C}else x[S]=0;K(S==u.npart_s-1)}function Z0(u,h,w,x,D,S){var Y=u.internal_flags,Z=new float[T.CBANDS],C=G(T.CBANDS),t0,W,n0,m0=new int[T.CBANDS];for(n0=W=0;n0<Y.npart_s;++n0){var I0=0,l0=0,w0=Y.numlines_s[n0];for(t0=0;t0<w0;++t0,++W){var e0=h[S][W];I0+=e0,l0<e0&&(l0=e0)}w[n0]=I0,K(I0>=0),Z[n0]=l0,K(w0>0),C[n0]=I0/w0,K(C[n0]>=0)}for(K(n0==Y.npart_s),K(W==129);n0<T.CBANDS;++n0)Z[n0]=0,C[n0]=0;for(q0(Y,Z,C,m0),W=n0=0;n0<Y.npart_s;n0++){var R0=Y.s3ind_s[n0][0],H0=Y.s3ind_s[n0][1],o0,A0,_0,x0,C0;for(o0=m0[R0],A0=1,x0=Y.s3_ss[W]*w[R0]*e[m0[R0]],++W,++R0;R0<=H0;)o0+=m0[R0],A0+=1,_0=Y.s3_ss[W]*w[R0]*e[m0[R0]],x0=f(x0,_0,R0-n0),++W,++R0;o0=(1+2*o0)/(2*A0),C0=e[o0]*.5,x0*=C0,x[n0]=x0,Y.nb_s2[D][n0]=Y.nb_s1[D][n0],Y.nb_s1[D][n0]=x0,_0=Z[n0],_0*=Y.minval_s[n0],_0*=C0,x[n0]>_0&&(x[n0]=_0),Y.masking_lower>1&&(x[n0]*=Y.masking_lower),x[n0]>w[n0]&&(x[n0]=w[n0]),Y.masking_lower<1&&(x[n0]*=Y.masking_lower),K(x[n0]>=0)}for(;n0<T.CBANDS;++n0)w[n0]=0,x[n0]=0}function Q0(u,h,w,x,D){var S=G(T.CBANDS),Y=G(T.CBANDS),Z=q(T.CBANDS+2),C;S0(u,h,w,S,Y),V0(u,S,Y,Z);var t0=0;for(C=0;C<u.npart_l;C++){var W,n0,m0,I0,l0=u.s3ind[C][0],w0=u.s3ind[C][1],e0=0,R0=0;for(e0=Z[l0],R0+=1,n0=u.s3_ll[t0]*w[l0]*e[Z[l0]],++t0,++l0;l0<=w0;)e0+=Z[l0],R0+=1,W=u.s3_ll[t0]*w[l0]*e[Z[l0]],I0=f(n0,W,l0-C),n0=I0,++t0,++l0;if(e0=(1+2*e0)/(2*R0),m0=e[e0]*.5,n0*=m0,u.blocktype_old[D&1]==T.SHORT_TYPE){var H0=A*u.nb_1[D][C];H0>0?x[C]=Math.min(n0,H0):x[C]=Math.min(n0,w[C]*k)}else{var o0=E*u.nb_2[D][C],A0=A*u.nb_1[D][C],H0;o0<=0&&(o0=n0),A0<=0&&(A0=n0),u.blocktype_old[D&1]==T.NORM_TYPE?H0=Math.min(A0,o0):H0=A0,x[C]=Math.min(n0,H0)}u.nb_2[D][C]=u.nb_1[D][C],u.nb_1[D][C]=n0,W=S[C],W*=u.minval_l[C],W*=m0,x[C]>W&&(x[C]=W),u.masking_lower>1&&(x[C]*=u.masking_lower),x[C]>w[C]&&(x[C]=w[C]),u.masking_lower<1&&(x[C]*=u.masking_lower),K(x[C]>=0)}for(;C<T.CBANDS;++C)w[C]=0,x[C]=0}function Y0(u,h){var w=u.internal_flags;u.short_blocks==U.short_block_coupled&&!(h[0]!=0&&h[1]!=0)&&(h[0]=h[1]=0);for(var x=0;x<w.channels_out;x++)u.short_blocks==U.short_block_dispensed&&(h[x]=1),u.short_blocks==U.short_block_forced&&(h[x]=0)}function W0(u,h,w){for(var x=u.internal_flags,D=0;D<x.channels_out;D++){var S=T.NORM_TYPE;h[D]!=0?(K(x.blocktype_old[D]!=T.START_TYPE),x.blocktype_old[D]==T.SHORT_TYPE&&(S=T.STOP_TYPE)):(S=T.SHORT_TYPE,x.blocktype_old[D]==T.NORM_TYPE&&(x.blocktype_old[D]=T.START_TYPE),x.blocktype_old[D]==T.STOP_TYPE&&(x.blocktype_old[D]=T.SHORT_TYPE)),w[D]=x.blocktype_old[D],x.blocktype_old[D]=S}}function r1(u,h,w,x,D,S,Y){for(var Z=S*2,C=S>0?Math.pow(10,D):1,t0,W,n0=0;n0<Y;++n0){var m0=u[2][n0],I0=u[3][n0],l0=h[0][n0],w0=h[1][n0],e0=h[2][n0],R0=h[3][n0];if(l0<=1.58*w0&&w0<=1.58*l0){var H0=w[n0]*I0,o0=w[n0]*m0;W=Math.max(e0,Math.min(R0,H0)),t0=Math.max(R0,Math.min(e0,o0))}else W=e0,t0=R0;if(S>0){var A0,_0,x0=x[n0]*C;if(A0=Math.min(Math.max(l0,x0),Math.max(w0,x0)),e0=Math.max(W,x0),R0=Math.max(t0,x0),_0=e0+R0,_0>0&&A0*Z<_0){var C0=A0*Z/_0;e0*=C0,R0*=C0,K(_0>0)}W=Math.min(e0,W),t0=Math.min(R0,t0)}W>m0&&(W=m0),t0>I0&&(t0=I0),h[2][n0]=W,h[3][n0]=t0}}this.L3psycho_anal_vbr=function(u,h,w,x,D,S,Y,Z,C,t0){var W=u.internal_flags,n0,m0,I0=G(T.HBLKSIZE),l0=J([3,T.HBLKSIZE_s]),w0=J([2,T.BLKSIZE]),e0=J([2,3,T.BLKSIZE_s]),R0=J([4,T.CBANDS]),H0=J([4,T.CBANDS]),o0=J([4,3]),A0=.6,_0=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],x0=q(2),C0=u.mode==MPEGMode.JOINT_STEREO?4:W.channels_out;f0(u,h,w,x,D,S,C,o0,_0,x0),Y0(u,x0);{for(var b0=0;b0<C0;b0++){var p0=b0&1;n0=w0,B0(u,h,w,b0,x,I0,n0,p0),k0(u,x,b0,I0),x0[p0]!=0?Q0(W,I0,R0[b0],H0[b0],b0):K0(W,b0)}x0[0]+x0[1]==2&&u.mode==MPEGMode.JOINT_STEREO&&r1(R0,H0,W.mld_cb_l,W.ATH.cb_l,u.ATHlower*W.ATH.adjust,u.msfix,W.npart_l);for(var b0=0;b0<C0;b0++){var p0=b0&1;x0[p0]!=0&&u0(W,R0[b0],H0[b0],b0)}}{for(var O0=0;O0<3;O0++){for(var b0=0;b0<C0;++b0){var p0=b0&1;x0[p0]!=0?F0(W,b0,O0):(m0=e0,E0(u,h,w,b0,O0,l0,m0,p0),Z0(u,l0,R0[b0],H0[b0],b0,O0))}x0[0]+x0[1]==0&&u.mode==MPEGMode.JOINT_STEREO&&r1(R0,H0,W.mld_cb_s,W.ATH.cb_s,u.ATHlower*W.ATH.adjust,u.msfix,W.npart_s);for(var b0=0;b0<C0;++b0){var p0=b0&1;x0[p0]==0&&h0(W,R0[b0],H0[b0],b0,O0)}}for(var b0=0;b0<C0;b0++){var p0=b0&1;if(x0[p0]==0)for(var P0=0;P0<T.SBMAX_s;P0++){for(var t1=G(3),O0=0;O0<3;O0++){var z0=W.thm[b0].s[P0][O0];if(z0*=j,_0[b0][O0]>=2||_0[b0][O0+1]==1){var G0=O0!=0?O0-1:2,e1=N0(W.thm[b0].s[P0][G0],z0,X*A0);z0=Math.min(z0,e1)}else if(_0[b0][O0]==1){var G0=O0!=0?O0-1:2,e1=N0(W.thm[b0].s[P0][G0],z0,k*A0);z0=Math.min(z0,e1)}else if(O0!=0&&_0[b0][O0-1]==3||O0==0&&W.nsPsy.lastAttacks[b0]==3){var G0=O0!=2?O0+1:0,e1=N0(W.thm[b0].s[P0][G0],z0,k*A0);z0=Math.min(z0,e1)}z0*=o0[b0][O0],t1[O0]=z0}for(var O0=0;O0<3;O0++)W.thm[b0].s[P0][O0]=t1[O0]}}}for(var b0=0;b0<C0;b0++)W.nsPsy.lastAttacks[b0]=_0[b0][2];W0(u,x0,t0);for(var b0=0;b0<C0;b0++){var n1,i1,l1,o1;b0>1?(n1=Z,i1=-2,l1=T.NORM_TYPE,(t0[0]==T.SHORT_TYPE||t0[1]==T.SHORT_TYPE)&&(l1=T.SHORT_TYPE),o1=S[x][b0-2]):(n1=Y,i1=0,l1=t0[b0],o1=D[x][b0]),l1==T.SHORT_TYPE?n1[i1+b0]=i(o1,W.masking_lower):n1[i1+b0]=d0(o1,W.masking_lower),u.analysis&&(W.pinfo.pe[x][b0]=n1[i1+b0])}return 0};function J0(u,h){var w=u,x;return w>=0?x=-w*27:x=w*h,x<=-72?0:Math.exp(x*Q)}function s1(u){var h=0,w=0;{var x=0,D,S;for(x=0;J0(x,u)>1e-20;x-=1);for(D=x,S=0;Math.abs(S-D)>1e-12;)x=(S+D)/2,J0(x,u)>0?S=x:D=x;h=D}{var x=0,D,S;for(x=0;J0(x,u)>1e-20;x+=1);for(D=0,S=x;Math.abs(S-D)>1e-12;)x=(S+D)/2,J0(x,u)>0?D=x:S=x;w=S}{var Y=0,Z=1e3,C;for(C=0;C<=Z;++C){var x=h+C*(w-h)/Z,t0=J0(x,u);Y+=t0}{var W=(Z+1)/(Y*(w-h));return W}}}function u1(u){var h,w,x,D;return h=u,h>=0?h*=3:h*=1.5,h>=.5&&h<=2.5?(D=h-.5,w=8*(D*D-2*D)):w=0,h+=.474,x=15.811389+7.5*h-17.5*Math.sqrt(1+h*h),x<=-60?0:(h=Math.exp((w+x)*Q),h/=.6609193,h)}function _1(u){return u<0&&(u=0),u=u*.001,13*Math.atan(.76*u)+3.5*Math.atan(u*u/(7.5*7.5))}function d1(u,h,w,x,D,S,Y,Z,C,t0,W,n0){var m0=G(T.CBANDS+1),I0=Z/(n0>15?2*576:384),l0=q(T.HBLKSIZE),w0;Z/=C;var e0=0,R0=0;for(w0=0;w0<T.CBANDS;w0++){var H0,o0;for(H0=_1(Z*e0),m0[w0]=Z*e0,o0=e0;_1(Z*o0)-H0<t&&o0<=C/2;o0++);for(u[w0]=o0-e0,R0=w0+1;e0<o0;)K(e0<T.HBLKSIZE),l0[e0++]=w0;if(e0>C/2){e0=C/2,++w0;break}}K(w0<T.CBANDS),m0[w0]=Z*e0;for(var A0=0;A0<n0;A0++){var _0,x0,C0,b0,p0;C0=t0[A0],b0=t0[A0+1],_0=0|Math.floor(.5+W*(C0-.5)),_0<0&&(_0=0),x0=0|Math.floor(.5+W*(b0-.5)),x0>C/2&&(x0=C/2),w[A0]=(l0[_0]+l0[x0])/2,h[A0]=l0[x0];var O0=I0*b0;Y[A0]=(O0-m0[h[A0]])/(m0[h[A0]+1]-m0[h[A0]]),Y[A0]<0?Y[A0]=0:Y[A0]>1&&(Y[A0]=1),p0=_1(Z*t0[A0]*W),p0=Math.min(p0,15.5)/15.5,S[A0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*p0))-2.5)}e0=0;for(var P0=0;P0<R0;P0++){var t1=u[P0],H0,z0;H0=_1(Z*e0),z0=_1(Z*(e0+t1-1)),x[P0]=.5*(H0+z0),H0=_1(Z*(e0-.5)),z0=_1(Z*(e0+t1-.5)),D[P0]=z0-H0,e0+=t1}return R0}function h1(u,h,w,x,D,S){var Y=J([T.CBANDS,T.CBANDS]),Z,C=0;if(S)for(var t0=0;t0<h;t0++)for(Z=0;Z<h;Z++){var W=u1(w[t0]-w[Z])*x[Z];Y[t0][Z]=W*D[t0]}else for(Z=0;Z<h;Z++)for(var n0=15+Math.min(21/w[Z],12),m0=s1(n0),t0=0;t0<h;t0++){var W=m0*J0(w[t0]-w[Z],n0)*x[Z];Y[t0][Z]=W*D[t0]}for(var t0=0;t0<h;t0++){for(Z=0;Z<h&&!(Y[t0][Z]>0);Z++);for(u[t0][0]=Z,Z=h-1;Z>0&&!(Y[t0][Z]>0);Z--);u[t0][1]=Z,C+=u[t0][1]-u[t0][0]+1}for(var I0=G(C),l0=0,t0=0;t0<h;t0++)for(Z=u[t0][0];Z<=u[t0][1];Z++)I0[l0++]=Y[t0][Z];return I0}function S1(u){var h=_1(u);return h=Math.min(h,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*h))-2.5)}this.psymodel_init=function(u){var h=u.internal_flags,w,x=!0,D=13,S=24,Y=0,Z=0,C=-8.25,t0=-4.5,W=G(T.CBANDS),n0=G(T.CBANDS),m0=G(T.CBANDS),I0=u.out_samplerate;switch(u.experimentalZ){default:case 0:x=!0;break;case 1:x=!(u.VBR==R.vbr_mtrh||u.VBR==R.vbr_mt);break;case 2:x=!1;break;case 3:D=8,Y=-1.75,Z=-.0125,C=-8.25,t0=-2.25;break}for(h.ms_ener_ratio_old=.25,h.blocktype_old[0]=h.blocktype_old[1]=T.NORM_TYPE,w=0;w<4;++w){for(var e0=0;e0<T.CBANDS;++e0)h.nb_1[w][e0]=1e20,h.nb_2[w][e0]=1e20,h.nb_s1[w][e0]=h.nb_s2[w][e0]=1;for(var l0=0;l0<T.SBMAX_l;l0++)h.en[w].l[l0]=1e20,h.thm[w].l[l0]=1e20;for(var e0=0;e0<3;++e0){for(var l0=0;l0<T.SBMAX_s;l0++)h.en[w].s[l0][e0]=1e20,h.thm[w].s[l0][e0]=1e20;h.nsPsy.lastAttacks[w]=0}for(var e0=0;e0<9;e0++)h.nsPsy.last_en_subshort[w][e0]=10}for(h.loudness_sq_save[0]=h.loudness_sq_save[1]=0,h.npart_l=d1(h.numlines_l,h.bo_l,h.bm_l,W,n0,h.mld_l,h.PSY.bo_l_weight,I0,T.BLKSIZE,h.scalefac_band.l,T.BLKSIZE/(2*576),T.SBMAX_l),K(h.npart_l<T.CBANDS),w=0;w<h.npart_l;w++){var w0=Y;W[w]>=D&&(w0=Z*(W[w]-D)/(S-D)+Y*(S-W[w])/(S-D)),m0[w]=Math.pow(10,w0/10),h.numlines_l[w]>0?h.rnumlines_l[w]=1/h.numlines_l[w]:h.rnumlines_l[w]=0}h.s3_ll=h1(h.s3ind,h.npart_l,W,n0,m0,x);var e0=0;for(w=0;w<h.npart_l;w++){var R0;R0=a0.MAX_VALUE;for(var H0=0;H0<h.numlines_l[w];H0++,e0++){var o0=I0*e0/(1e3*T.BLKSIZE),A0;A0=this.ATHformula(o0*1e3,u)-20,A0=Math.pow(10,.1*A0),A0*=h.numlines_l[w],R0>A0&&(R0=A0)}h.ATH.cb_l[w]=R0,R0=-20+W[w]*20/10,R0>6&&(R0=100),R0<-15&&(R0=-15),R0-=8,h.minval_l[w]=Math.pow(10,R0/10)*h.numlines_l[w]}for(h.npart_s=d1(h.numlines_s,h.bo_s,h.bm_s,W,n0,h.mld_s,h.PSY.bo_s_weight,I0,T.BLKSIZE_s,h.scalefac_band.s,T.BLKSIZE_s/384,T.SBMAX_s),K(h.npart_s<T.CBANDS),e0=0,w=0;w<h.npart_s;w++){var R0,w0=C;W[w]>=D&&(w0=t0*(W[w]-D)/(S-D)+C*(S-W[w])/(S-D)),m0[w]=Math.pow(10,w0/10),R0=a0.MAX_VALUE;for(var H0=0;H0<h.numlines_s[w];H0++,e0++){var o0=I0*e0/(1e3*T.BLKSIZE_s),A0;A0=this.ATHformula(o0*1e3,u)-20,A0=Math.pow(10,.1*A0),A0*=h.numlines_s[w],R0>A0&&(R0=A0)}h.ATH.cb_s[w]=R0,R0=-7+W[w]*7/12,W[w]>12&&(R0*=1+Math.log(1+R0)*3.1),W[w]<12&&(R0*=1+Math.log(1-R0)*2.3),R0<-15&&(R0=-15),R0-=8,h.minval_s[w]=Math.pow(10,R0/10)*h.numlines_s[w]}h.s3_ss=h1(h.s3ind_s,h.npart_s,W,n0,m0,x),r(),$.init_fft(h),h.decay=Math.exp(-1*g/(B*I0/192));{var _0;_0=i0,(u.exp_nspsytune&2)!=0&&(_0=1),Math.abs(u.msfix)>0&&(_0=u.msfix),u.msfix=_0;for(var x0=0;x0<h.npart_l;x0++)h.s3ind[x0][1]>h.npart_l-1&&(h.s3ind[x0][1]=h.npart_l-1)}var C0=576*h.mode_gr/I0;if(h.ATH.decay=Math.pow(10,-12/10*C0),h.ATH.adjust=.01,h.ATH.adjustLimit=1,K(h.bo_l[T.SBMAX_l-1]<=h.npart_l),K(h.bo_s[T.SBMAX_s-1]<=h.npart_s),u.ATHtype!=-1){var o0,b0=u.out_samplerate/T.BLKSIZE,p0=0;for(o0=0,w=0;w<T.BLKSIZE/2;++w)o0+=b0,h.ATH.eql_w[w]=1/Math.pow(10,this.ATHformula(o0,u)/10),p0+=h.ATH.eql_w[w];for(p0=1/p0,w=T.BLKSIZE/2;--w>=0;)h.ATH.eql_w[w]*=p0}{for(var x0=e0=0;x0<h.npart_s;++x0)for(w=0;w<h.numlines_s[x0];++w)++e0;K(e0==129);for(var x0=e0=0;x0<h.npart_l;++x0)for(w=0;w<h.numlines_l[x0];++w)++e0;K(e0==513)}for(e0=0,w=0;w<h.npart_l;w++){var o0=I0*(e0+h.numlines_l[w]/2)/(1*T.BLKSIZE);h.mld_cb_l[w]=S1(o0),e0+=h.numlines_l[w]}for(;w<T.CBANDS;++w)h.mld_cb_l[w]=1;for(e0=0,w=0;w<h.npart_s;w++){var o0=I0*(e0+h.numlines_s[w]/2)/(1*T.BLKSIZE_s);h.mld_cb_s[w]=S1(o0),e0+=h.numlines_s[w]}for(;w<T.CBANDS;++w)h.mld_cb_s[w]=1;return 0};function f1(u,h){u<-.3&&(u=3410),u/=1e3,u=Math.max(.1,u);var w=3.64*Math.pow(u,-.8)-6.8*Math.exp(-.6*Math.pow(u-3.4,2))+6*Math.exp(-.15*Math.pow(u-8.7,2))+(.6+.04*h)*.001*Math.pow(u,4);return w}this.ATHformula=function(u,h){var w;switch(h.ATHtype){case 0:w=f1(u,9);break;case 1:w=f1(u,-1);break;case 2:w=f1(u,0);break;case 3:w=f1(u,1)+6;break;case 4:w=f1(u,h.ATHcurve);break;default:w=f1(u,0);break}return w}}return P1=L,P1}var D1,Ne;function sa(){if(Ne)return D1;Ne=1;function _(R){var a0=R;this.ordinal=function(){return a0}}return _.STEREO=new _(0),_.JOINT_STEREO=new _(1),_.DUAL_CHANNEL=new _(2),_.MONO=new _(3),_.NOT_SET=new _(4),D1=_,D1}var U1,pe;function Aa(){if(pe)return U1;pe=1;var _=sa();function R(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=_.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}return U1=R,U1}var Z1,He;function y1(){if(He)return Z1;He=1;var _=g0(),R={};return R.SFBMAX=_.SBMAX_s*3,Z1=R,Z1}var K1,Oe;function ce(){if(Oe)return K1;Oe=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var R=_.new_float;_.new_float_n;var a0=_.new_int;_.new_int_n,_.assert;var U=y1();function r0(){this.xr=R(576),this.l3_enc=a0(576),this.scalefac=a0(U.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=a0(3),this.subblock_gain=a0(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=a0(U.SFBMAX),this.window=a0(U.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=a0(4),this.max_nonzero_coeff=0;var z=this;function G(q){return new Int32Array(q)}function J(q){return new Float32Array(q)}this.assign=function(q){z.xr=J(q.xr),z.l3_enc=G(q.l3_enc),z.scalefac=G(q.scalefac),z.xrpow_max=q.xrpow_max,z.part2_3_length=q.part2_3_length,z.big_values=q.big_values,z.count1=q.count1,z.global_gain=q.global_gain,z.scalefac_compress=q.scalefac_compress,z.block_type=q.block_type,z.mixed_block_flag=q.mixed_block_flag,z.table_select=G(q.table_select),z.subblock_gain=G(q.subblock_gain),z.region0_count=q.region0_count,z.region1_count=q.region1_count,z.preflag=q.preflag,z.scalefac_scale=q.scalefac_scale,z.count1table_select=q.count1table_select,z.part2_length=q.part2_length,z.sfb_lmax=q.sfb_lmax,z.sfb_smin=q.sfb_smin,z.psy_lmax=q.psy_lmax,z.sfbmax=q.sfbmax,z.psymax=q.psymax,z.sfbdivide=q.sfbdivide,z.width=G(q.width),z.window=G(q.window),z.count1bits=q.count1bits,z.sfb_partition_table=q.sfb_partition_table.slice(0),z.slen=G(q.slen),z.max_nonzero_coeff=q.max_nonzero_coeff}}return K1=r0,K1}var Q1,ke;function Ea(){if(ke)return Q1;ke=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n;var R=_.new_int;_.new_int_n,_.assert;var a0=ce();function U(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[R(4),R(4)];for(var r0=0;r0<2;r0++)for(var z=0;z<2;z++)this.tt[r0][z]=new a0}return Q1=U,Q1}var W1,Fe;function _a(){if(Fe)return W1;Fe=1;var _=U0(),R=_.System;_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n;var a0=_.new_int;_.new_int_n,_.assert;var U=g0();function r0(z,G,J,q){this.l=a0(1+U.SBMAX_l),this.s=a0(1+U.SBMAX_s),this.psfb21=a0(1+U.PSFB21),this.psfb12=a0(1+U.PSFB12);var K=this.l,V=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],R.arraycopy(this.arrL,0,K,0,Math.min(this.arrL.length,this.l.length)),R.arraycopy(this.arrS,0,V,0,Math.min(this.arrS.length,this.s.length)),R.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),R.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}return W1=r0,W1}var z1,qe;function Ba(){if(qe)return z1;qe=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var R=_.new_float,a0=_.new_float_n,U=_.new_int;_.new_int_n,_.assert;var r0=g0();function z(){this.last_en_subshort=a0([4,9]),this.lastAttacks=U(4),this.pefirbuf=R(19),this.longfact=R(r0.SBMAX_l),this.shortfact=R(r0.SBMAX_s),this.attackthre=0,this.attackthre_s=0}return z1=z,z1}var j1,Xe;function Ta(){if(Xe)return j1;Xe=1;function _(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}return j1=_,j1}var J1,Ce;function I1(){if(Ce)return J1;Ce=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n;var R=_.new_byte,a0=_.new_double,U=_.new_float,r0=_.new_float_n,z=_.new_int,G=_.new_int_n;_.assert;var J=Ea(),q=_a(),K=Ba(),V=Ta(),T=ia(),L=g0(),$=y1();g.MFSIZE=3*1152+L.ENCDELAY-L.MDCTDELAY,g.MAX_HEADER_BUF=256,g.MAX_BITS_PER_CHANNEL=4095,g.MAX_BITS_PER_GRANULE=7680,g.BPC=320;function g(){var A=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=r0([2,g.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new J,this.ms_ratio=U(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=z(2),this.CurrentStep=z(2),this.masking_lower=0,this.bv_scf=z(576),this.pseudohalf=z($.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*g.BPC+1),this.itime=a0(2),this.sideinfo_len=0,this.sb_sample=r0([2,2,18,L.SBLIMIT]),this.amp_filter=U(32);function E(){this.write_timing=0,this.ptr=0,this.buf=R(A)}this.header=new Array(g.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new q,this.minval_l=U(L.CBANDS),this.minval_s=U(L.CBANDS),this.nb_1=r0([4,L.CBANDS]),this.nb_2=r0([4,L.CBANDS]),this.nb_s1=r0([4,L.CBANDS]),this.nb_s2=r0([4,L.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=U(4),this.loudness_sq=r0([2,2]),this.loudness_sq_save=U(2),this.mld_l=U(L.SBMAX_l),this.mld_s=U(L.SBMAX_s),this.bm_l=z(L.SBMAX_l),this.bo_l=z(L.SBMAX_l),this.bm_s=z(L.SBMAX_s),this.bo_s=z(L.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=G([L.CBANDS,2]),this.s3ind_s=G([L.CBANDS,2]),this.numlines_s=z(L.CBANDS),this.numlines_l=z(L.CBANDS),this.rnumlines_l=U(L.CBANDS),this.mld_cb_l=U(L.CBANDS),this.mld_cb_s=U(L.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=U(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=z(2),this.nsPsy=new K,this.VBR_seek_table=new V,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=G([16,5]),this.bitrate_blockType_Hist=G([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var b=0;b<this.en.length;b++)this.en[b]=new T;for(var b=0;b<this.thm.length;b++)this.thm[b]=new T;for(var b=0;b<this.header.length;b++)this.header[b]=new E}return J1=g,J1}var $1,Ye;function wa(){if(Ye)return $1;Ye=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var R=_.new_float;_.new_float_n,_.new_int,_.new_int_n,_.assert;var a0=g0();function U(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=R(a0.SBMAX_l),this.s=R(a0.SBMAX_s),this.psfb21=R(a0.PSFB21),this.psfb12=R(a0.PSFB12),this.cb_l=R(a0.CBANDS),this.cb_s=R(a0.CBANDS),this.eql_w=R(a0.BLKSIZE/2)}return $1=U,$1}var g1,Ge;function la(){if(Ge)return g1;Ge=1;var _=U0(),R=_.System;_.VbrMode,_.Float,_.ShortBlock,_.Util;var a0=_.Arrays;_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n,_.new_int,_.new_int_n,_.assert,U.STEPS_per_dB=100,U.MAX_dB=120,U.GAIN_NOT_ENOUGH_SAMPLES=-24601,U.GAIN_ANALYSIS_ERROR=0,U.GAIN_ANALYSIS_OK=1,U.INIT_GAIN_ANALYSIS_ERROR=0,U.INIT_GAIN_ANALYSIS_OK=1,U.YULE_ORDER=10,U.MAX_ORDER=U.YULE_ORDER,U.MAX_SAMP_FREQ=48e3,U.RMS_WINDOW_TIME_NUMERATOR=1,U.RMS_WINDOW_TIME_DENOMINATOR=20,U.MAX_SAMPLES_PER_WINDOW=U.MAX_SAMP_FREQ*U.RMS_WINDOW_TIME_NUMERATOR/U.RMS_WINDOW_TIME_DENOMINATOR+1;function U(){var r0=64.82;U.YULE_ORDER;var z=.95;U.MAX_SAMP_FREQ;var G=U.RMS_WINDOW_TIME_NUMERATOR,J=U.RMS_WINDOW_TIME_DENOMINATOR;U.MAX_SAMPLES_PER_WINDOW;var q=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],K=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function V(A,E,b,O,t,p){for(;t--!=0;)b[O]=1e-10+A[E+0]*p[0]-b[O-1]*p[1]+A[E-1]*p[2]-b[O-2]*p[3]+A[E-2]*p[4]-b[O-3]*p[5]+A[E-3]*p[6]-b[O-4]*p[7]+A[E-4]*p[8]-b[O-5]*p[9]+A[E-5]*p[10]-b[O-6]*p[11]+A[E-6]*p[12]-b[O-7]*p[13]+A[E-7]*p[14]-b[O-8]*p[15]+A[E-8]*p[16]-b[O-9]*p[17]+A[E-9]*p[18]-b[O-10]*p[19]+A[E-10]*p[20],++O,++E}function T(A,E,b,O,t,p){for(;t--!=0;)b[O]=A[E+0]*p[0]-b[O-1]*p[1]+A[E-1]*p[2]-b[O-2]*p[3]+A[E-2]*p[4],++O,++E}function L(A,E){for(var b=0;b<MAX_ORDER;b++)A.linprebuf[b]=A.lstepbuf[b]=A.loutbuf[b]=A.rinprebuf[b]=A.rstepbuf[b]=A.routbuf[b]=0;switch(0|E){case 48e3:A.reqindex=0;break;case 44100:A.reqindex=1;break;case 32e3:A.reqindex=2;break;case 24e3:A.reqindex=3;break;case 22050:A.reqindex=4;break;case 16e3:A.reqindex=5;break;case 12e3:A.reqindex=6;break;case 11025:A.reqindex=7;break;case 8e3:A.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return A.sampleWindow=0|(E*G+J-1)/J,A.lsum=0,A.rsum=0,A.totsamp=0,a0.ill(A.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(A,E){return L(A,E)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(A.linpre=MAX_ORDER,A.rinpre=MAX_ORDER,A.lstep=MAX_ORDER,A.rstep=MAX_ORDER,A.lout=MAX_ORDER,A.rout=MAX_ORDER,a0.fill(A.B,0),INIT_GAIN_ANALYSIS_OK)};function $(A){return A*A}this.AnalyzeSamples=function(A,E,b,O,t,p,B){var j,X,k,i0,v0,Q,c;if(p==0)return GAIN_ANALYSIS_OK;switch(c=0,v0=p,B){case 1:O=E,t=b;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(p<MAX_ORDER?(R.arraycopy(E,b,A.linprebuf,MAX_ORDER,p),R.arraycopy(O,t,A.rinprebuf,MAX_ORDER,p)):(R.arraycopy(E,b,A.linprebuf,MAX_ORDER,MAX_ORDER),R.arraycopy(O,t,A.rinprebuf,MAX_ORDER,MAX_ORDER));v0>0;){Q=v0>A.sampleWindow-A.totsamp?A.sampleWindow-A.totsamp:v0,c<MAX_ORDER?(j=A.linpre+c,X=A.linprebuf,k=A.rinpre+c,i0=A.rinprebuf,Q>MAX_ORDER-c&&(Q=MAX_ORDER-c)):(j=b+c,X=E,k=t+c,i0=O),V(X,j,A.lstepbuf,A.lstep+A.totsamp,Q,q[A.reqindex]),V(i0,k,A.rstepbuf,A.rstep+A.totsamp,Q,q[A.reqindex]),T(A.lstepbuf,A.lstep+A.totsamp,A.loutbuf,A.lout+A.totsamp,Q,K[A.reqindex]),T(A.rstepbuf,A.rstep+A.totsamp,A.routbuf,A.rout+A.totsamp,Q,K[A.reqindex]),j=A.lout+A.totsamp,X=A.loutbuf,k=A.rout+A.totsamp,i0=A.routbuf;for(var T0=Q%8;T0--!=0;)A.lsum+=$(X[j++]),A.rsum+=$(i0[k++]);for(T0=Q/8;T0--!=0;)A.lsum+=$(X[j+0])+$(X[j+1])+$(X[j+2])+$(X[j+3])+$(X[j+4])+$(X[j+5])+$(X[j+6])+$(X[j+7]),j+=8,A.rsum+=$(i0[k+0])+$(i0[k+1])+$(i0[k+2])+$(i0[k+3])+$(i0[k+4])+$(i0[k+5])+$(i0[k+6])+$(i0[k+7]),k+=8;if(v0-=Q,c+=Q,A.totsamp+=Q,A.totsamp==A.sampleWindow){var H=U.STEPS_per_dB*10*Math.log10((A.lsum+A.rsum)/A.totsamp*.5+1e-37),y=H<=0?0:0|H;y>=A.A.length&&(y=A.A.length-1),A.A[y]++,A.lsum=A.rsum=0,R.arraycopy(A.loutbuf,A.totsamp,A.loutbuf,0,MAX_ORDER),R.arraycopy(A.routbuf,A.totsamp,A.routbuf,0,MAX_ORDER),R.arraycopy(A.lstepbuf,A.totsamp,A.lstepbuf,0,MAX_ORDER),R.arraycopy(A.rstepbuf,A.totsamp,A.rstepbuf,0,MAX_ORDER),A.totsamp=0}if(A.totsamp>A.sampleWindow)return GAIN_ANALYSIS_ERROR}return p<MAX_ORDER?(R.arraycopy(A.linprebuf,p,A.linprebuf,0,MAX_ORDER-p),R.arraycopy(A.rinprebuf,p,A.rinprebuf,0,MAX_ORDER-p),R.arraycopy(E,b,A.linprebuf,MAX_ORDER-p,p),R.arraycopy(O,t,A.rinprebuf,MAX_ORDER-p,p)):(R.arraycopy(E,b+p-MAX_ORDER,A.linprebuf,0,MAX_ORDER),R.arraycopy(O,t+p-MAX_ORDER,A.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function g(A,E){var b,O=0;for(b=0;b<E;b++)O+=A[b];if(O==0)return GAIN_NOT_ENOUGH_SAMPLES;var t=0|Math.ceil(O*(1-z));for(b=E;b-- >0&&!((t-=A[b])<=0););return r0-b/U.STEPS_per_dB}this.GetTitleGain=function(A){for(var E=g(A.A,A.A.length),b=0;b<A.A.length;b++)A.B[b]+=A.A[b],A.A[b]=0;for(var b=0;b<MAX_ORDER;b++)A.linprebuf[b]=A.lstepbuf[b]=A.loutbuf[b]=A.rinprebuf[b]=A.rstepbuf[b]=A.routbuf[b]=0;return A.totsamp=0,A.lsum=A.rsum=0,E}}return g1=U,g1}var ee,Pe;function ya(){if(Pe)return ee;Pe=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var R=_.new_float;_.new_float_n;var a0=_.new_int;_.new_int_n,_.assert;var U=la();function r0(){this.linprebuf=R(U.MAX_ORDER*2),this.linpre=0,this.lstepbuf=R(U.MAX_SAMPLES_PER_WINDOW+U.MAX_ORDER),this.lstep=0,this.loutbuf=R(U.MAX_SAMPLES_PER_WINDOW+U.MAX_ORDER),this.lout=0,this.rinprebuf=R(U.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=R(U.MAX_SAMPLES_PER_WINDOW+U.MAX_ORDER),this.rstep=0,this.routbuf=R(U.MAX_SAMPLES_PER_WINDOW+U.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=a0(0|U.STEPS_per_dB*U.MAX_dB),this.B=a0(0|U.STEPS_per_dB*U.MAX_dB)}return ee=r0,ee}var ae,De;function oa(){if(De)return ae;De=1;function _(R){this.bits=R}return ae=_,ae}var re,Ue;function Ia(){if(Ue)return re;Ue=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var R=_.new_float;_.new_float_n;var a0=_.new_int;_.new_int_n;var U=_.assert,r0=oa(),z=g0(),G=y1(),J=I1();function q(K){var V=K;this.quantize=V,this.iteration_loop=function(T,L,$,g){var A=T.internal_flags,E=R(G.SFBMAX),b=R(576),O=a0(2),t=0,p,B=A.l3_side,j=new r0(t);this.quantize.rv.ResvFrameBegin(T,j),t=j.bits;for(var X=0;X<A.mode_gr;X++){p=this.quantize.qupvt.on_pe(T,L,O,t,X,X),A.mode_ext==z.MPG_MD_MS_LR&&(this.quantize.ms_convert(A.l3_side,X),this.quantize.qupvt.reduce_side(O,$[X],t,p));for(var k=0;k<A.channels_out;k++){var i0,v0,Q=B.tt[X][k];Q.block_type!=z.SHORT_TYPE?(i0=0,v0=A.PSY.mask_adjust-i0):(i0=0,v0=A.PSY.mask_adjust_short-i0),A.masking_lower=Math.pow(10,v0*.1),this.quantize.init_outer_loop(A,Q),this.quantize.init_xrpow(A,Q,b)&&(this.quantize.qupvt.calc_xmin(T,g[X][k],Q,E),this.quantize.outer_loop(T,Q,E,b,k,O[k])),this.quantize.iteration_finish_one(A,X,k),U(Q.part2_3_length<=J.MAX_BITS_PER_CHANNEL),U(Q.part2_3_length<=O[k])}}this.quantize.rv.ResvFrameEnd(A,t)}}return re=q,re}var te,Ze;function de(){if(Ze)return te;Ze=1;function _(a0,U,r0,z){this.xlen=a0,this.linmax=U,this.table=r0,this.hlen=z}var R={};return R.t1HB=[1,1,1,0],R.t2HB=[1,2,1,3,1,1,3,2,0],R.t3HB=[3,2,1,1,1,1,3,2,0],R.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],R.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],R.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],R.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],R.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],R.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],R.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],R.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],R.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],R.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],R.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],R.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],R.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],R.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],R.t1l=[1,4,3,5],R.t2l=[1,4,7,4,5,7,6,7,8],R.t3l=[2,3,7,4,4,7,6,7,8],R.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],R.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],R.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],R.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],R.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],R.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],R.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],R.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],R.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],R.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],R.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],R.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],R.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],R.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],R.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],R.ht=[new _(0,0,null,null),new _(2,0,R.t1HB,R.t1l),new _(3,0,R.t2HB,R.t2l),new _(3,0,R.t3HB,R.t3l),new _(0,0,null,null),new _(4,0,R.t5HB,R.t5l),new _(4,0,R.t6HB,R.t6l),new _(6,0,R.t7HB,R.t7l),new _(6,0,R.t8HB,R.t8l),new _(6,0,R.t9HB,R.t9l),new _(8,0,R.t10HB,R.t10l),new _(8,0,R.t11HB,R.t11l),new _(8,0,R.t12HB,R.t12l),new _(16,0,R.t13HB,R.t13l),new _(0,0,null,R.t16_5l),new _(16,0,R.t15HB,R.t15l),new _(1,1,R.t16HB,R.t16l),new _(2,3,R.t16HB,R.t16l),new _(3,7,R.t16HB,R.t16l),new _(4,15,R.t16HB,R.t16l),new _(6,63,R.t16HB,R.t16l),new _(8,255,R.t16HB,R.t16l),new _(10,1023,R.t16HB,R.t16l),new _(13,8191,R.t16HB,R.t16l),new _(4,15,R.t24HB,R.t24l),new _(5,31,R.t24HB,R.t24l),new _(6,63,R.t24HB,R.t24l),new _(7,127,R.t24HB,R.t24l),new _(8,255,R.t24HB,R.t24l),new _(9,511,R.t24HB,R.t24l),new _(11,2047,R.t24HB,R.t24l),new _(13,8191,R.t24HB,R.t24l),new _(0,0,R.t32HB,R.t32l),new _(0,0,R.t33HB,R.t33l)],R.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],R.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],R.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],R.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],R.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],R.scfsi_band=[0,6,11,16,21],te=R,te}var ne,Ke;function va(){if(Ke)return ne;Ke=1;var _=_a(),R=U0();R.System;var a0=R.VbrMode,U=R.Float;R.ShortBlock;var r0=R.Util;R.Arrays,R.new_array_n,R.new_byte,R.new_double;var z=R.new_float;R.new_float_n;var G=R.new_int;R.new_int_n;var J=R.assert,q=g0(),K=oa(),V=I1();T.Q_MAX=257,T.Q_MAX2=116,T.LARGE_BITS=1e5,T.IXMAX_VAL=8206;function T(){var L=null,$=null,g=null;this.setModules=function(H,y,s){L=H,$=y,g=s};function A(H){return J(0<=H+T.Q_MAX2&&H<T.Q_MAX),X[H+T.Q_MAX2]}this.IPOW20=function(H){return J(0<=H&&H<T.Q_MAX),k[H]};var E=2220446049250313e-31,b=T.IXMAX_VAL,O=b+2,t=T.Q_MAX,p=T.Q_MAX2;T.LARGE_BITS;var B=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var j=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=j,this.sfBandIndex=[new _([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var X=z(t+p+1),k=z(t),i0=z(O),v0=z(O);this.adj43=v0;function Q(H,y){var s=g.ATHformula(y,H);return s-=B,s=Math.pow(10,s/10+H.ATHlower),s}function c(H){for(var y=H.internal_flags.ATH.l,s=H.internal_flags.ATH.psfb21,m=H.internal_flags.ATH.s,I=H.internal_flags.ATH.psfb12,N=H.internal_flags,v=H.out_samplerate,e=0;e<q.SBMAX_l;e++){var r=N.scalefac_band.l[e],a=N.scalefac_band.l[e+1];y[e]=U.MAX_VALUE;for(var n=r;n<a;n++){var l=n*v/1152,d=Q(H,l);y[e]=Math.min(y[e],d)}}for(var e=0;e<q.PSFB21;e++){var r=N.scalefac_band.psfb21[e],a=N.scalefac_band.psfb21[e+1];s[e]=U.MAX_VALUE;for(var n=r;n<a;n++){var l=n*v/1152,d=Q(H,l);s[e]=Math.min(s[e],d)}}for(var e=0;e<q.SBMAX_s;e++){var r=N.scalefac_band.s[e],a=N.scalefac_band.s[e+1];m[e]=U.MAX_VALUE;for(var n=r;n<a;n++){var l=n*v/384,d=Q(H,l);m[e]=Math.min(m[e],d)}m[e]*=N.scalefac_band.s[e+1]-N.scalefac_band.s[e]}for(var e=0;e<q.PSFB12;e++){var r=N.scalefac_band.psfb12[e],a=N.scalefac_band.psfb12[e+1];I[e]=U.MAX_VALUE;for(var n=r;n<a;n++){var l=n*v/384,d=Q(H,l);I[e]=Math.min(I[e],d)}I[e]*=N.scalefac_band.s[13]-N.scalefac_band.s[12]}if(H.noATH){for(var e=0;e<q.SBMAX_l;e++)y[e]=1e-20;for(var e=0;e<q.PSFB21;e++)s[e]=1e-20;for(var e=0;e<q.SBMAX_s;e++)m[e]=1e-20;for(var e=0;e<q.PSFB12;e++)I[e]=1e-20}N.ATH.floor=10*Math.log10(Q(H,-1))}this.iteration_init=function(H){var y=H.internal_flags,s=y.l3_side,m;if(y.iteration_init_init==0){for(y.iteration_init_init=1,s.main_data_begin=0,c(H),i0[0]=0,m=1;m<O;m++)i0[m]=Math.pow(m,4/3);for(m=0;m<O-1;m++)v0[m]=m+1-Math.pow(.5*(i0[m]+i0[m+1]),.75);for(v0[m]=.5,m=0;m<t;m++)k[m]=Math.pow(2,(m-210)*-.1875);for(m=0;m<=t+p;m++)X[m]=Math.pow(2,(m-210-p)*.25);L.huffman_init(y);{var I,N,v,e;for(m=H.exp_nspsytune>>2&63,m>=32&&(m-=64),I=Math.pow(10,m/4/10),m=H.exp_nspsytune>>8&63,m>=32&&(m-=64),N=Math.pow(10,m/4/10),m=H.exp_nspsytune>>14&63,m>=32&&(m-=64),v=Math.pow(10,m/4/10),m=H.exp_nspsytune>>20&63,m>=32&&(m-=64),e=v*Math.pow(10,m/4/10),m=0;m<q.SBMAX_l;m++){var r;m<=6?r=I:m<=13?r=N:m<=20?r=v:r=e,y.nsPsy.longfact[m]=r}for(m=0;m<q.SBMAX_s;m++){var r;m<=5?r=I:m<=10?r=N:m<=11?r=v:r=e,y.nsPsy.shortfact[m]=r}}}},this.on_pe=function(H,y,s,m,I,N){var v=H.internal_flags,e=0,r,a=G(2),n,l=new K(e),d=$.ResvMaxBits(H,m,l,N);e=l.bits;var M=e+d;for(M>V.MAX_BITS_PER_GRANULE&&(M=V.MAX_BITS_PER_GRANULE),r=0,n=0;n<v.channels_out;++n)s[n]=Math.min(V.MAX_BITS_PER_CHANNEL,e/v.channels_out),a[n]=0|s[n]*y[I][n]/700-s[n],a[n]>m*3/4&&(a[n]=m*3/4),a[n]<0&&(a[n]=0),a[n]+s[n]>V.MAX_BITS_PER_CHANNEL&&(a[n]=Math.max(0,V.MAX_BITS_PER_CHANNEL-s[n])),r+=a[n];if(r>d)for(n=0;n<v.channels_out;++n)a[n]=d*a[n]/r;for(n=0;n<v.channels_out;++n)s[n]+=a[n],d-=a[n];for(r=0,n=0;n<v.channels_out;++n)r+=s[n];if(r>V.MAX_BITS_PER_GRANULE){var f=0;for(n=0;n<v.channels_out;++n)s[n]*=V.MAX_BITS_PER_GRANULE,s[n]/=r,f+=s[n];J(f<=V.MAX_BITS_PER_GRANULE)}return M},this.reduce_side=function(H,y,s,m){J(m<=V.MAX_BITS_PER_GRANULE),J(H[0]+H[1]<=V.MAX_BITS_PER_GRANULE);var I=.33*(.5-y)/.5;I<0&&(I=0),I>.5&&(I=.5);var N=0|I*.5*(H[0]+H[1]);N>V.MAX_BITS_PER_CHANNEL-H[0]&&(N=V.MAX_BITS_PER_CHANNEL-H[0]),N<0&&(N=0),H[1]>=125&&(H[1]-N>125?(H[0]<s&&(H[0]+=N),H[1]-=N):(H[0]+=H[1]-125,H[1]=125)),N=H[0]+H[1],N>m&&(H[0]=m*H[0]/N,H[1]=m*H[1]/N),J(H[0]<=V.MAX_BITS_PER_CHANNEL),J(H[1]<=V.MAX_BITS_PER_CHANNEL),J(H[0]+H[1]<=V.MAX_BITS_PER_GRANULE)},this.athAdjust=function(H,y,s){var m=90.30873362,I=94.82444863,N=r0.FAST_LOG10_X(y,10),v=H*H,e=0;return N-=s,v>1e-20&&(e=1+r0.FAST_LOG10_X(v,10/m)),e<0&&(e=0),N*=e,N+=s+m-I,Math.pow(10,.1*N)},this.calc_xmin=function(H,y,s,m){var I=0,N=H.internal_flags,v,e=0,r=0,a=N.ATH,n=s.xr,l=H.VBR==a0.vbr_mtrh?1:0,d=N.masking_lower;for((H.VBR==a0.vbr_mtrh||H.VBR==a0.vbr_mt)&&(d=1),v=0;v<s.psy_lmax;v++){var M,f,F,P,s0,h0;H.VBR==a0.vbr_rh||H.VBR==a0.vbr_mtrh?f=athAdjust(a.adjust,a.l[v],a.floor):f=a.adjust*a.l[v],s0=s.width[v],F=f/s0,P=E,h0=s0>>1,M=0;do{var u0,c0;u0=n[e]*n[e],M+=u0,P+=u0<F?u0:F,e++,c0=n[e]*n[e],M+=c0,P+=c0<F?c0:F,e++}while(--h0>0);if(M>f&&r++,v==q.SBPSY_l){var M0=f*N.nsPsy.longfact[v];P<M0&&(P=M0)}if(l!=0&&(f=P),!H.ATHonly){var N0=y.en.l[v];if(N0>0){var M0;M0=M*y.thm.l[v]*d/N0,l!=0&&(M0*=N.nsPsy.longfact[v]),f<M0&&(f=M0)}}l!=0?m[I++]=f:m[I++]=f*N.nsPsy.longfact[v]}var X0=575;if(s.block_type!=q.SHORT_TYPE)for(var i=576;i--!=0&&BitStream.EQ(n[i],0);)X0=i;s.max_nonzero_coeff=X0;for(var o=s.sfb_smin;v<s.psymax;o++,v+=3){var s0,d0,S0;for(H.VBR==a0.vbr_rh||H.VBR==a0.vbr_mtrh?S0=athAdjust(a.adjust,a.s[o],a.floor):S0=a.adjust*a.s[o],s0=s.width[v],d0=0;d0<3;d0++){var M=0,f,F,P,h0=s0>>1;F=S0/s0,P=E;do{var u0,c0;u0=n[e]*n[e],M+=u0,P+=u0<F?u0:F,e++,c0=n[e]*n[e],M+=c0,P+=c0<F?c0:F,e++}while(--h0>0);if(M>S0&&r++,o==q.SBPSY_s){var M0=S0*N.nsPsy.shortfact[o];P<M0&&(P=M0)}if(l!=0?f=P:f=S0,!H.ATHonly&&!H.ATHshort){var N0=y.en.s[o][d0];if(N0>0){var M0;M0=M*y.thm.s[o][d0]*d/N0,l!=0&&(M0*=N.nsPsy.shortfact[o]),f<M0&&(f=M0)}}l!=0?m[I++]=f:m[I++]=f*N.nsPsy.shortfact[o]}H.useTemporal&&(m[I-3]>m[I-3+1]&&(m[I-3+1]+=(m[I-3]-m[I-3+1])*N.decay),m[I-3+1]>m[I-3+2]&&(m[I-3+2]+=(m[I-3+1]-m[I-3+2])*N.decay))}return r};function T0(H){this.s=H}this.calc_noise_core=function(H,y,s,m){var I=0,N=y.s,v=H.l3_enc;if(N>H.count1)for(;s--!=0;){var e;e=H.xr[N],N++,I+=e*e,e=H.xr[N],N++,I+=e*e}else if(N>H.big_values){var r=z(2);for(r[0]=0,r[1]=m;s--!=0;){var e;e=Math.abs(H.xr[N])-r[v[N]],N++,I+=e*e,e=Math.abs(H.xr[N])-r[v[N]],N++,I+=e*e}}else for(;s--!=0;){var e;e=Math.abs(H.xr[N])-i0[v[N]]*m,N++,I+=e*e,e=Math.abs(H.xr[N])-i0[v[N]]*m,N++,I+=e*e}return y.s=N,I},this.calc_noise=function(H,y,s,m,I){var N=0,v=0,e,r,a=0,n=0,l=0,d=-20,M=0,f=H.scalefac,F=0;for(m.over_SSD=0,e=0;e<H.psymax;e++){var P=H.global_gain-(f[F++]+(H.preflag!=0?j[e]:0)<<H.scalefac_scale+1)-H.subblock_gain[H.window[e]]*8,s0=0;if(I!=null&&I.step[e]==P)s0=I.noise[e],M+=H.width[e],s[N++]=s0/y[v++],s0=I.noise_log[e];else{var h0=A(P);if(r=H.width[e]>>1,M+H.width[e]>H.max_nonzero_coeff){var u0;u0=H.max_nonzero_coeff-M+1,u0>0?r=u0>>1:r=0}var c0=new T0(M);s0=this.calc_noise_core(H,c0,r,h0),M=c0.s,I!=null&&(I.step[e]=P,I.noise[e]=s0),s0=s[N++]=s0/y[v++],s0=r0.FAST_LOG10(Math.max(s0,1e-20)),I!=null&&(I.noise_log[e]=s0)}if(I!=null&&(I.global_gain=H.global_gain),l+=s0,s0>0){var M0;M0=Math.max(0|s0*10+.5,1),m.over_SSD+=M0*M0,a++,n+=s0}d=Math.max(d,s0)}return m.over_count=a,m.tot_noise=l,m.over_noise=n,m.max_noise=d,a},this.set_pinfo=function(H,y,s,m,I){var N=H.internal_flags,v,e,r,a,n,l=y.scalefac_scale==0?.5:1,d=y.scalefac,M=z(L3Side.SFBMAX),f=z(L3Side.SFBMAX),F=new CalcNoiseResult;calc_xmin(H,s,y,M),calc_noise(y,M,f,F,null);var P=0;for(e=y.sfb_lmax,y.block_type!=q.SHORT_TYPE&&y.mixed_block_flag==0&&(e=22),v=0;v<e;v++){var s0=N.scalefac_band.l[v],h0=N.scalefac_band.l[v+1],u0=h0-s0;for(a=0;P<h0;P++)a+=y.xr[P]*y.xr[P];a/=u0,n=1e15,N.pinfo.en[m][I][v]=n*a,N.pinfo.xfsf[m][I][v]=n*M[v]*f[v]/u0,s.en.l[v]>0&&!H.ATHonly?a=a/s.en.l[v]:a=0,N.pinfo.thr[m][I][v]=n*Math.max(a*s.thm.l[v],N.ATH.l[v]),N.pinfo.LAMEsfb[m][I][v]=0,y.preflag!=0&&v>=11&&(N.pinfo.LAMEsfb[m][I][v]=-l*j[v]),v<q.SBPSY_l&&(J(d[v]>=0),N.pinfo.LAMEsfb[m][I][v]-=l*d[v])}if(y.block_type==q.SHORT_TYPE)for(e=v,v=y.sfb_smin;v<q.SBMAX_s;v++)for(var s0=N.scalefac_band.s[v],h0=N.scalefac_band.s[v+1],u0=h0-s0,c0=0;c0<3;c0++){for(a=0,r=s0;r<h0;r++)a+=y.xr[P]*y.xr[P],P++;a=Math.max(a/u0,1e-20),n=1e15,N.pinfo.en_s[m][I][3*v+c0]=n*a,N.pinfo.xfsf_s[m][I][3*v+c0]=n*M[e]*f[e]/u0,s.en.s[v][c0]>0?a=a/s.en.s[v][c0]:a=0,(H.ATHonly||H.ATHshort)&&(a=0),N.pinfo.thr_s[m][I][3*v+c0]=n*Math.max(a*s.thm.s[v][c0],N.ATH.s[v]),N.pinfo.LAMEsfb_s[m][I][3*v+c0]=-2*y.subblock_gain[c0],v<q.SBPSY_s&&(N.pinfo.LAMEsfb_s[m][I][3*v+c0]-=l*d[e]),e++}N.pinfo.LAMEqss[m][I]=y.global_gain,N.pinfo.LAMEmainbits[m][I]=y.part2_3_length+y.part2_length,N.pinfo.LAMEsfbits[m][I]=y.part2_length,N.pinfo.over[m][I]=F.over_count,N.pinfo.max_noise[m][I]=F.max_noise*10,N.pinfo.over_noise[m][I]=F.over_noise*10,N.pinfo.tot_noise[m][I]=F.tot_noise*10,N.pinfo.over_SSD[m][I]=F.over_SSD}}return ne=T,ne}var ie,Qe;function ua(){if(Qe)return ie;Qe=1;var _=U0(),R=_.System;_.VbrMode,_.Float,_.ShortBlock,_.Util;var a0=_.Arrays;_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n;var U=_.new_int;_.new_int_n;var r0=_.assert,z=g0(),G=de(),J=ce(),q=va();function K(){var V=null;this.qupvt=null,this.setModules=function(v){this.qupvt=v,V=v};function T(v){this.bits=0|v}var L=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function $(v,e,r,a,n,l){var d=.5946/e;for(r0(v>0),v=v>>1;v--!=0;)n[l++]=d>r[a++]?0:1,n[l++]=d>r[a++]?0:1}function g(v,e,r,a,n,l){r0(v>0),v=v>>1;var d=v%2;for(v=v>>1;v--!=0;){var M,f,F,P,s0,h0,u0,c0;M=r[a++]*e,f=r[a++]*e,s0=0|M,F=r[a++]*e,h0=0|f,P=r[a++]*e,u0=0|F,M+=V.adj43[s0],c0=0|P,f+=V.adj43[h0],n[l++]=0|M,F+=V.adj43[u0],n[l++]=0|f,P+=V.adj43[c0],n[l++]=0|F,n[l++]=0|P}if(d!=0){var M,f,s0,h0;M=r[a++]*e,f=r[a++]*e,s0=0|M,h0=0|f,M+=V.adj43[s0],f+=V.adj43[h0],n[l++]=0|M,n[l++]=0|f}}function A(v,e,r,a,n){var l,d,M=0,f,F=0,P=0,s0=0,h0=e,u0=0,c0=h0,M0=0,N0=v,X0=0;for(f=n!=null&&a.global_gain==n.global_gain,a.block_type==z.SHORT_TYPE?d=38:d=21,l=0;l<=d;l++){var i=-1;if((f||a.block_type==z.NORM_TYPE)&&(i=a.global_gain-(a.scalefac[l]+(a.preflag!=0?V.pretab[l]:0)<<a.scalefac_scale+1)-a.subblock_gain[a.window[l]]*8),r0(a.width[l]>=0),f&&n.step[l]==i)F!=0&&(g(F,r,N0,X0,c0,M0),F=0),P!=0&&($(P,r,N0,X0,c0,M0),P=0);else{var o=a.width[l];if(M+a.width[l]>a.max_nonzero_coeff){var d0;d0=a.max_nonzero_coeff-M+1,a0.fill(e,a.max_nonzero_coeff,576,0),o=d0,o<0&&(o=0),l=d+1}if(F==0&&P==0&&(c0=h0,M0=u0,N0=v,X0=s0),n!=null&&n.sfb_count1>0&&l>=n.sfb_count1&&n.step[l]>0&&i>=n.step[l]?(F!=0&&(g(F,r,N0,X0,c0,M0),F=0,c0=h0,M0=u0,N0=v,X0=s0),P+=o):(P!=0&&($(P,r,N0,X0,c0,M0),P=0,c0=h0,M0=u0,N0=v,X0=s0),F+=o),o<=0){P!=0&&($(P,r,N0,X0,c0,M0),P=0),F!=0&&(g(F,r,N0,X0,c0,M0),F=0);break}}l<=d&&(u0+=a.width[l],s0+=a.width[l],M+=a.width[l])}F!=0&&(g(F,r,N0,X0,c0,M0),F=0),P!=0&&($(P,r,N0,X0,c0,M0),P=0)}function E(v,e,r){var a=0,n=0;do{var l=v[e++],d=v[e++];a<l&&(a=l),n<d&&(n=d)}while(e<r);return a<n&&(a=n),a}function b(v,e,r,a,n,l){var d=G.ht[a].xlen*65536+G.ht[n].xlen,M=0,f;do{var F=v[e++],P=v[e++];F!=0&&(F>14&&(F=15,M+=d),F*=16),P!=0&&(P>14&&(P=15,M+=d),F+=P),M+=G.largetbl[F]}while(e<r);return f=M&65535,M>>=16,M>f&&(M=f,a=n),l.bits+=M,a}function O(v,e,r,a){var n=0,l=G.ht[1].hlen;do{var d=v[e+0]*2+v[e+1];e+=2,n+=l[d]}while(e<r);return a.bits+=n,1}function t(v,e,r,a,n){var l=0,d,M=G.ht[a].xlen,f;a==2?f=G.table23:f=G.table56;do{var F=v[e+0]*M+v[e+1];e+=2,l+=f[F]}while(e<r);return d=l&65535,l>>=16,l>d&&(l=d,a++),n.bits+=l,a}function p(v,e,r,a,n){var l=0,d=0,M=0,f=G.ht[a].xlen,F=G.ht[a].hlen,P=G.ht[a+1].hlen,s0=G.ht[a+2].hlen;do{var h0=v[e+0]*f+v[e+1];e+=2,l+=F[h0],d+=P[h0],M+=s0[h0]}while(e<r);var u0=a;return l>d&&(l=d,u0++),l>M&&(l=M,u0=a+2),n.bits+=l,u0}var B=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function j(v,e,r,a){var n=E(v,e,r);switch(n){case 0:return n;case 1:return O(v,e,r,a);case 2:case 3:return t(v,e,r,B[n-1],a);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return p(v,e,r,B[n-1],a);default:if(n>q.IXMAX_VAL)return a.bits=q.LARGE_BITS,-1;n-=15;var l;for(l=24;l<32&&!(G.ht[l].linmax>=n);l++);var d;for(d=l-8;d<24&&!(G.ht[d].linmax>=n);d++);return b(v,e,r,d,l,a)}}this.noquant_count_bits=function(v,e,r){var a=e.l3_enc,n=Math.min(576,e.max_nonzero_coeff+2>>1<<1);for(r!=null&&(r.sfb_count1=0);n>1&&(a[n-1]|a[n-2])==0;n-=2);e.count1=n;for(var l=0,d=0;n>3;n-=4){var M;if(((a[n-1]|a[n-2]|a[n-3]|a[n-4])&2147483647)>1)break;M=((a[n-4]*2+a[n-3])*2+a[n-2])*2+a[n-1],l+=G.t32l[M],d+=G.t33l[M]}var f=l;if(e.count1table_select=0,l>d&&(f=d,e.count1table_select=1),e.count1bits=f,e.big_values=n,n==0)return f;if(e.block_type==z.SHORT_TYPE)l=3*v.scalefac_band.s[3],l>e.big_values&&(l=e.big_values),d=e.big_values;else if(e.block_type==z.NORM_TYPE){if(r0(n<=576),l=e.region0_count=v.bv_scf[n-2],d=e.region1_count=v.bv_scf[n-1],r0(l+d+2<z.SBPSY_l),d=v.scalefac_band.l[l+d+2],l=v.scalefac_band.l[l+1],d<n){var F=new T(f);e.table_select[2]=j(a,d,n,F),f=F.bits}}else e.region0_count=7,e.region1_count=z.SBMAX_l-1-7-1,l=v.scalefac_band.l[8],d=n,l>d&&(l=d);if(l=Math.min(l,n),d=Math.min(d,n),r0(l>=0),r0(d>=0),0<l){var F=new T(f);e.table_select[0]=j(a,0,l,F),f=F.bits}if(l<d){var F=new T(f);e.table_select[1]=j(a,l,d,F),f=F.bits}if(v.use_best_huffman==2&&(e.part2_3_length=f,best_huffman_divide(v,e),f=e.part2_3_length),r!=null&&e.block_type==z.NORM_TYPE){for(var P=0;v.scalefac_band.l[P]<e.big_values;)P++;r.sfb_count1=P}return f},this.count_bits=function(v,e,r,a){var n=r.l3_enc,l=q.IXMAX_VAL/V.IPOW20(r.global_gain);if(r.xrpow_max>l)return q.LARGE_BITS;if(A(e,n,V.IPOW20(r.global_gain),r,a),(v.substep_shaping&2)!=0)for(var d=0,M=r.global_gain+r.scalefac_scale,f=.634521682242439/V.IPOW20(M),F=0;F<r.sfbmax;F++){var P=r.width[F];if(r0(P>=0),v.pseudohalf[F]==0)d+=P;else{var s0;for(s0=d,d+=P;s0<d;++s0)n[s0]=e[s0]>=f?n[s0]:0}}return this.noquant_count_bits(v,r,a)};function X(v,e,r,a,n,l,d){for(var M=e.big_values,f=0;f<=22;f++)a[f]=q.LARGE_BITS;for(var f=0;f<16;f++){var F=v.scalefac_band.l[f+1];if(F>=M)break;var P=0,s0=new T(P),h0=j(r,0,F,s0);P=s0.bits;for(var u0=0;u0<8;u0++){var c0=v.scalefac_band.l[f+u0+2];if(c0>=M)break;var M0=P;s0=new T(M0);var N0=j(r,F,c0,s0);M0=s0.bits,a[f+u0]>M0&&(a[f+u0]=M0,n[f+u0]=f,l[f+u0]=h0,d[f+u0]=N0)}}}function k(v,e,r,a,n,l,d,M){for(var f=e.big_values,F=2;F<z.SBMAX_l+1;F++){var P=v.scalefac_band.l[F];if(P>=f)break;var s0=n[F-2]+e.count1bits;if(r.part2_3_length<=s0)break;var h0=new T(s0),u0=j(a,P,f,h0);s0=h0.bits,!(r.part2_3_length<=s0)&&(r.assign(e),r.part2_3_length=s0,r.region0_count=l[F-2],r.region1_count=F-2-l[F-2],r.table_select[0]=d[F-2],r.table_select[1]=M[F-2],r.table_select[2]=u0)}}this.best_huffman_divide=function(v,e){var r=new J,a=e.l3_enc,n=U(23),l=U(23),d=U(23),M=U(23);if(!(e.block_type==z.SHORT_TYPE&&v.mode_gr==1)){r.assign(e),e.block_type==z.NORM_TYPE&&(X(v,e,a,n,l,d,M),k(v,r,e,a,n,l,d,M));var f=r.big_values;if(!(f==0||(a[f-2]|a[f-1])>1)&&(f=e.count1+2,!(f>576))){r.assign(e),r.count1=f;var F=0,P=0;for(r0(f<=576);f>r.big_values;f-=4){var s0=((a[f-4]*2+a[f-3])*2+a[f-2])*2+a[f-1];F+=G.t32l[s0],P+=G.t33l[s0]}if(r.big_values=f,r.count1table_select=0,F>P&&(F=P,r.count1table_select=1),r.count1bits=F,r.block_type==z.NORM_TYPE)k(v,r,e,a,n,l,d,M);else{if(r.part2_3_length=F,F=v.scalefac_band.l[8],F>f&&(F=f),F>0){var h0=new T(r.part2_3_length);r.table_select[0]=j(a,0,F,h0),r.part2_3_length=h0.bits}if(f>F){var h0=new T(r.part2_3_length);r.table_select[1]=j(a,F,f,h0),r.part2_3_length=h0.bits}e.part2_3_length>r.part2_3_length&&e.assign(r)}}}};var i0=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],v0=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],Q=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],c=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];K.slen1_tab=Q,K.slen2_tab=c;function T0(v,e){for(var r,a=e.tt[1][v],n=e.tt[0][v],l=0;l<G.scfsi_band.length-1;l++){for(r=G.scfsi_band[l];r<G.scfsi_band[l+1]&&!(n.scalefac[r]!=a.scalefac[r]&&a.scalefac[r]>=0);r++);if(r==G.scfsi_band[l+1]){for(r=G.scfsi_band[l];r<G.scfsi_band[l+1];r++)a.scalefac[r]=-1;e.scfsi[v][l]=1}}var d=0,M=0;for(r=0;r<11;r++)a.scalefac[r]!=-1&&(M++,d<a.scalefac[r]&&(d=a.scalefac[r]));for(var f=0,F=0;r<z.SBPSY_l;r++)a.scalefac[r]!=-1&&(F++,f<a.scalefac[r]&&(f=a.scalefac[r]));for(var l=0;l<16;l++)if(d<i0[l]&&f<v0[l]){var P=Q[l]*M+c[l]*F;a.part2_length>P&&(a.part2_length=P,a.scalefac_compress=l)}}this.best_scalefac_store=function(v,e,r,a){var n=a.tt[e][r],l,d,M,f,F=0;for(M=0,l=0;l<n.sfbmax;l++){var P=n.width[l];for(r0(P>=0),M+=P,f=-P;f<0&&n.l3_enc[f+M]==0;f++);f==0&&(n.scalefac[l]=F=-2)}if(n.scalefac_scale==0&&n.preflag==0){var s0=0;for(l=0;l<n.sfbmax;l++)n.scalefac[l]>0&&(s0|=n.scalefac[l]);if((s0&1)==0&&s0!=0){for(l=0;l<n.sfbmax;l++)n.scalefac[l]>0&&(n.scalefac[l]>>=1);n.scalefac_scale=F=1}}if(n.preflag==0&&n.block_type!=z.SHORT_TYPE&&v.mode_gr==2){for(l=11;l<z.SBPSY_l&&!(n.scalefac[l]<V.pretab[l]&&n.scalefac[l]!=-2);l++);if(l==z.SBPSY_l){for(l=11;l<z.SBPSY_l;l++)n.scalefac[l]>0&&(n.scalefac[l]-=V.pretab[l]);n.preflag=F=1}}for(d=0;d<4;d++)a.scfsi[r][d]=0;for(v.mode_gr==2&&e==1&&a.tt[0][r].block_type!=z.SHORT_TYPE&&a.tt[1][r].block_type!=z.SHORT_TYPE&&(T0(r,a),F=0),l=0;l<n.sfbmax;l++)n.scalefac[l]==-2&&(n.scalefac[l]=0);F!=0&&(v.mode_gr==2?this.scale_bitcount(n):this.scale_bitcount_lsf(v,n))};function H(v,e){for(var r=0;r<e;++r)if(v[r]<0)return!1;return!0}var y=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],s=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],m=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(v){var e,r,a=0,n=0,l,d=v.scalefac;if(r0(H(d,v.sfbmax)),v.block_type==z.SHORT_TYPE)l=y,v.mixed_block_flag!=0&&(l=s);else if(l=m,v.preflag==0){for(r=11;r<z.SBPSY_l&&!(d[r]<V.pretab[r]);r++);if(r==z.SBPSY_l)for(v.preflag=1,r=11;r<z.SBPSY_l;r++)d[r]-=V.pretab[r]}for(r=0;r<v.sfbdivide;r++)a<d[r]&&(a=d[r]);for(;r<v.sfbmax;r++)n<d[r]&&(n=d[r]);for(v.part2_length=q.LARGE_BITS,e=0;e<16;e++)a<i0[e]&&n<v0[e]&&v.part2_length>l[e]&&(v.part2_length=l[e],v.scalefac_compress=e);return v.part2_length==q.LARGE_BITS};var I=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(v,e){var r,a,n,l,d,M,f,F,P=U(4),s0=e.scalefac;for(e.preflag!=0?r=2:r=0,f=0;f<4;f++)P[f]=0;if(e.block_type==z.SHORT_TYPE){a=1;var h0=V.nr_of_sfb_block[r][a];for(F=0,n=0;n<4;n++)for(l=h0[n]/3,f=0;f<l;f++,F++)for(d=0;d<3;d++)s0[F*3+d]>P[n]&&(P[n]=s0[F*3+d])}else{a=0;var h0=V.nr_of_sfb_block[r][a];for(F=0,n=0;n<4;n++)for(l=h0[n],f=0;f<l;f++,F++)s0[F]>P[n]&&(P[n]=s0[F])}for(M=!1,n=0;n<4;n++)P[n]>I[r][n]&&(M=!0);if(!M){var u0,c0,M0,N0;for(e.sfb_partition_table=V.nr_of_sfb_block[r][a],n=0;n<4;n++)e.slen[n]=N[P[n]];switch(u0=e.slen[0],c0=e.slen[1],M0=e.slen[2],N0=e.slen[3],r){case 0:e.scalefac_compress=(u0*5+c0<<4)+(M0<<2)+N0;break;case 1:e.scalefac_compress=400+(u0*5+c0<<2)+M0;break;case 2:e.scalefac_compress=500+u0*3+c0;break;default:R.err.printf(`intensity stereo not implemented yet
`);break}}if(!M)for(r0(e.sfb_partition_table!=null),e.part2_length=0,n=0;n<4;n++)e.part2_length+=e.slen[n]*e.sfb_partition_table[n];return M};var N=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(v){for(var e=2;e<=576;e+=2){for(var r=0,a;v.scalefac_band.l[++r]<e;);for(a=L[r][0];v.scalefac_band.l[a+1]>e;)a--;for(a<0&&(a=L[r][0]),v.bv_scf[e-2]=a,a=L[r][1];v.scalefac_band.l[a+v.bv_scf[e-2]+2]>e;)a--;a<0&&(a=L[r][1]),v.bv_scf[e-1]=a}}}return ie=K,ie}var se,We;function ha(){if(We)return se;We=1;var _=U0(),R=_.System;_.VbrMode,_.Float,_.ShortBlock,_.Util;var a0=_.Arrays;_.new_array_n;var U=_.new_byte;_.new_double,_.new_float;var r0=_.new_float_n,z=_.new_int;_.new_int_n;var G=_.assert,J=ua(),q=de(),K=g0(),V=I1();T.EQ=function(L,$){return Math.abs(L)>Math.abs($)?Math.abs(L-$)<=Math.abs(L)*1e-6:Math.abs(L-$)<=Math.abs($)*1e-6},T.NEQ=function(L,$){return!T.EQ(L,$)};function T(){var L=this,$=32773,g=32,A=null,E=null,b=null,O=null;this.setModules=function(e,r,a,n){A=e,E=r,b=a,O=n};var t=null,p=0,B=0,j=0;this.getframebits=function(e){var r=e.internal_flags,a;r.bitrate_index!=0?a=q.bitrate_table[e.version][r.bitrate_index]:a=e.brate,G(8<=a&&a<=640);var n=0|(e.version+1)*72e3*a/e.out_samplerate+r.padding;return 8*n};function X(e){R.arraycopy(e.header[e.w_ptr].buf,0,t,B,e.sideinfo_len),B+=e.sideinfo_len,p+=e.sideinfo_len*8,e.w_ptr=e.w_ptr+1&V.MAX_HEADER_BUF-1}function k(e,r,a){for(G(a<g-2);a>0;){var n;j==0&&(j=8,B++,G(B<Lame.LAME_MAXMP3BUFFER),G(e.header[e.w_ptr].write_timing>=p),e.header[e.w_ptr].write_timing==p&&X(e),t[B]=0),n=Math.min(a,j),a-=n,j-=n,G(a<g),G(j<g),t[B]|=r>>a<<j,p+=n}}function i0(e,r,a){for(G(a<g-2);a>0;){var n;j==0&&(j=8,B++,G(B<Lame.LAME_MAXMP3BUFFER),t[B]=0),n=Math.min(a,j),a-=n,j-=n,G(a<g),G(j<g),t[B]|=r>>a<<j,p+=n}}function v0(e,r){var a=e.internal_flags,n;if(G(r>=0),r>=8&&(k(a,76,8),r-=8),r>=8&&(k(a,65,8),r-=8),r>=8&&(k(a,77,8),r-=8),r>=8&&(k(a,69,8),r-=8),r>=32){var l=b.getLameShortVersion();if(r>=32)for(n=0;n<l.length&&r>=8;++n)r-=8,k(a,l.charAt(n),8)}for(;r>=1;r-=1)k(a,a.ancillary_flag,1),a.ancillary_flag^=e.disable_reservoir?0:1;G(r==0)}function Q(e,r,a){for(var n=e.header[e.h_ptr].ptr;a>0;){var l=Math.min(a,8-(n&7));a-=l,G(a<g),e.header[e.h_ptr].buf[n>>3]|=r>>a<<8-(n&7)-l,n+=l}e.header[e.h_ptr].ptr=n}function c(e,r){e<<=8;for(var a=0;a<8;a++)e<<=1,r<<=1,((r^e)&65536)!=0&&(r^=$);return r}this.CRC_writeheader=function(e,r){var a=65535;a=c(r[2]&255,a),a=c(r[3]&255,a);for(var n=6;n<e.sideinfo_len;n++)a=c(r[n]&255,a);r[4]=byte(a>>8),r[5]=byte(a&255)};function T0(e,r){var a=e.internal_flags,n,l,d;if(n=a.l3_side,a.header[a.h_ptr].ptr=0,a0.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),e.out_samplerate<16e3?Q(a,4094,12):Q(a,4095,12),Q(a,e.version,1),Q(a,1,2),Q(a,e.error_protection?0:1,1),Q(a,a.bitrate_index,4),Q(a,a.samplerate_index,2),Q(a,a.padding,1),Q(a,e.extension,1),Q(a,e.mode.ordinal(),2),Q(a,a.mode_ext,2),Q(a,e.copyright,1),Q(a,e.original,1),Q(a,e.emphasis,2),e.error_protection&&Q(a,0,16),e.version==1){for(G(n.main_data_begin>=0),Q(a,n.main_data_begin,9),a.channels_out==2?Q(a,n.private_bits,3):Q(a,n.private_bits,5),d=0;d<a.channels_out;d++){var M;for(M=0;M<4;M++)Q(a,n.scfsi[d][M],1)}for(l=0;l<2;l++)for(d=0;d<a.channels_out;d++){var f=n.tt[l][d];Q(a,f.part2_3_length+f.part2_length,12),Q(a,f.big_values/2,9),Q(a,f.global_gain,8),Q(a,f.scalefac_compress,4),f.block_type!=K.NORM_TYPE?(Q(a,1,1),Q(a,f.block_type,2),Q(a,f.mixed_block_flag,1),f.table_select[0]==14&&(f.table_select[0]=16),Q(a,f.table_select[0],5),f.table_select[1]==14&&(f.table_select[1]=16),Q(a,f.table_select[1],5),Q(a,f.subblock_gain[0],3),Q(a,f.subblock_gain[1],3),Q(a,f.subblock_gain[2],3)):(Q(a,0,1),f.table_select[0]==14&&(f.table_select[0]=16),Q(a,f.table_select[0],5),f.table_select[1]==14&&(f.table_select[1]=16),Q(a,f.table_select[1],5),f.table_select[2]==14&&(f.table_select[2]=16),Q(a,f.table_select[2],5),G(0<=f.region0_count&&f.region0_count<16),G(0<=f.region1_count&&f.region1_count<8),Q(a,f.region0_count,4),Q(a,f.region1_count,3)),Q(a,f.preflag,1),Q(a,f.scalefac_scale,1),Q(a,f.count1table_select,1)}}else for(G(n.main_data_begin>=0),Q(a,n.main_data_begin,8),Q(a,n.private_bits,a.channels_out),l=0,d=0;d<a.channels_out;d++){var f=n.tt[l][d];Q(a,f.part2_3_length+f.part2_length,12),Q(a,f.big_values/2,9),Q(a,f.global_gain,8),Q(a,f.scalefac_compress,9),f.block_type!=K.NORM_TYPE?(Q(a,1,1),Q(a,f.block_type,2),Q(a,f.mixed_block_flag,1),f.table_select[0]==14&&(f.table_select[0]=16),Q(a,f.table_select[0],5),f.table_select[1]==14&&(f.table_select[1]=16),Q(a,f.table_select[1],5),Q(a,f.subblock_gain[0],3),Q(a,f.subblock_gain[1],3),Q(a,f.subblock_gain[2],3)):(Q(a,0,1),f.table_select[0]==14&&(f.table_select[0]=16),Q(a,f.table_select[0],5),f.table_select[1]==14&&(f.table_select[1]=16),Q(a,f.table_select[1],5),f.table_select[2]==14&&(f.table_select[2]=16),Q(a,f.table_select[2],5),G(0<=f.region0_count&&f.region0_count<16),G(0<=f.region1_count&&f.region1_count<8),Q(a,f.region0_count,4),Q(a,f.region1_count,3)),Q(a,f.scalefac_scale,1),Q(a,f.count1table_select,1)}e.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);{var F=a.h_ptr;G(a.header[F].ptr==a.sideinfo_len*8),a.h_ptr=F+1&V.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[F].write_timing+r,a.h_ptr==a.w_ptr&&R.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function H(e,r){var a=q.ht[r.count1table_select+32],n,l=0,d=r.big_values,M=r.big_values;for(G(r.count1table_select<2),n=(r.count1-r.big_values)/4;n>0;--n){var f=0,F=0,P;P=r.l3_enc[d+0],P!=0&&(F+=8,r.xr[M+0]<0&&f++,G(P<=1)),P=r.l3_enc[d+1],P!=0&&(F+=4,f*=2,r.xr[M+1]<0&&f++,G(P<=1)),P=r.l3_enc[d+2],P!=0&&(F+=2,f*=2,r.xr[M+2]<0&&f++,G(P<=1)),P=r.l3_enc[d+3],P!=0&&(F++,f*=2,r.xr[M+3]<0&&f++,G(P<=1)),d+=4,M+=4,k(e,f+a.table[F],a.hlen[F]),l+=a.hlen[F]}return l}function y(e,r,a,n,l){var d=q.ht[r],M=0;if(G(r<32),r==0)return M;for(var f=a;f<n;f+=2){var F=0,P=0,s0=d.xlen,h0=d.xlen,u0=0,c0=l.l3_enc[f],M0=l.l3_enc[f+1];if(c0!=0&&(l.xr[f]<0&&u0++,F--),r>15){if(c0>14){var N0=c0-15;G(N0<=d.linmax),u0|=N0<<1,P=s0,c0=15}if(M0>14){var X0=M0-15;G(X0<=d.linmax),u0<<=s0,u0|=X0,P+=s0,M0=15}h0=16}M0!=0&&(u0<<=1,l.xr[f+1]<0&&u0++,F--),G((c0|M0)<16),c0=c0*h0+M0,P-=F,F+=d.hlen[c0],G(F<=g),G(P<=g),k(e,d.table[c0],F),k(e,u0,P),M+=F+P}return M}function s(e,r){var a=3*e.scalefac_band.s[3];a>r.big_values&&(a=r.big_values);var n=y(e,r.table_select[0],0,a,r);return n+=y(e,r.table_select[1],a,r.big_values,r),n}function m(e,r){var a,n,l,d;a=r.big_values,G(0<=a&&a<=576);var M=r.region0_count+1;return G(0<=M),G(M<e.scalefac_band.l.length),l=e.scalefac_band.l[M],M+=r.region1_count+1,G(0<=M),G(M<e.scalefac_band.l.length),d=e.scalefac_band.l[M],l>a&&(l=a),d>a&&(d=a),n=y(e,r.table_select[0],0,l,r),n+=y(e,r.table_select[1],l,d,r),n+=y(e,r.table_select[2],d,a,r),n}function I(e){var r,a,n,l,d=0,M=e.internal_flags,f=M.l3_side;if(e.version==1)for(r=0;r<2;r++)for(a=0;a<M.channels_out;a++){var F=f.tt[r][a],P=J.slen1_tab[F.scalefac_compress],s0=J.slen2_tab[F.scalefac_compress];for(l=0,n=0;n<F.sfbdivide;n++)F.scalefac[n]!=-1&&(k(M,F.scalefac[n],P),l+=P);for(;n<F.sfbmax;n++)F.scalefac[n]!=-1&&(k(M,F.scalefac[n],s0),l+=s0);G(l==F.part2_length),F.block_type==K.SHORT_TYPE?l+=s(M,F):l+=m(M,F),l+=H(M,F),G(l==F.part2_3_length+F.part2_length),d+=l}else for(r=0,a=0;a<M.channels_out;a++){var F=f.tt[r][a],h0,u0,c0=0;if(G(F.sfb_partition_table!=null),l=0,n=0,u0=0,F.block_type==K.SHORT_TYPE){for(;u0<4;u0++){var M0=F.sfb_partition_table[u0]/3,N0=F.slen[u0];for(h0=0;h0<M0;h0++,n++)k(M,Math.max(F.scalefac[n*3+0],0),N0),k(M,Math.max(F.scalefac[n*3+1],0),N0),k(M,Math.max(F.scalefac[n*3+2],0),N0),c0+=3*N0}l+=s(M,F)}else{for(;u0<4;u0++){var M0=F.sfb_partition_table[u0],N0=F.slen[u0];for(h0=0;h0<M0;h0++,n++)k(M,Math.max(F.scalefac[n],0),N0),c0+=N0}l+=m(M,F)}l+=H(M,F),G(l==F.part2_3_length),G(c0==F.part2_length),d+=c0+l}return d}function N(){this.total=0}function v(e,r){var a=e.internal_flags,n,l,d,M,f;return f=a.w_ptr,M=a.h_ptr-1,M==-1&&(M=V.MAX_HEADER_BUF-1),n=a.header[M].write_timing-p,r.total=n,n>=0&&(l=1+M-f,M<f&&(l=1+M-f+V.MAX_HEADER_BUF),n-=l*8*a.sideinfo_len),d=L.getframebits(e),n+=d,r.total+=d,r.total%8!=0?r.total=1+r.total/8:r.total=r.total/8,r.total+=B+1,n<0&&R.err.println(`strange error flushing buffer ... 
`),n}this.flush_bitstream=function(e){var r=e.internal_flags,a,n,l=r.h_ptr-1;if(l==-1&&(l=V.MAX_HEADER_BUF-1),a=r.l3_side,!((n=v(e,new N))<0)){if(v0(e,n),G(r.header[l].write_timing+this.getframebits(e)==p),r.ResvSize=0,a.main_data_begin=0,r.findReplayGain){var d=A.GetTitleGain(r.rgdata);G(NEQ(d,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),r.RadioGain=Math.floor(d*10+.5)|0}r.findPeakSample&&(r.noclipGainChange=Math.ceil(Math.log10(r.PeakSample/32767)*20*10)|0,r.noclipGainChange>0&&(EQ(e.scale,1)||EQ(e.scale,0))?r.noclipScale=Math.floor(32767/r.PeakSample*100)/100:r.noclipScale=-1)}},this.add_dummy_byte=function(e,r,a){for(var n=e.internal_flags,l;a-- >0;)for(i0(n,r,8),l=0;l<V.MAX_HEADER_BUF;++l)n.header[l].write_timing+=8},this.format_bitstream=function(e){var r=e.internal_flags,a;a=r.l3_side;var n=this.getframebits(e);v0(e,a.resvDrain_pre),T0(e,n);var l=8*r.sideinfo_len;if(l+=I(e),v0(e,a.resvDrain_post),l+=a.resvDrain_post,a.main_data_begin+=(n-l)/8,v(e,new N)!=r.ResvSize&&R.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),a.main_data_begin*8!=r.ResvSize&&(R.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*a.main_data_begin,r.ResvSize,a.resvDrain_post,a.resvDrain_pre,8*r.sideinfo_len,l-a.resvDrain_post-8*r.sideinfo_len,l,l%8,n),R.err.println("This is a fatal error.  It has several possible causes:"),R.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),R.err.println(" 9%%  Your system is overclocked"),R.err.println(" 1%%  bug in LAME encoding library"),r.ResvSize=a.main_data_begin*8),G(p%8==0),p>1e9){var d;for(d=0;d<V.MAX_HEADER_BUF;++d)r.header[d].write_timing-=p;p=0}return 0},this.copy_buffer=function(e,r,a,n,l){var d=B+1;if(d<=0)return 0;if(n!=0&&d>n)return-1;if(R.arraycopy(t,0,r,a,d),B=-1,j=0,l!=0){var M=z(1);if(M[0]=e.nMusicCRC,O.updateMusicCRC(M,r,a,d),e.nMusicCRC=M[0],d>0&&(e.VBR_seek_table.nBytesWritten+=d),e.decode_on_the_fly){for(var f=r0([2,1152]),F=d,P=-1,s0;P!=0;)if(P=E.hip_decode1_unclipped(e.hip,r,a,F,f[0],f[1]),F=0,P==-1&&(P=0),P>0){if(G(P<=1152),e.findPeakSample){for(s0=0;s0<P;s0++)f[0][s0]>e.PeakSample?e.PeakSample=f[0][s0]:-f[0][s0]>e.PeakSample&&(e.PeakSample=-f[0][s0]);if(e.channels_out>1)for(s0=0;s0<P;s0++)f[1][s0]>e.PeakSample?e.PeakSample=f[1][s0]:-f[1][s0]>e.PeakSample&&(e.PeakSample=-f[1][s0])}if(e.findReplayGain&&A.AnalyzeSamples(e.rgdata,f[0],0,f[1],0,P,e.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return d},this.init_bit_stream_w=function(e){t=U(Lame.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,B=-1,j=0,p=0}}return se=T,se}var _e,ze;function La(){if(ze)return _e;ze=1;var _=U0(),R=_.System,a0=_.VbrMode;_.Float;var U=_.ShortBlock;_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double;var r0=_.new_float;_.new_float_n,_.new_int;var z=_.new_int_n,G=_.new_short_n,J=_.assert,q=Ra(),K=Aa(),V=I1(),T=wa(),L=ya(),$=Ia(),g=ha(),A=de(),E=g0();function b(){var O=this,t=128*1024;b.V9=410,b.V8=420,b.V7=430,b.V6=440,b.V5=450,b.V4=460,b.V3=470,b.V2=480,b.V1=490,b.V0=500,b.R3MIX=1e3,b.STANDARD=1001,b.EXTREME=1002,b.INSANE=1003,b.STANDARD_FAST=1004,b.EXTREME_FAST=1005,b.MEDIUM=1006,b.MEDIUM_FAST=1007;var p=16384+t;b.LAME_MAXMP3BUFFER=p;var B,j,X,k,i0,v0=new q,Q,c,T0;this.enc=new E,this.setModules=function(i,o,d0,S0,V0,y0,B0,E0,k0){B=i,j=o,X=d0,k=S0,i0=V0,Q=y0,c=E0,T0=k0,this.enc.setModules(j,v0,k,Q)};function H(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=r0(E.SBMAX_l),this.bo_s_weight=r0(E.SBMAX_s)}function y(){this.lowerlimit=0}function s(i,o){this.lowpass=o}var m=4294479419;function I(i){var o;return i.class_id=m,o=i.internal_flags=new V,i.mode=MPEGMode.NOT_SET,i.original=1,i.in_samplerate=44100,i.num_channels=2,i.num_samples=-1,i.bWriteVbrTag=!0,i.quality=-1,i.short_blocks=null,o.subblock_gain=-1,i.lowpassfreq=0,i.highpassfreq=0,i.lowpasswidth=-1,i.highpasswidth=-1,i.VBR=a0.vbr_off,i.VBR_q=4,i.ATHcurve=-1,i.VBR_mean_bitrate_kbps=128,i.VBR_min_bitrate_kbps=0,i.VBR_max_bitrate_kbps=0,i.VBR_hard_min=0,o.VBR_min_bitrate=1,o.VBR_max_bitrate=13,i.quant_comp=-1,i.quant_comp_short=-1,i.msfix=-1,o.resample_ratio=1,o.OldValue[0]=180,o.OldValue[1]=180,o.CurrentStep[0]=4,o.CurrentStep[1]=4,o.masking_lower=1,o.nsPsy.attackthre=-1,o.nsPsy.attackthre_s=-1,i.scale=-1,i.athaa_type=-1,i.ATHtype=-1,i.athaa_loudapprox=-1,i.athaa_sensitivity=0,i.useTemporal=null,i.interChRatio=-1,o.mf_samples_to_encode=E.ENCDELAY+E.POSTDELAY,i.encoder_padding=0,o.mf_size=E.ENCDELAY-E.MDCTDELAY,i.findReplayGain=!1,i.decode_on_the_fly=!1,o.decode_on_the_fly=!1,o.findReplayGain=!1,o.findPeakSample=!1,o.RadioGain=0,o.AudiophileGain=0,o.noclipGainChange=0,o.noclipScale=-1,i.preset=0,i.write_id3tag_automatic=!0,0}this.lame_init=function(){var i=new K;return I(i),i.lame_allocated_gfp=1,i};function N(i){return i>1?0:i<=0?1:Math.cos(Math.PI/2*i)}this.nearestBitrateFullIndex=function(i){var o=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],d0=0,S0=0,V0=0,y0=0;y0=o[16],V0=16,S0=o[16],d0=16;for(var B0=0;B0<16;B0++)if(Math.max(i,o[B0+1])!=i){y0=o[B0+1],V0=B0+1,S0=o[B0],d0=B0;break}return y0-i>i-S0?d0:V0};function v(i,o){var d0=44100;return o>=48e3?d0=48e3:o>=44100?d0=44100:o>=32e3?d0=32e3:o>=24e3?d0=24e3:o>=22050?d0=22050:o>=16e3?d0=16e3:o>=12e3?d0=12e3:o>=11025?d0=11025:o>=8e3&&(d0=8e3),i==-1?d0:(i<=15960&&(d0=44100),i<=15250&&(d0=32e3),i<=11220&&(d0=24e3),i<=9970&&(d0=22050),i<=7230&&(d0=16e3),i<=5420&&(d0=12e3),i<=4510&&(d0=11025),i<=3970&&(d0=8e3),o<d0?o>44100?48e3:o>32e3?44100:o>24e3?32e3:o>22050?24e3:o>16e3?22050:o>12e3?16e3:o>11025?12e3:o>8e3?11025:8e3:d0)}function e(i,o){switch(i){case 44100:return o.version=1,0;case 48e3:return o.version=1,1;case 32e3:return o.version=1,2;case 22050:return o.version=0,0;case 24e3:return o.version=0,1;case 16e3:return o.version=0,2;case 11025:return o.version=0,0;case 12e3:return o.version=0,1;case 8e3:return o.version=0,2;default:return o.version=0,-1}}function r(i,o,d0){d0<16e3&&(o=2);for(var S0=A.bitrate_table[o][1],V0=2;V0<=14;V0++)A.bitrate_table[o][V0]>0&&Math.abs(A.bitrate_table[o][V0]-i)<Math.abs(S0-i)&&(S0=A.bitrate_table[o][V0]);return S0}function a(i,o,d0){d0<16e3&&(o=2);for(var S0=0;S0<=14;S0++)if(A.bitrate_table[o][S0]>0&&A.bitrate_table[o][S0]==i)return S0;return-1}function n(i,o){var d0=[new s(8,2e3),new s(16,3700),new s(24,3900),new s(32,5500),new s(40,7e3),new s(48,7500),new s(56,1e4),new s(64,11e3),new s(80,13500),new s(96,15100),new s(112,15600),new s(128,17e3),new s(160,17500),new s(192,18600),new s(224,19400),new s(256,19700),new s(320,20500)],S0=O.nearestBitrateFullIndex(o);i.lowerlimit=d0[S0].lowpass}function l(i){var o=i.internal_flags,d0=32,S0=-1;if(o.lowpass1>0){for(var V0=999,y0=0;y0<=31;y0++){var B0=y0/31;B0>=o.lowpass2&&(d0=Math.min(d0,y0)),o.lowpass1<B0&&B0<o.lowpass2&&(V0=Math.min(V0,y0))}V0==999?o.lowpass1=(d0-.75)/31:o.lowpass1=(V0-.75)/31,o.lowpass2=d0/31}if(o.highpass2>0&&o.highpass2<.9*(.75/31)&&(o.highpass1=0,o.highpass2=0,R.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),o.highpass2>0){for(var E0=-1,y0=0;y0<=31;y0++){var B0=y0/31;B0<=o.highpass1&&(S0=Math.max(S0,y0)),o.highpass1<B0&&B0<o.highpass2&&(E0=Math.max(E0,y0))}o.highpass1=S0/31,E0==-1?o.highpass2=(S0+.75)/31:o.highpass2=(E0+.75)/31}for(var y0=0;y0<32;y0++){var k0,L0,B0=y0/31;o.highpass2>o.highpass1?k0=N((o.highpass2-B0)/(o.highpass2-o.highpass1+1e-20)):k0=1,o.lowpass2>o.lowpass1?L0=N((B0-o.lowpass1)/(o.lowpass2-o.lowpass1+1e-20)):L0=1,o.amp_filter[y0]=k0*L0}}function d(i){var o=i.internal_flags;switch(i.quality){default:case 9:o.psymodel=0,o.noise_shaping=0,o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.use_best_huffman=0,o.full_outer_loop=0;break;case 8:i.quality=7;case 7:o.psymodel=1,o.noise_shaping=0,o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.use_best_huffman=0,o.full_outer_loop=0;break;case 6:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=0,o.full_outer_loop=0;break;case 5:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=0,o.full_outer_loop=0;break;case 4:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 3:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=1,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 2:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=1,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 1:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=2,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 0:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=2,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break}}function M(i){var o=i.internal_flags;i.frameNum=0,i.write_id3tag_automatic&&c.id3tag_write_v2(i),o.bitrate_stereoMode_Hist=z([16,5]),o.bitrate_blockType_Hist=z([16,6]),o.PeakSample=0,i.bWriteVbrTag&&Q.InitVbrTag(i)}this.lame_init_params=function(i){var o=i.internal_flags;if(o.Class_ID=0,o.ATH==null&&(o.ATH=new T),o.PSY==null&&(o.PSY=new H),o.rgdata==null&&(o.rgdata=new L),o.channels_in=i.num_channels,o.channels_in==1&&(i.mode=MPEGMode.MONO),o.channels_out=i.mode==MPEGMode.MONO?1:2,o.mode_ext=E.MPG_MD_MS_LR,i.mode==MPEGMode.MONO&&(i.force_ms=!1),i.VBR==a0.vbr_off&&i.VBR_mean_bitrate_kbps!=128&&i.brate==0&&(i.brate=i.VBR_mean_bitrate_kbps),i.VBR==a0.vbr_off||i.VBR==a0.vbr_mtrh||i.VBR==a0.vbr_mt||(i.free_format=!1),i.VBR==a0.vbr_off&&i.brate==0&&g.EQ(i.compression_ratio,0)&&(i.compression_ratio=11.025),i.VBR==a0.vbr_off&&i.compression_ratio>0&&(i.out_samplerate==0&&(i.out_samplerate=map2MP3Frequency(int(.97*i.in_samplerate))),i.brate=0|i.out_samplerate*16*o.channels_out/(1e3*i.compression_ratio),o.samplerate_index=e(i.out_samplerate,i),i.free_format||(i.brate=r(i.brate,i.version,i.out_samplerate))),i.out_samplerate!=0&&(i.out_samplerate<16e3?(i.VBR_mean_bitrate_kbps=Math.max(i.VBR_mean_bitrate_kbps,8),i.VBR_mean_bitrate_kbps=Math.min(i.VBR_mean_bitrate_kbps,64)):i.out_samplerate<32e3?(i.VBR_mean_bitrate_kbps=Math.max(i.VBR_mean_bitrate_kbps,8),i.VBR_mean_bitrate_kbps=Math.min(i.VBR_mean_bitrate_kbps,160)):(i.VBR_mean_bitrate_kbps=Math.max(i.VBR_mean_bitrate_kbps,32),i.VBR_mean_bitrate_kbps=Math.min(i.VBR_mean_bitrate_kbps,320))),i.lowpassfreq==0){var d0=16e3;switch(i.VBR){case a0.vbr_off:{var S0=new y;n(S0,i.brate),d0=S0.lowerlimit;break}case a0.vbr_abr:{var S0=new y;n(S0,i.VBR_mean_bitrate_kbps),d0=S0.lowerlimit;break}case a0.vbr_rh:{var V0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=i.VBR_q&&i.VBR_q<=9){var y0=V0[i.VBR_q],B0=V0[i.VBR_q+1],E0=i.VBR_q_frac;d0=linear_int(y0,B0,E0)}else d0=19500;break}default:{var V0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=i.VBR_q&&i.VBR_q<=9){var y0=V0[i.VBR_q],B0=V0[i.VBR_q+1],E0=i.VBR_q_frac;d0=linear_int(y0,B0,E0)}else d0=19500}}i.mode==MPEGMode.MONO&&(i.VBR==a0.vbr_off||i.VBR==a0.vbr_abr)&&(d0*=1.5),i.lowpassfreq=d0|0}if(i.out_samplerate==0&&(2*i.lowpassfreq>i.in_samplerate&&(i.lowpassfreq=i.in_samplerate/2),i.out_samplerate=v(i.lowpassfreq|0,i.in_samplerate)),i.lowpassfreq=Math.min(20500,i.lowpassfreq),i.lowpassfreq=Math.min(i.out_samplerate/2,i.lowpassfreq),i.VBR==a0.vbr_off&&(i.compression_ratio=i.out_samplerate*16*o.channels_out/(1e3*i.brate)),i.VBR==a0.vbr_abr&&(i.compression_ratio=i.out_samplerate*16*o.channels_out/(1e3*i.VBR_mean_bitrate_kbps)),i.bWriteVbrTag||(i.findReplayGain=!1,i.decode_on_the_fly=!1,o.findPeakSample=!1),o.findReplayGain=i.findReplayGain,o.decode_on_the_fly=i.decode_on_the_fly,o.decode_on_the_fly&&(o.findPeakSample=!0),o.findReplayGain&&B.InitGainAnalysis(o.rgdata,i.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return i.internal_flags=null,-6;switch(o.decode_on_the_fly&&!i.decode_only&&(o.hip!=null&&T0.hip_decode_exit(o.hip),o.hip=T0.hip_decode_init()),o.mode_gr=i.out_samplerate<=24e3?1:2,i.framesize=576*o.mode_gr,i.encoder_delay=E.ENCDELAY,o.resample_ratio=i.in_samplerate/i.out_samplerate,i.VBR){case a0.vbr_mt:case a0.vbr_rh:case a0.vbr_mtrh:{var k0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];i.compression_ratio=k0[i.VBR_q]}break;case a0.vbr_abr:i.compression_ratio=i.out_samplerate*16*o.channels_out/(1e3*i.VBR_mean_bitrate_kbps);break;default:i.compression_ratio=i.out_samplerate*16*o.channels_out/(1e3*i.brate);break}if(i.mode==MPEGMode.NOT_SET&&(i.mode=MPEGMode.JOINT_STEREO),i.highpassfreq>0?(o.highpass1=2*i.highpassfreq,i.highpasswidth>=0?o.highpass2=2*(i.highpassfreq+i.highpasswidth):o.highpass2=2*i.highpassfreq,o.highpass1/=i.out_samplerate,o.highpass2/=i.out_samplerate):(o.highpass1=0,o.highpass2=0),i.lowpassfreq>0?(o.lowpass2=2*i.lowpassfreq,i.lowpasswidth>=0?(o.lowpass1=2*(i.lowpassfreq-i.lowpasswidth),o.lowpass1<0&&(o.lowpass1=0)):o.lowpass1=2*i.lowpassfreq,o.lowpass1/=i.out_samplerate,o.lowpass2/=i.out_samplerate):(o.lowpass1=0,o.lowpass2=0),l(i),o.samplerate_index=e(i.out_samplerate,i),o.samplerate_index<0)return i.internal_flags=null,-1;if(i.VBR==a0.vbr_off){if(i.free_format)o.bitrate_index=0;else if(i.brate=r(i.brate,i.version,i.out_samplerate),o.bitrate_index=a(i.brate,i.version,i.out_samplerate),o.bitrate_index<=0)return i.internal_flags=null,-1}else o.bitrate_index=1;i.analysis&&(i.bWriteVbrTag=!1),o.pinfo!=null&&(i.bWriteVbrTag=!1),j.init_bit_stream_w(o);for(var L0=o.samplerate_index+3*i.version+6*(i.out_samplerate<16e3?1:0),f0=0;f0<E.SBMAX_l+1;f0++)o.scalefac_band.l[f0]=k.sfBandIndex[L0].l[f0];for(var f0=0;f0<E.PSFB21+1;f0++){var F0=(o.scalefac_band.l[22]-o.scalefac_band.l[21])/E.PSFB21,K0=o.scalefac_band.l[21]+f0*F0;o.scalefac_band.psfb21[f0]=K0}o.scalefac_band.psfb21[E.PSFB21]=576;for(var f0=0;f0<E.SBMAX_s+1;f0++)o.scalefac_band.s[f0]=k.sfBandIndex[L0].s[f0];for(var f0=0;f0<E.PSFB12+1;f0++){var F0=(o.scalefac_band.s[13]-o.scalefac_band.s[12])/E.PSFB12,K0=o.scalefac_band.s[12]+f0*F0;o.scalefac_band.psfb12[f0]=K0}o.scalefac_band.psfb12[E.PSFB12]=192,i.version==1?o.sideinfo_len=o.channels_out==1?21:36:o.sideinfo_len=o.channels_out==1?13:21,i.error_protection&&(o.sideinfo_len+=2),M(i),o.Class_ID=m;{var q0;for(q0=0;q0<19;q0++)o.nsPsy.pefirbuf[q0]=700*o.mode_gr*o.channels_out;i.ATHtype==-1&&(i.ATHtype=4)}switch(J(i.VBR_q<=9),J(i.VBR_q>=0),i.VBR){case a0.vbr_mt:i.VBR=a0.vbr_mtrh;case a0.vbr_mtrh:{i.useTemporal==null&&(i.useTemporal=!1),X.apply_preset(i,500-i.VBR_q*10,0),i.quality<0&&(i.quality=LAME_DEFAULT_QUALITY),i.quality<5&&(i.quality=0),i.quality>5&&(i.quality=5),o.PSY.mask_adjust=i.maskingadjust,o.PSY.mask_adjust_short=i.maskingadjust_short,i.experimentalY?o.sfb21_extra=!1:o.sfb21_extra=i.out_samplerate>44e3,o.iteration_loop=new VBRNewIterationLoop(i0);break}case a0.vbr_rh:{X.apply_preset(i,500-i.VBR_q*10,0),o.PSY.mask_adjust=i.maskingadjust,o.PSY.mask_adjust_short=i.maskingadjust_short,i.experimentalY?o.sfb21_extra=!1:o.sfb21_extra=i.out_samplerate>44e3,i.quality>6&&(i.quality=6),i.quality<0&&(i.quality=LAME_DEFAULT_QUALITY),o.iteration_loop=new VBROldIterationLoop(i0);break}default:{var Z0;o.sfb21_extra=!1,i.quality<0&&(i.quality=LAME_DEFAULT_QUALITY),Z0=i.VBR,Z0==a0.vbr_off&&(i.VBR_mean_bitrate_kbps=i.brate),X.apply_preset(i,i.VBR_mean_bitrate_kbps,0),i.VBR=Z0,o.PSY.mask_adjust=i.maskingadjust,o.PSY.mask_adjust_short=i.maskingadjust_short,Z0==a0.vbr_off?o.iteration_loop=new $(i0):o.iteration_loop=new ABRIterationLoop(i0);break}}if(J(i.scale>=0),i.VBR!=a0.vbr_off){if(o.VBR_min_bitrate=1,o.VBR_max_bitrate=14,i.out_samplerate<16e3&&(o.VBR_max_bitrate=8),i.VBR_min_bitrate_kbps!=0&&(i.VBR_min_bitrate_kbps=r(i.VBR_min_bitrate_kbps,i.version,i.out_samplerate),o.VBR_min_bitrate=a(i.VBR_min_bitrate_kbps,i.version,i.out_samplerate),o.VBR_min_bitrate<0)||i.VBR_max_bitrate_kbps!=0&&(i.VBR_max_bitrate_kbps=r(i.VBR_max_bitrate_kbps,i.version,i.out_samplerate),o.VBR_max_bitrate=a(i.VBR_max_bitrate_kbps,i.version,i.out_samplerate),o.VBR_max_bitrate<0))return-1;i.VBR_min_bitrate_kbps=A.bitrate_table[i.version][o.VBR_min_bitrate],i.VBR_max_bitrate_kbps=A.bitrate_table[i.version][o.VBR_max_bitrate],i.VBR_mean_bitrate_kbps=Math.min(A.bitrate_table[i.version][o.VBR_max_bitrate],i.VBR_mean_bitrate_kbps),i.VBR_mean_bitrate_kbps=Math.max(A.bitrate_table[i.version][o.VBR_min_bitrate],i.VBR_mean_bitrate_kbps)}return i.tune&&(o.PSY.mask_adjust+=i.tune_value_a,o.PSY.mask_adjust_short+=i.tune_value_a),d(i),J(i.scale>=0),i.athaa_type<0?o.ATH.useAdjust=3:o.ATH.useAdjust=i.athaa_type,o.ATH.aaSensitivityP=Math.pow(10,i.athaa_sensitivity/-10),i.short_blocks==null&&(i.short_blocks=U.short_block_allowed),i.short_blocks==U.short_block_allowed&&(i.mode==MPEGMode.JOINT_STEREO||i.mode==MPEGMode.STEREO)&&(i.short_blocks=U.short_block_coupled),i.quant_comp<0&&(i.quant_comp=1),i.quant_comp_short<0&&(i.quant_comp_short=0),i.msfix<0&&(i.msfix=0),i.exp_nspsytune=i.exp_nspsytune|1,i.internal_flags.nsPsy.attackthre<0&&(i.internal_flags.nsPsy.attackthre=q.NSATTACKTHRE),i.internal_flags.nsPsy.attackthre_s<0&&(i.internal_flags.nsPsy.attackthre_s=q.NSATTACKTHRE_S),J(i.scale>=0),i.scale<0&&(i.scale=1),i.ATHtype<0&&(i.ATHtype=4),i.ATHcurve<0&&(i.ATHcurve=4),i.athaa_loudapprox<0&&(i.athaa_loudapprox=2),i.interChRatio<0&&(i.interChRatio=0),i.useTemporal==null&&(i.useTemporal=!0),o.slot_lag=o.frac_SpF=0,i.VBR==a0.vbr_off&&(o.slot_lag=o.frac_SpF=(i.version+1)*72e3*i.brate%i.out_samplerate|0),k.iteration_init(i),v0.psymodel_init(i),J(i.scale>=0),0};function f(i,o){(i.in_buffer_0==null||i.in_buffer_nsamples<o)&&(i.in_buffer_0=r0(o),i.in_buffer_1=r0(o),i.in_buffer_nsamples=o)}this.lame_encode_flush=function(i,o,d0,S0){var V0=i.internal_flags,y0=G([2,1152]),B0=0,E0,k0,L0,f0,F0=V0.mf_samples_to_encode-E.POSTDELAY,K0=F(i);if(V0.mf_samples_to_encode<1)return 0;for(E0=0,i.in_samplerate!=i.out_samplerate&&(F0+=16*i.out_samplerate/i.in_samplerate),L0=i.framesize-F0%i.framesize,L0<576&&(L0+=i.framesize),i.encoder_padding=L0,f0=(F0+L0)/i.framesize;f0>0&&B0>=0;){var q0=K0-V0.mf_size,Z0=i.frameNum;q0*=i.in_samplerate,q0/=i.out_samplerate,q0>1152&&(q0=1152),q0<1&&(q0=1),k0=S0-E0,S0==0&&(k0=0),B0=this.lame_encode_buffer(i,y0[0],y0[1],q0,o,d0,k0),d0+=B0,E0+=B0,f0-=Z0!=i.frameNum?1:0}if(V0.mf_samples_to_encode=0,B0<0||(k0=S0-E0,S0==0&&(k0=0),j.flush_bitstream(i),B0=j.copy_buffer(V0,o,d0,k0,1),B0<0))return B0;if(d0+=B0,E0+=B0,k0=S0-E0,S0==0&&(k0=0),i.write_id3tag_automatic){if(c.id3tag_write_v1(i),B0=j.copy_buffer(V0,o,d0,k0,0),B0<0)return B0;E0+=B0}return E0},this.lame_encode_buffer=function(i,o,d0,S0,V0,y0,B0){var E0=i.internal_flags,k0=[null,null];if(E0.Class_ID!=m)return-3;if(S0==0)return 0;f(E0,S0),k0[0]=E0.in_buffer_0,k0[1]=E0.in_buffer_1;for(var L0=0;L0<S0;L0++)k0[0][L0]=o[L0],E0.channels_in>1&&(k0[1][L0]=d0[L0]);return P(i,k0[0],k0[1],S0,V0,y0,B0)};function F(i){var o=E.BLKSIZE+i.framesize-E.FFTOFFSET;return o=Math.max(o,512+i.framesize-32),J(V.MFSIZE>=o),o}function P(i,o,d0,S0,V0,y0,B0){var E0=i.internal_flags,k0=0,L0,f0,F0,K0,q0,Z0=[null,null],Q0=[null,null];if(E0.Class_ID!=m)return-3;if(S0==0)return 0;if(q0=j.copy_buffer(E0,V0,y0,B0,0),q0<0)return q0;if(y0+=q0,k0+=q0,Q0[0]=o,Q0[1]=d0,g.NEQ(i.scale,0)&&g.NEQ(i.scale,1))for(f0=0;f0<S0;++f0)Q0[0][f0]*=i.scale,E0.channels_out==2&&(Q0[1][f0]*=i.scale);if(g.NEQ(i.scale_left,0)&&g.NEQ(i.scale_left,1))for(f0=0;f0<S0;++f0)Q0[0][f0]*=i.scale_left;if(g.NEQ(i.scale_right,0)&&g.NEQ(i.scale_right,1))for(f0=0;f0<S0;++f0)Q0[1][f0]*=i.scale_right;if(i.num_channels==2&&E0.channels_out==1)for(f0=0;f0<S0;++f0)Q0[0][f0]=.5*(Q0[0][f0]+Q0[1][f0]),Q0[1][f0]=0;K0=F(i),Z0[0]=E0.mfbuf[0],Z0[1]=E0.mfbuf[1];for(var Y0=0;S0>0;){var W0=[null,null],r1=0,J0=0;W0[0]=Q0[0],W0[1]=Q0[1];var s1=new h0;if(X0(i,Z0,W0,Y0,S0,s1),r1=s1.n_in,J0=s1.n_out,E0.findReplayGain&&!E0.decode_on_the_fly&&B.AnalyzeSamples(E0.rgdata,Z0[0],E0.mf_size,Z0[1],E0.mf_size,J0,E0.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(S0-=r1,Y0+=r1,E0.channels_out==2,E0.mf_size+=J0,J(E0.mf_size<=V.MFSIZE),E0.mf_samples_to_encode<1&&(E0.mf_samples_to_encode=E.ENCDELAY+E.POSTDELAY),E0.mf_samples_to_encode+=J0,E0.mf_size>=K0){var u1=B0-k0;if(B0==0&&(u1=0),L0=s0(i,Z0[0],Z0[1],V0,y0,u1),L0<0)return L0;for(y0+=L0,k0+=L0,E0.mf_size-=i.framesize,E0.mf_samples_to_encode-=i.framesize,F0=0;F0<E0.channels_out;F0++)for(f0=0;f0<E0.mf_size;f0++)Z0[F0][f0]=Z0[F0][f0+i.framesize]}}return J(S0==0),k0}function s0(i,o,d0,S0,V0,y0){var B0=O.enc.lame_encode_mp3_frame(i,o,d0,S0,V0,y0);return i.frameNum++,B0}function h0(){this.n_in=0,this.n_out=0}function u0(){this.num_used=0}function c0(i,o){return o!=0?c0(o,i%o):i}function M0(i,o,d0){var S0=Math.PI*o;i/=d0,i<0&&(i=0),i>1&&(i=1);var V0=i-.5,y0=.42-.5*Math.cos(2*i*Math.PI)+.08*Math.cos(4*i*Math.PI);return Math.abs(V0)<1e-9?S0/Math.PI:y0*Math.sin(d0*S0*V0)/(Math.PI*d0*V0)}function N0(i,o,d0,S0,V0,y0,B0,E0,k0){var L0=i.internal_flags,f0,F0=0,K0,q0=i.out_samplerate/c0(i.out_samplerate,i.in_samplerate);q0>V.BPC&&(q0=V.BPC);var Z0=Math.abs(L0.resample_ratio-Math.floor(.5+L0.resample_ratio))<1e-4?1:0,Q0=1/L0.resample_ratio;Q0>1&&(Q0=1);var Y0=31;Y0%2==0&&--Y0,Y0+=Z0;var W0=Y0+1;if(L0.fill_buffer_resample_init==0){for(L0.inbuf_old[0]=r0(W0),L0.inbuf_old[1]=r0(W0),f0=0;f0<=2*q0;++f0)L0.blackfilt[f0]=r0(W0);for(L0.itime[0]=0,L0.itime[1]=0,F0=0;F0<=2*q0;F0++){var r1=0,J0=(F0-q0)/(2*q0);for(f0=0;f0<=Y0;f0++)r1+=L0.blackfilt[F0][f0]=M0(f0-J0,Q0,Y0);for(f0=0;f0<=Y0;f0++)L0.blackfilt[F0][f0]/=r1}L0.fill_buffer_resample_init=1}var s1=L0.inbuf_old[k0];for(K0=0;K0<S0;K0++){var u1,_1;if(u1=K0*L0.resample_ratio,F0=0|Math.floor(u1-L0.itime[k0]),Y0+F0-Y0/2>=B0)break;var J0=u1-L0.itime[k0]-(F0+.5*(Y0%2));J(Math.abs(J0)<=.501),_1=0|Math.floor(J0*2*q0+q0+.5);var d1=0;for(f0=0;f0<=Y0;++f0){var h1=0|f0+F0-Y0/2,S1;J(h1<B0),J(h1+W0>=0),S1=h1<0?s1[W0+h1]:V0[y0+h1],d1+=S1*L0.blackfilt[_1][f0]}o[d0+K0]=d1}if(E0.num_used=Math.min(B0,Y0+F0-Y0/2),L0.itime[k0]+=E0.num_used-K0*L0.resample_ratio,E0.num_used>=W0)for(f0=0;f0<W0;f0++)s1[f0]=V0[y0+E0.num_used+f0-W0];else{var f1=W0-E0.num_used;for(f0=0;f0<f1;++f0)s1[f0]=s1[f0+E0.num_used];for(F0=0;f0<W0;++f0,++F0)s1[f0]=V0[y0+F0];J(F0==E0.num_used)}return K0}function X0(i,o,d0,S0,V0,y0){var B0=i.internal_flags;if(B0.resample_ratio<.9999||B0.resample_ratio>1.0001)for(var E0=0;E0<B0.channels_out;E0++){var k0=new u0;y0.n_out=N0(i,o[E0],B0.mf_size,i.framesize,d0[E0],S0,V0,k0,E0),y0.n_in=k0.num_used}else{y0.n_out=Math.min(i.framesize,V0),y0.n_in=y0.n_out;for(var L0=0;L0<y0.n_out;++L0)o[0][B0.mf_size+L0]=d0[0][S0+L0],B0.channels_out==2&&(o[1][B0.mf_size+L0]=d0[1][S0+L0])}}}return _e=b,_e}var le,je;function xa(){if(je)return le;je=1;var _=U0();_.System;var R=_.VbrMode;_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n,_.new_byte,_.new_double,_.new_float,_.new_float_n,_.new_int,_.new_int_n,_.assert;function a0(){function U(L,$,g,A,E,b,O,t,p,B,j,X,k,i0,v0){this.vbr_q=L,this.quant_comp=$,this.quant_comp_s=g,this.expY=A,this.st_lrm=E,this.st_s=b,this.masking_adj=O,this.masking_adj_short=t,this.ath_lower=p,this.ath_curve=B,this.ath_sensitivity=j,this.interch=X,this.safejoint=k,this.sfb21mod=i0,this.msfix=v0}function r0(L,$,g,A,E,b,O,t,p,B,j,X,k,i0){this.quant_comp=$,this.quant_comp_s=g,this.safejoint=A,this.nsmsfix=E,this.st_lrm=b,this.st_s=O,this.nsbass=t,this.scale=p,this.masking_adj=B,this.ath_lower=j,this.ath_curve=X,this.interch=k,this.sfscale=i0}var z;this.setModules=function(L){z=L};var G=[new U(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new U(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new U(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new U(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new U(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new U(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new U(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new U(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new U(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new U(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new U(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],J=[new U(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new U(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new U(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new U(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new U(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new U(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new U(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new U(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new U(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new U(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new U(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function q(L,$,g){var A=L.VBR==R.vbr_rh?G:J,E=L.VBR_q_frac,b=A[$],O=A[$+1],t=b;b.st_lrm=b.st_lrm+E*(O.st_lrm-b.st_lrm),b.st_s=b.st_s+E*(O.st_s-b.st_s),b.masking_adj=b.masking_adj+E*(O.masking_adj-b.masking_adj),b.masking_adj_short=b.masking_adj_short+E*(O.masking_adj_short-b.masking_adj_short),b.ath_lower=b.ath_lower+E*(O.ath_lower-b.ath_lower),b.ath_curve=b.ath_curve+E*(O.ath_curve-b.ath_curve),b.ath_sensitivity=b.ath_sensitivity+E*(O.ath_sensitivity-b.ath_sensitivity),b.interch=b.interch+E*(O.interch-b.interch),b.msfix=b.msfix+E*(O.msfix-b.msfix),T(L,t.vbr_q),g!=0?L.quant_comp=t.quant_comp:Math.abs(L.quant_comp- -1)>0||(L.quant_comp=t.quant_comp),g!=0?L.quant_comp_short=t.quant_comp_s:Math.abs(L.quant_comp_short- -1)>0||(L.quant_comp_short=t.quant_comp_s),t.expY!=0&&(L.experimentalY=t.expY!=0),g!=0?L.internal_flags.nsPsy.attackthre=t.st_lrm:Math.abs(L.internal_flags.nsPsy.attackthre- -1)>0||(L.internal_flags.nsPsy.attackthre=t.st_lrm),g!=0?L.internal_flags.nsPsy.attackthre_s=t.st_s:Math.abs(L.internal_flags.nsPsy.attackthre_s- -1)>0||(L.internal_flags.nsPsy.attackthre_s=t.st_s),g!=0?L.maskingadjust=t.masking_adj:Math.abs(L.maskingadjust-0)>0||(L.maskingadjust=t.masking_adj),g!=0?L.maskingadjust_short=t.masking_adj_short:Math.abs(L.maskingadjust_short-0)>0||(L.maskingadjust_short=t.masking_adj_short),g!=0?L.ATHlower=-t.ath_lower/10:Math.abs(-L.ATHlower*10-0)>0||(L.ATHlower=-t.ath_lower/10),g!=0?L.ATHcurve=t.ath_curve:Math.abs(L.ATHcurve- -1)>0||(L.ATHcurve=t.ath_curve),g!=0?L.athaa_sensitivity=t.ath_sensitivity:Math.abs(L.athaa_sensitivity- -1)>0||(L.athaa_sensitivity=t.ath_sensitivity),t.interch>0&&(g!=0?L.interChRatio=t.interch:Math.abs(L.interChRatio- -1)>0||(L.interChRatio=t.interch)),t.safejoint>0&&(L.exp_nspsytune=L.exp_nspsytune|t.safejoint),t.sfb21mod>0&&(L.exp_nspsytune=L.exp_nspsytune|t.sfb21mod<<20),g!=0?L.msfix=t.msfix:Math.abs(L.msfix- -1)>0||(L.msfix=t.msfix),g==0&&(L.VBR_q=$,L.VBR_q_frac=E)}var K=[new r0(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new r0(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new r0(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new r0(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new r0(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new r0(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new r0(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new r0(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new r0(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new r0(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new r0(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new r0(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new r0(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new r0(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new r0(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new r0(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new r0(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function V(L,$,g){var A=$,E=z.nearestBitrateFullIndex($);if(L.VBR=R.vbr_abr,L.VBR_mean_bitrate_kbps=A,L.VBR_mean_bitrate_kbps=Math.min(L.VBR_mean_bitrate_kbps,320),L.VBR_mean_bitrate_kbps=Math.max(L.VBR_mean_bitrate_kbps,8),L.brate=L.VBR_mean_bitrate_kbps,L.VBR_mean_bitrate_kbps>320&&(L.disable_reservoir=!0),K[E].safejoint>0&&(L.exp_nspsytune=L.exp_nspsytune|2),K[E].sfscale>0&&(L.internal_flags.noise_shaping=2),Math.abs(K[E].nsbass)>0){var b=int(K[E].nsbass*4);b<0&&(b+=64),L.exp_nspsytune=L.exp_nspsytune|b<<2}return g!=0?L.quant_comp=K[E].quant_comp:Math.abs(L.quant_comp- -1)>0||(L.quant_comp=K[E].quant_comp),g!=0?L.quant_comp_short=K[E].quant_comp_s:Math.abs(L.quant_comp_short- -1)>0||(L.quant_comp_short=K[E].quant_comp_s),g!=0?L.msfix=K[E].nsmsfix:Math.abs(L.msfix- -1)>0||(L.msfix=K[E].nsmsfix),g!=0?L.internal_flags.nsPsy.attackthre=K[E].st_lrm:Math.abs(L.internal_flags.nsPsy.attackthre- -1)>0||(L.internal_flags.nsPsy.attackthre=K[E].st_lrm),g!=0?L.internal_flags.nsPsy.attackthre_s=K[E].st_s:Math.abs(L.internal_flags.nsPsy.attackthre_s- -1)>0||(L.internal_flags.nsPsy.attackthre_s=K[E].st_s),g!=0?L.scale=K[E].scale:Math.abs(L.scale- -1)>0||(L.scale=K[E].scale),g!=0?L.maskingadjust=K[E].masking_adj:Math.abs(L.maskingadjust-0)>0||(L.maskingadjust=K[E].masking_adj),K[E].masking_adj>0?g!=0?L.maskingadjust_short=K[E].masking_adj*.9:Math.abs(L.maskingadjust_short-0)>0||(L.maskingadjust_short=K[E].masking_adj*.9):g!=0?L.maskingadjust_short=K[E].masking_adj*1.1:Math.abs(L.maskingadjust_short-0)>0||(L.maskingadjust_short=K[E].masking_adj*1.1),g!=0?L.ATHlower=-K[E].ath_lower/10:Math.abs(-L.ATHlower*10-0)>0||(L.ATHlower=-K[E].ath_lower/10),g!=0?L.ATHcurve=K[E].ath_curve:Math.abs(L.ATHcurve- -1)>0||(L.ATHcurve=K[E].ath_curve),g!=0?L.interChRatio=K[E].interch:Math.abs(L.interChRatio- -1)>0||(L.interChRatio=K[E].interch),$}this.apply_preset=function(L,$,g){switch($){case Lame.R3MIX:{$=Lame.V3,L.VBR=R.vbr_mtrh;break}case Lame.MEDIUM:{$=Lame.V4,L.VBR=R.vbr_rh;break}case Lame.MEDIUM_FAST:{$=Lame.V4,L.VBR=R.vbr_mtrh;break}case Lame.STANDARD:{$=Lame.V2,L.VBR=R.vbr_rh;break}case Lame.STANDARD_FAST:{$=Lame.V2,L.VBR=R.vbr_mtrh;break}case Lame.EXTREME:{$=Lame.V0,L.VBR=R.vbr_rh;break}case Lame.EXTREME_FAST:{$=Lame.V0,L.VBR=R.vbr_mtrh;break}case Lame.INSANE:return $=320,L.preset=$,V(L,$,g),L.VBR=R.vbr_off,$}switch(L.preset=$,$){case Lame.V9:return q(L,9,g),$;case Lame.V8:return q(L,8,g),$;case Lame.V7:return q(L,7,g),$;case Lame.V6:return q(L,6,g),$;case Lame.V5:return q(L,5,g),$;case Lame.V4:return q(L,4,g),$;case Lame.V3:return q(L,3,g),$;case Lame.V2:return q(L,2,g),$;case Lame.V1:return q(L,1,g),$;case Lame.V0:return q(L,0,g),$}return 8<=$&&$<=320?V(L,$,g):(L.preset=0,$)};function T(L,$){var g=0;return 0>$&&(g=-1,$=0),9<$&&(g=-1,$=9),L.VBR_q=$,L.VBR_q_frac=0,g}}return le=a0,le}var oe,Je;function Va(){if(Je)return oe;Je=1;function _(){this.setModules=function(R,a0){}}return oe=_,oe}var ve,$e;function Na(){if($e)return ve;$e=1;function _(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}return ve=_,ve}var ue,ge;function pa(){if(ge)return ue;ge=1;var _=U0(),R=_.new_float,a0=_.new_int;_.assert;function U(){this.global_gain=0,this.sfb_count1=0,this.step=a0(39),this.noise=R(39),this.noise_log=R(39)}return ue=U,ue}var he,ea;function Ha(){if(ea)return he;ea=1;var _=U0(),R=_.System,a0=_.VbrMode;_.Float,_.ShortBlock;var U=_.Util,r0=_.Arrays;_.new_array_n,_.new_byte,_.new_double;var z=_.new_float;_.new_float_n,_.new_int,_.new_int_n;var G=_.assert,J=Va(),q=Na(),K=pa(),V=g0(),T=ce(),L=y1();function $(){var g;this.rv=null;var A;this.qupvt=null;var E,b=new J,O;this.setModules=function(y,s,m,I){g=y,A=s,this.rv=s,E=m,this.qupvt=m,O=I,b.setModules(E,O)},this.ms_convert=function(y,s){for(var m=0;m<576;++m){var I=y.tt[s][0].xr[m],N=y.tt[s][1].xr[m];y.tt[s][0].xr[m]=(I+N)*(U.SQRT2*.5),y.tt[s][1].xr[m]=(I-N)*(U.SQRT2*.5)}};function t(y,s,m,I){I=0;for(var N=0;N<=m;++N){var v=Math.abs(y.xr[N]);I+=v,s[N]=Math.sqrt(v*Math.sqrt(v)),s[N]>y.xrpow_max&&(y.xrpow_max=s[N])}return I}this.init_xrpow=function(y,s,m){var I=0,N=0|s.max_nonzero_coeff;if(G(m!=null),s.xrpow_max=0,G(0<=N&&N<=575),r0.fill(m,N,576,0),I=t(s,m,N,I),I>1e-20){var v=0;(y.substep_shaping&2)!=0&&(v=1);for(var e=0;e<s.psymax;e++)y.pseudohalf[e]=v;return!0}return r0.fill(s.l3_enc,0,576,0),!1};function p(y,s){var m=y.ATH,I=s.xr;if(s.block_type!=V.SHORT_TYPE)for(var N=!1,v=V.PSFB21-1;v>=0&&!N;v--){var e=y.scalefac_band.psfb21[v],r=y.scalefac_band.psfb21[v+1],a=E.athAdjust(m.adjust,m.psfb21[v],m.floor);y.nsPsy.longfact[21]>1e-12&&(a*=y.nsPsy.longfact[21]);for(var n=r-1;n>=e;n--)if(Math.abs(I[n])<a)I[n]=0;else{N=!0;break}}else for(var l=0;l<3;l++)for(var N=!1,v=V.PSFB12-1;v>=0&&!N;v--){var e=y.scalefac_band.s[12]*3+(y.scalefac_band.s[13]-y.scalefac_band.s[12])*l+(y.scalefac_band.psfb12[v]-y.scalefac_band.psfb12[0]),r=e+(y.scalefac_band.psfb12[v+1]-y.scalefac_band.psfb12[v]),d=E.athAdjust(m.adjust,m.psfb12[v],m.floor);y.nsPsy.shortfact[12]>1e-12&&(d*=y.nsPsy.shortfact[12]);for(var n=r-1;n>=e;n--)if(Math.abs(I[n])<d)I[n]=0;else{N=!0;break}}}this.init_outer_loop=function(y,s){s.part2_3_length=0,s.big_values=0,s.count1=0,s.global_gain=210,s.scalefac_compress=0,s.table_select[0]=0,s.table_select[1]=0,s.table_select[2]=0,s.subblock_gain[0]=0,s.subblock_gain[1]=0,s.subblock_gain[2]=0,s.subblock_gain[3]=0,s.region0_count=0,s.region1_count=0,s.preflag=0,s.scalefac_scale=0,s.count1table_select=0,s.part2_length=0,s.sfb_lmax=V.SBPSY_l,s.sfb_smin=V.SBPSY_s,s.psy_lmax=y.sfb21_extra?V.SBMAX_l:V.SBPSY_l,s.psymax=s.psy_lmax,s.sfbmax=s.sfb_lmax,s.sfbdivide=11;for(var m=0;m<V.SBMAX_l;m++)s.width[m]=y.scalefac_band.l[m+1]-y.scalefac_band.l[m],s.window[m]=3;if(s.block_type==V.SHORT_TYPE){var I=z(576);s.sfb_smin=0,s.sfb_lmax=0,s.mixed_block_flag!=0&&(s.sfb_smin=3,s.sfb_lmax=y.mode_gr*2+4),s.psymax=s.sfb_lmax+3*((y.sfb21_extra?V.SBMAX_s:V.SBPSY_s)-s.sfb_smin),s.sfbmax=s.sfb_lmax+3*(V.SBPSY_s-s.sfb_smin),s.sfbdivide=s.sfbmax-18,s.psy_lmax=s.sfb_lmax;var N=y.scalefac_band.l[s.sfb_lmax];R.arraycopy(s.xr,0,I,0,576);for(var m=s.sfb_smin;m<V.SBMAX_s;m++)for(var v=y.scalefac_band.s[m],e=y.scalefac_band.s[m+1],r=0;r<3;r++)for(var a=v;a<e;a++)s.xr[N++]=I[3*a+r];for(var n=s.sfb_lmax,m=s.sfb_smin;m<V.SBMAX_s;m++)s.width[n]=s.width[n+1]=s.width[n+2]=y.scalefac_band.s[m+1]-y.scalefac_band.s[m],s.window[n]=0,s.window[n+1]=1,s.window[n+2]=2,n+=3}s.count1bits=0,s.sfb_partition_table=E.nr_of_sfb_block[0][0],s.slen[0]=0,s.slen[1]=0,s.slen[2]=0,s.slen[3]=0,s.max_nonzero_coeff=575,r0.fill(s.scalefac,0),p(y,s)};function B(y){this.ordinal=y}B.BINSEARCH_NONE=new B(0),B.BINSEARCH_UP=new B(1),B.BINSEARCH_DOWN=new B(2);function j(y,s,m,I,N){var v,e=y.CurrentStep[I],r=!1,a=y.OldValue[I],n=B.BINSEARCH_NONE;for(s.global_gain=a,m-=s.part2_length,G(e!=0);;){var l;if(v=O.count_bits(y,N,s,null),e==1||v==m)break;v>m?(n==B.BINSEARCH_DOWN&&(r=!0),r&&(e/=2),n=B.BINSEARCH_UP,l=e):(n==B.BINSEARCH_UP&&(r=!0),r&&(e/=2),n=B.BINSEARCH_DOWN,l=-e),s.global_gain+=l,s.global_gain<0&&(s.global_gain=0,r=!0),s.global_gain>255&&(s.global_gain=255,r=!0)}for(G(s.global_gain>=0),G(s.global_gain<256);v>m&&s.global_gain<255;)s.global_gain++,v=O.count_bits(y,N,s,null);return y.CurrentStep[I]=a-s.global_gain>=4?4:2,y.OldValue[I]=s.global_gain,s.part2_3_length=v,v}this.trancate_smallspectrums=function(y,s,m,I){var N=z(L.SFBMAX);if(!((y.substep_shaping&4)==0&&s.block_type==V.SHORT_TYPE||(y.substep_shaping&128)!=0)){E.calc_noise(s,m,N,new q,null);for(var e=0;e<576;e++){var v=0;s.l3_enc[e]!=0&&(v=Math.abs(s.xr[e])),I[e]=v}var e=0,r=8;s.block_type==V.SHORT_TYPE&&(r=6);do{var a,n,l,d,M=s.width[r];if(e+=M,!(N[r]>=1)&&(r0.sort(I,e-M,M),!BitStream.EQ(I[e-1],0))){a=(1-N[r])*m[r],n=0,d=0;do{var f;for(l=1;d+l<M&&!BitStream.NEQ(I[d+e-M],I[d+e+l-M]);l++);if(f=I[d+e-M]*I[d+e-M]*l,a<f){d!=0&&(n=I[d+e-M-1]);break}a-=f,d+=l}while(d<M);if(!BitStream.EQ(n,0))do Math.abs(s.xr[e-M])<=n&&(s.l3_enc[e-M]=0);while(--M>0)}}while(++r<s.psymax);s.part2_3_length=O.noquant_count_bits(y,s,null)}};function X(y){for(var s=0;s<y.sfbmax;s++)if(y.scalefac[s]+y.subblock_gain[y.window[s]]==0)return!1;return!0}function k(y){return U.FAST_LOG10(.368+.632*y*y*y)}function i0(y,s){for(var m=1e-37,I=0;I<s.psymax;I++)m+=k(y[I]);return Math.max(1e-20,m)}function v0(y,s,m,I,N){var v;switch(y){default:case 9:{s.over_count>0?(v=m.over_SSD<=s.over_SSD,m.over_SSD==s.over_SSD&&(v=m.bits<s.bits)):v=m.max_noise<0&&m.max_noise*10+m.bits<=s.max_noise*10+s.bits;break}case 0:v=m.over_count<s.over_count||m.over_count==s.over_count&&m.over_noise<s.over_noise||m.over_count==s.over_count&&BitStream.EQ(m.over_noise,s.over_noise)&&m.tot_noise<s.tot_noise;break;case 8:m.max_noise=i0(N,I);case 1:v=m.max_noise<s.max_noise;break;case 2:v=m.tot_noise<s.tot_noise;break;case 3:v=m.tot_noise<s.tot_noise&&m.max_noise<s.max_noise;break;case 4:v=m.max_noise<=0&&s.max_noise>.2||m.max_noise<=0&&s.max_noise<0&&s.max_noise>m.max_noise-.2&&m.tot_noise<s.tot_noise||m.max_noise<=0&&s.max_noise>0&&s.max_noise>m.max_noise-.2&&m.tot_noise<s.tot_noise+s.over_noise||m.max_noise>0&&s.max_noise>-.05&&s.max_noise>m.max_noise-.1&&m.tot_noise+m.over_noise<s.tot_noise+s.over_noise||m.max_noise>0&&s.max_noise>-.1&&s.max_noise>m.max_noise-.15&&m.tot_noise+m.over_noise+m.over_noise<s.tot_noise+s.over_noise+s.over_noise;break;case 5:v=m.over_noise<s.over_noise||BitStream.EQ(m.over_noise,s.over_noise)&&m.tot_noise<s.tot_noise;break;case 6:v=m.over_noise<s.over_noise||BitStream.EQ(m.over_noise,s.over_noise)&&(m.max_noise<s.max_noise||BitStream.EQ(m.max_noise,s.max_noise)&&m.tot_noise<=s.tot_noise);break;case 7:v=m.over_count<s.over_count||m.over_noise<s.over_noise;break}return s.over_count==0&&(v=v&&m.bits<s.bits),v}function Q(y,s,m,I,N){var v=y.internal_flags,e;s.scalefac_scale==0?e=1.2968395546510096:e=1.6817928305074292;for(var r=0,a=0;a<s.sfbmax;a++)r<m[a]&&(r=m[a]);var n=v.noise_shaping_amp;switch(n==3&&(N?n=2:n=1),n){case 2:break;case 1:r>1?r=Math.pow(r,.5):r*=.95;break;case 0:default:r>1?r=1:r*=.95;break}for(var l=0,a=0;a<s.sfbmax;a++){var d=s.width[a],M;if(l+=d,!(m[a]<r)){if((v.substep_shaping&2)!=0&&(v.pseudohalf[a]=v.pseudohalf[a]==0?1:0,v.pseudohalf[a]==0&&v.noise_shaping_amp==2))return;for(s.scalefac[a]++,M=-d;M<0;M++)I[l+M]*=e,I[l+M]>s.xrpow_max&&(s.xrpow_max=I[l+M]);if(v.noise_shaping_amp==2)return}}}function c(y,s){for(var m=1.2968395546510096,I=0,N=0;N<y.sfbmax;N++){var v=y.width[N],e=y.scalefac[N];if(y.preflag!=0&&(e+=E.pretab[N]),I+=v,(e&1)!=0){e++;for(var r=-v;r<0;r++)s[I+r]*=m,s[I+r]>y.xrpow_max&&(y.xrpow_max=s[I+r])}y.scalefac[N]=e>>1}y.preflag=0,y.scalefac_scale=1}function T0(y,s,m){var I,N=s.scalefac;for(I=0;I<s.sfb_lmax;I++)if(N[I]>=16)return!0;for(var v=0;v<3;v++){var e=0,r=0;for(I=s.sfb_lmax+v;I<s.sfbdivide;I+=3)e<N[I]&&(e=N[I]);for(;I<s.sfbmax;I+=3)r<N[I]&&(r=N[I]);if(!(e<16&&r<8)){if(s.subblock_gain[v]>=7)return!0;s.subblock_gain[v]++;var a=y.scalefac_band.l[s.sfb_lmax];for(I=s.sfb_lmax+v;I<s.sfbmax;I+=3){var n,l=s.width[I],d=N[I];if(G(d>=0),d=d-(4>>s.scalefac_scale),d>=0){N[I]=d,a+=l*3;continue}N[I]=0;{var M=210+(d<<s.scalefac_scale+1);n=E.IPOW20(M)}a+=l*(v+1);for(var f=-l;f<0;f++)m[a+f]*=n,m[a+f]>s.xrpow_max&&(s.xrpow_max=m[a+f]);a+=l*(3-v-1)}{var n=E.IPOW20(202);a+=s.width[I]*(v+1);for(var f=-s.width[I];f<0;f++)m[a+f]*=n,m[a+f]>s.xrpow_max&&(s.xrpow_max=m[a+f])}}}return!1}function H(y,s,m,I,N){var v=y.internal_flags;Q(y,s,m,I,N);var e=X(s);return e?!1:(v.mode_gr==2?e=O.scale_bitcount(s):e=O.scale_bitcount_lsf(v,s),e?(v.noise_shaping>1&&(r0.fill(v.pseudohalf,0),s.scalefac_scale==0?(c(s,I),e=!1):s.block_type==V.SHORT_TYPE&&v.subblock_gain>0&&(e=T0(v,s,I)||X(s))),e||(v.mode_gr==2?e=O.scale_bitcount(s):e=O.scale_bitcount_lsf(v,s)),!e):!0)}this.outer_loop=function(y,s,m,I,N,v){var e=y.internal_flags,r=new T,a=z(576),n=z(L.SFBMAX),l=new q,d,M=new K,f=9999999,F=!1,P=!1,s0=0;if(j(e,s,v,N,I),e.noise_shaping==0)return 100;E.calc_noise(s,m,n,l,M),l.bits=s.part2_3_length,r.assign(s);var h0=0;for(R.arraycopy(I,0,a,0,576);!F;){do{var u0=new q,c0,M0=255;if((e.substep_shaping&2)!=0?c0=20:c0=3,e.sfb21_extra&&(n[r.sfbmax]>1||r.block_type==V.SHORT_TYPE&&(n[r.sfbmax+1]>1||n[r.sfbmax+2]>1))||!H(y,r,n,I,P))break;r.scalefac_scale!=0&&(M0=254);var N0=v-r.part2_length;if(N0<=0)break;for(;(r.part2_3_length=O.count_bits(e,I,r,M))>N0&&r.global_gain<=M0;)r.global_gain++;if(r.global_gain>M0)break;if(l.over_count==0){for(;(r.part2_3_length=O.count_bits(e,I,r,M))>f&&r.global_gain<=M0;)r.global_gain++;if(r.global_gain>M0)break}if(E.calc_noise(r,m,n,u0,M),u0.bits=r.part2_3_length,s.block_type!=V.SHORT_TYPE?d=y.quant_comp:d=y.quant_comp_short,d=v0(d,l,u0,r,n)?1:0,d!=0)f=s.part2_3_length,l=u0,s.assign(r),h0=0,R.arraycopy(I,0,a,0,576);else if(e.full_outer_loop==0&&(++h0>c0&&l.over_count==0||e.noise_shaping_amp==3&&P&&h0>30||e.noise_shaping_amp==3&&P&&r.global_gain-s0>15))break}while(r.global_gain+r.scalefac_scale<255);e.noise_shaping_amp==3?P?F=!0:(r.assign(s),R.arraycopy(a,0,I,0,576),h0=0,s0=r.global_gain,P=!0):F=!0}return G(s.global_gain+s.scalefac_scale<=255),y.VBR==a0.vbr_rh||y.VBR==a0.vbr_mtrh?R.arraycopy(a,0,I,0,576):(e.substep_shaping&1)!=0&&trancate_smallspectrums(e,s,m,I),l.over_count},this.iteration_finish_one=function(y,s,m){var I=y.l3_side,N=I.tt[s][m];O.best_scalefac_store(y,s,m,I),y.use_best_huffman==1&&O.best_huffman_divide(y,N),A.ResvAdjust(y,N)},this.VBR_encode_granule=function(y,s,m,I,N,v,e){var r=y.internal_flags,a=new T,n=z(576),l=e,d=e+1,M=(e+v)/2,f,F,P=0,s0=r.sfb21_extra;G(l<=LameInternalFlags.MAX_BITS_PER_CHANNEL),r0.fill(a.l3_enc,0);do G(M>=v),G(M<=e),G(v<=e),M>l-42?r.sfb21_extra=!1:r.sfb21_extra=s0,F=outer_loop(y,s,m,I,N,M),F<=0?(P=1,d=s.part2_3_length,a.assign(s),R.arraycopy(I,0,n,0,576),e=d-32,f=e-v,M=(e+v)/2):(v=M+32,f=e-v,M=(e+v)/2,P!=0&&(P=2,s.assign(a),R.arraycopy(n,0,I,0,576)));while(f>12);r.sfb21_extra=s0,P==2&&R.arraycopy(a.l3_enc,0,s.l3_enc,0,576),G(s.part2_3_length<=l)},this.get_framebits=function(y,s){var m=y.internal_flags;m.bitrate_index=m.VBR_min_bitrate;var I=g.getframebits(y);m.bitrate_index=1,I=g.getframebits(y);for(var N=1;N<=m.VBR_max_bitrate;N++){m.bitrate_index=N;var v=new MeanBits(I);s[N]=A.ResvFrameBegin(y,v),I=v.bits}},this.VBR_old_prepare=function(y,s,m,I,N,v,e,r,a){var n=y.internal_flags,l,d=0,M=1,f=0;n.bitrate_index=n.VBR_max_bitrate;var F=A.ResvFrameBegin(y,new MeanBits(0))/n.mode_gr;get_framebits(y,v);for(var P=0;P<n.mode_gr;P++){var s0=E.on_pe(y,s,r[P],F,P,0);n.mode_ext==V.MPG_MD_MS_LR&&(ms_convert(n.l3_side,P),E.reduce_side(r[P],m[P],F,s0));for(var h0=0;h0<n.channels_out;++h0){var u0=n.l3_side.tt[P][h0];u0.block_type!=V.SHORT_TYPE?(d=1.28/(1+Math.exp(3.5-s[P][h0]/300))-.05,l=n.PSY.mask_adjust-d):(d=2.56/(1+Math.exp(3.5-s[P][h0]/300))-.14,l=n.PSY.mask_adjust_short-d),n.masking_lower=Math.pow(10,l*.1),init_outer_loop(n,u0),a[P][h0]=E.calc_xmin(y,I[P][h0],u0,N[P][h0]),a[P][h0]!=0&&(M=0),e[P][h0]=126,f+=r[P][h0]}}for(var P=0;P<n.mode_gr;P++)for(var h0=0;h0<n.channels_out;h0++)f>v[n.VBR_max_bitrate]&&(r[P][h0]*=v[n.VBR_max_bitrate],r[P][h0]/=f),e[P][h0]>r[P][h0]&&(e[P][h0]=r[P][h0]);return M},this.bitpressure_strategy=function(y,s,m,I){for(var N=0;N<y.mode_gr;N++)for(var v=0;v<y.channels_out;v++){for(var e=y.l3_side.tt[N][v],r=s[N][v],a=0,n=0;n<e.psy_lmax;n++)r[a++]*=1+.029*n*n/V.SBMAX_l/V.SBMAX_l;if(e.block_type==V.SHORT_TYPE)for(var n=e.sfb_smin;n<V.SBMAX_s;n++)r[a++]*=1+.029*n*n/V.SBMAX_s/V.SBMAX_s,r[a++]*=1+.029*n*n/V.SBMAX_s/V.SBMAX_s,r[a++]*=1+.029*n*n/V.SBMAX_s/V.SBMAX_s;I[N][v]=0|Math.max(m[N][v],.9*I[N][v])}},this.VBR_new_prepare=function(y,s,m,I,N,v){var e=y.internal_flags,r=1,a=0,n=0,l;if(y.free_format){e.bitrate_index=0;var d=new MeanBits(a);l=A.ResvFrameBegin(y,d),a=d.bits,N[0]=l}else{e.bitrate_index=e.VBR_max_bitrate;var d=new MeanBits(a);A.ResvFrameBegin(y,d),a=d.bits,get_framebits(y,N),l=N[e.VBR_max_bitrate]}for(var M=0;M<e.mode_gr;M++){E.on_pe(y,s,v[M],a,M,0),e.mode_ext==V.MPG_MD_MS_LR&&ms_convert(e.l3_side,M);for(var f=0;f<e.channels_out;++f){var F=e.l3_side.tt[M][f];e.masking_lower=Math.pow(10,e.PSY.mask_adjust*.1),init_outer_loop(e,F),E.calc_xmin(y,m[M][f],F,I[M][f])!=0&&(r=0),n+=v[M][f]}}for(var M=0;M<e.mode_gr;M++)for(var f=0;f<e.channels_out;f++)n>l&&(v[M][f]*=l,v[M][f]/=n);return r},this.calc_target_bits=function(y,s,m,I,N,v){var e=y.internal_flags,r=e.l3_side,a,n,l,d,M=0;e.bitrate_index=e.VBR_max_bitrate;var f=new MeanBits(M);for(v[0]=A.ResvFrameBegin(y,f),M=f.bits,e.bitrate_index=1,M=g.getframebits(y)-e.sideinfo_len*8,N[0]=M/(e.mode_gr*e.channels_out),M=y.VBR_mean_bitrate_kbps*y.framesize*1e3,(e.substep_shaping&1)!=0&&(M*=1.09),M/=y.out_samplerate,M-=e.sideinfo_len*8,M/=e.mode_gr*e.channels_out,a=.93+.07*(11-y.compression_ratio)/(11-5.5),a<.9&&(a=.9),a>1&&(a=1),n=0;n<e.mode_gr;n++){var F=0;for(l=0;l<e.channels_out;l++){if(I[n][l]=int(a*M),s[n][l]>700){var P=int((s[n][l]-700)/1.4),s0=r.tt[n][l];I[n][l]=int(a*M),s0.block_type==V.SHORT_TYPE&&P<M/2&&(P=M/2),P>M*3/2?P=M*3/2:P<0&&(P=0),I[n][l]+=P}I[n][l]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[n][l]=LameInternalFlags.MAX_BITS_PER_CHANNEL),F+=I[n][l]}if(F>LameInternalFlags.MAX_BITS_PER_GRANULE)for(l=0;l<e.channels_out;++l)I[n][l]*=LameInternalFlags.MAX_BITS_PER_GRANULE,I[n][l]/=F}if(e.mode_ext==V.MPG_MD_MS_LR)for(n=0;n<e.mode_gr;n++)E.reduce_side(I[n],m[n],M*e.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(d=0,n=0;n<e.mode_gr;n++)for(l=0;l<e.channels_out;l++)I[n][l]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(I[n][l]=LameInternalFlags.MAX_BITS_PER_CHANNEL),d+=I[n][l];if(d>v[0])for(n=0;n<e.mode_gr;n++)for(l=0;l<e.channels_out;l++)I[n][l]*=v[0],I[n][l]/=d}}return he=$,he}var fe,aa;function Oa(){if(aa)return fe;aa=1;var _=U0(),R=_.assert;function a0(){var U;this.setModules=function(r0){U=r0},this.ResvFrameBegin=function(r0,z){var G=r0.internal_flags,J,q=G.l3_side,K=U.getframebits(r0);z.bits=(K-G.sideinfo_len*8)/G.mode_gr;var V=8*256*G.mode_gr-8;r0.brate>320?J=8*int(r0.brate*1e3/(r0.out_samplerate/1152)/8+.5):(J=8*1440,r0.strict_ISO&&(J=8*int(32e4/(r0.out_samplerate/1152)/8+.5))),G.ResvMax=J-K,G.ResvMax>V&&(G.ResvMax=V),(G.ResvMax<0||r0.disable_reservoir)&&(G.ResvMax=0);var T=z.bits*G.mode_gr+Math.min(G.ResvSize,G.ResvMax);return T>J&&(T=J),R(G.ResvMax%8==0),R(G.ResvMax>=0),q.resvDrain_pre=0,G.pinfo!=null&&(G.pinfo.mean_bits=z.bits/2,G.pinfo.resvsize=G.ResvSize),T},this.ResvMaxBits=function(r0,z,G,J){var q=r0.internal_flags,K,V=q.ResvSize,T=q.ResvMax;J!=0&&(V+=z),(q.substep_shaping&1)!=0&&(T*=.9),G.bits=z,V*10>T*9?(K=V-T*9/10,G.bits+=K,q.substep_shaping|=128):(K=0,q.substep_shaping&=127,!r0.disable_reservoir&&(q.substep_shaping&1)==0&&(G.bits-=.1*z));var L=V<q.ResvMax*6/10?V:q.ResvMax*6/10;return L-=K,L<0&&(L=0),L},this.ResvAdjust=function(r0,z){r0.ResvSize-=z.part2_3_length+z.part2_length},this.ResvFrameEnd=function(r0,z){var G,J=r0.l3_side;r0.ResvSize+=z*r0.mode_gr;var q=0;J.resvDrain_post=0,J.resvDrain_pre=0,(G=r0.ResvSize%8)!=0&&(q+=G),G=r0.ResvSize-q-r0.ResvMax,G>0&&(R(G%8==0),R(G>=0),q+=G);{var K=Math.min(J.main_data_begin*8,q)/8;J.resvDrain_pre+=8*K,q-=8*K,r0.ResvSize-=8*K,J.main_data_begin-=K}J.resvDrain_post+=q,r0.ResvSize-=q}}return fe=a0,fe}var me,ra;function ka(){if(ra)return me;ra=1;function _(){var R="http://www.mp3dev.org/",a0=3,U=98,r0=4,z=0,G=93;this.getLameVersion=function(){return a0+"."+U+"."+r0},this.getLameShortVersion=function(){return a0+"."+U+"."+r0},this.getLameVeryShortVersion=function(){return"LAME"+a0+"."+U+"r"},this.getPsyVersion=function(){return z+"."+G},this.getLameUrl=function(){return R},this.getLameOsBitness=function(){return"32bits"}}return me=_,me}var be,ta;function Fa(){if(ta)return be;ta=1;var _=U0(),R=_.System,a0=_.VbrMode;_.Float;var U=_.ShortBlock;_.Util;var r0=_.Arrays;_.new_array_n;var z=_.new_byte;_.new_double,_.new_float,_.new_float_n,_.new_int,_.new_int_n;var G=_.assert;J.NUMTOCENTRIES=100,J.MAXFRAMESIZE=2880;function J(){var q,K,V;this.setModules=function(e,r,a){q=e,K=r,V=a};var T=1,L=2,$=4,g=8,A=J.NUMTOCENTRIES,E=J.MAXFRAMESIZE,b=A+4+4+4+4+4,O=b+9+1+1+8+1+1+3+1+1+2+4+2+2,t=128,p=64,B=32,j=null,X="Xing",k="Info",i0=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function v0(e,r){if(e.nVbrNumFrames++,e.sum+=r,e.seen++,!(e.seen<e.want)&&(e.pos<e.size&&(e.bag[e.pos]=e.sum,e.pos++,e.seen=0),e.pos==e.size)){for(var a=1;a<e.size;a+=2)e.bag[a/2]=e.bag[a];e.want*=2,e.pos/=2}}function Q(e,r){if(!(e.pos<=0))for(var a=1;a<A;++a){var n=a/A,l,d,M=0|Math.floor(n*e.pos);M>e.pos-1&&(M=e.pos-1),l=e.bag[M],d=e.sum;var f=0|256*l/d;f>255&&(f=255),r[a]=255&f}}this.addVbrFrame=function(e){var r=e.internal_flags,a=Tables.bitrate_table[e.version][r.bitrate_index];G(r.VBR_seek_table.bag!=null),v0(r.VBR_seek_table,a)};function c(e,r){var a=e[r+0]&255;return a<<=8,a|=e[r+1]&255,a<<=8,a|=e[r+2]&255,a<<=8,a|=e[r+3]&255,a}function T0(e,r,a){e[r+0]=255&(a>>24&255),e[r+1]=255&(a>>16&255),e[r+2]=255&(a>>8&255),e[r+3]=255&(a&255)}function H(e,r,a){e[r+0]=255&(a>>8&255),e[r+1]=255&(a&255)}function y(e,r){return new String(e,r,X.length(),j).equals(X)||new String(e,r,k.length(),j).equals(k)}function s(e,r,a){return 255&(e<<r|a&~(-1<<r))}function m(e,r){var a=e.internal_flags;r[0]=s(r[0],8,255),r[1]=s(r[1],3,7),r[1]=s(r[1],1,e.out_samplerate<16e3?0:1),r[1]=s(r[1],1,e.version),r[1]=s(r[1],2,1),r[1]=s(r[1],1,e.error_protection?0:1),r[2]=s(r[2],4,a.bitrate_index),r[2]=s(r[2],2,a.samplerate_index),r[2]=s(r[2],1,0),r[2]=s(r[2],1,e.extension),r[3]=s(r[3],2,e.mode.ordinal()),r[3]=s(r[3],2,a.mode_ext),r[3]=s(r[3],1,e.copyright),r[3]=s(r[3],1,e.original),r[3]=s(r[3],2,e.emphasis),r[0]=255;var n=255&(r[1]&241),l;e.version==1?l=t:e.out_samplerate<16e3?l=B:l=p,e.VBR==a0.vbr_off&&(l=e.brate);var d;e.free_format?d=0:d=255&16*q.BitrateIndex(l,e.version,e.out_samplerate),e.version==1?(r[1]=255&(n|10),n=255&(r[2]&13),r[2]=255&(d|n)):(r[1]=255&(n|2),n=255&(r[2]&13),r[2]=255&(d|n))}this.getVbrTag=function(e){var r=new VBRTagData,a=0;r.flags=0;var n=e[a+1]>>3&1,l=e[a+2]>>2&3,d=e[a+3]>>6&3,M=e[a+2]>>4&15;if(M=Tables.bitrate_table[n][M],e[a+1]>>4==14?r.samprate=Tables.samplerate_table[2][l]:r.samprate=Tables.samplerate_table[n][l],n!=0?d!=3?a+=36:a+=21:d!=3?a+=21:a+=13,!y(e,a))return null;a+=4,r.hId=n;var f=r.flags=c(e,a);if(a+=4,(f&T)!=0&&(r.frames=c(e,a),a+=4),(f&L)!=0&&(r.bytes=c(e,a),a+=4),(f&$)!=0){if(r.toc!=null)for(var F=0;F<A;F++)r.toc[F]=e[a+F];a+=A}r.vbrScale=-1,(f&g)!=0&&(r.vbrScale=c(e,a),a+=4),r.headersize=(n+1)*72e3*M/r.samprate,a+=21;var P=e[a+0]<<4;P+=e[a+1]>>4;var s0=(e[a+1]&15)<<8;return s0+=e[a+2]&255,(P<0||P>3e3)&&(P=-1),(s0<0||s0>3e3)&&(s0=-1),r.encDelay=P,r.encPadding=s0,r},this.InitVbrTag=function(e){var r=e.internal_flags,a;e.version==1?a=t:e.out_samplerate<16e3?a=B:a=p,e.VBR==a0.vbr_off&&(a=e.brate);var n=(e.version+1)*72e3*a/e.out_samplerate,l=r.sideinfo_len+O;if(r.VBR_seek_table.TotalFrameSize=n,n<l||n>E){e.bWriteVbrTag=!1;return}r.VBR_seek_table.nVbrNumFrames=0,r.VBR_seek_table.nBytesWritten=0,r.VBR_seek_table.sum=0,r.VBR_seek_table.seen=0,r.VBR_seek_table.want=1,r.VBR_seek_table.pos=0,r.VBR_seek_table.bag==null&&(r.VBR_seek_table.bag=new int[400],r.VBR_seek_table.size=400);var d=z(E);m(e,d);for(var M=r.VBR_seek_table.TotalFrameSize,f=0;f<M;++f)K.add_dummy_byte(e,d[f]&255,1)};function I(e,r){var a=r^e;return r=r>>8^i0[a&255],r}this.updateMusicCRC=function(e,r,a,n){for(var l=0;l<n;++l)e[0]=I(r[a+l],e[0])};function N(e,r,a,n,l){var d=e.internal_flags,M=0,f=e.encoder_delay,F=e.encoder_padding,P=100-10*e.VBR_q-e.quality,s0=V.getLameVeryShortVersion(),h0,u0=0,c0,M0=[1,5,3,2,4,0,3],N0=0|(e.lowpassfreq/100+.5>255?255:e.lowpassfreq/100+.5),X0=0,i=0,o=0,d0=e.internal_flags.noise_shaping,S0=0,V0=0,y0=0,B0=0,E0=0,k0=(e.exp_nspsytune&1)!=0,L0=(e.exp_nspsytune&2)!=0,f0=!1,F0=!1,K0=e.internal_flags.nogap_total,q0=e.internal_flags.nogap_current,Z0=e.ATHtype,Q0=0,Y0;switch(e.VBR){case vbr_abr:Y0=e.VBR_mean_bitrate_kbps;break;case vbr_off:Y0=e.brate;break;default:Y0=e.VBR_min_bitrate_kbps}switch(e.VBR.ordinal()<M0.length?h0=M0[e.VBR.ordinal()]:h0=0,c0=16*u0+h0,d.findReplayGain&&(d.RadioGain>510&&(d.RadioGain=510),d.RadioGain<-510&&(d.RadioGain=-510),i=8192,i|=3072,d.RadioGain>=0?i|=d.RadioGain:(i|=512,i|=-d.RadioGain)),d.findPeakSample&&(X0=Math.abs(0|d.PeakSample/32767*Math.pow(2,23)+.5)),K0!=-1&&(q0>0&&(F0=!0),q0<K0-1&&(f0=!0)),Q0=Z0+((k0?1:0)<<4)+((L0?1:0)<<5)+((f0?1:0)<<6)+((F0?1:0)<<7),P<0&&(P=0),e.mode){case MONO:S0=0;break;case STEREO:S0=1;break;case DUAL_CHANNEL:S0=2;break;case JOINT_STEREO:e.force_ms?S0=4:S0=3;break;case NOT_SET:default:S0=7;break}e.in_samplerate<=32e3?y0=0:e.in_samplerate==48e3?y0=2:e.in_samplerate>48e3?y0=3:y0=1,(e.short_blocks==U.short_block_forced||e.short_blocks==U.short_block_dispensed||e.lowpassfreq==-1&&e.highpassfreq==-1||e.scale_left<e.scale_right||e.scale_left>e.scale_right||e.disable_reservoir&&e.brate<320||e.noATH||e.ATHonly||Z0==0||e.in_samplerate<=32e3)&&(V0=1),B0=d0+(S0<<2)+(V0<<5)+(y0<<6),E0=d.nMusicCRC,T0(a,n+M,P),M+=4;for(var W0=0;W0<9;W0++)a[n+M+W0]=255&s0.charAt(W0);M+=9,a[n+M]=255&c0,M++,a[n+M]=255&N0,M++,T0(a,n+M,X0),M+=4,H(a,n+M,i),M+=2,H(a,n+M,o),M+=2,a[n+M]=255&Q0,M++,Y0>=255?a[n+M]=255:a[n+M]=255&Y0,M++,a[n+M]=255&f>>4,a[n+M+1]=255&(f<<4)+(F>>8),a[n+M+2]=255&F,M+=3,a[n+M]=255&B0,M++,a[n+M++]=0,H(a,n+M,e.preset),M+=2,T0(a,n+M,r),M+=4,H(a,n+M,E0),M+=2;for(var r1=0;r1<M;r1++)l=I(a[n+r1],l);return H(a,n+M,l),M+=2,M}function v(e){e.seek(0);var r=z(10);e.readFully(r);var a;return new String(r,"ISO-8859-1").startsWith("ID3")?a=0:a=((r[6]&127)<<21|(r[7]&127)<<14|(r[8]&127)<<7|r[9]&127)+r.length,a}this.getLameTagFrame=function(e,r){var a=e.internal_flags;if(!e.bWriteVbrTag||a.Class_ID!=Lame.LAME_ID||a.VBR_seek_table.pos<=0)return 0;if(r.length<a.VBR_seek_table.TotalFrameSize)return a.VBR_seek_table.TotalFrameSize;r0.fill(r,0,a.VBR_seek_table.TotalFrameSize,0),m(e,r);var n=z(A);if(e.free_format)for(var l=1;l<A;++l)n[l]=255&255*l/100;else Q(a.VBR_seek_table,n);var d=a.sideinfo_len;e.error_protection&&(d-=2),e.VBR==a0.vbr_off?(r[d++]=255&k.charAt(0),r[d++]=255&k.charAt(1),r[d++]=255&k.charAt(2),r[d++]=255&k.charAt(3)):(r[d++]=255&X.charAt(0),r[d++]=255&X.charAt(1),r[d++]=255&X.charAt(2),r[d++]=255&X.charAt(3)),T0(r,d,T+L+$+g),d+=4,T0(r,d,a.VBR_seek_table.nVbrNumFrames),d+=4;var M=a.VBR_seek_table.nBytesWritten+a.VBR_seek_table.TotalFrameSize;T0(r,d,0|M),d+=4,R.arraycopy(n,0,r,d,n.length),d+=n.length,e.error_protection&&K.CRC_writeheader(a,r);for(var f=0,l=0;l<d;l++)f=I(r[l],f);return d+=N(e,M,r,d,f),a.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(e,r){var a=e.internal_flags;if(a.VBR_seek_table.pos<=0||(r.seek(r.length()),r.length()==0))return-1;var n=v(r);r.seek(n);var l=z(E),d=getLameTagFrame(e,l);return d>l.length?-1:(d<1||r.write(l,0,d),0)}}return be=J,be}var na;function qa(){if(na)return w1;na=1;var _=U0();_.System,_.VbrMode,_.Float,_.ShortBlock,_.Util,_.Arrays,_.new_array_n;var R=_.new_byte;_.new_double,_.new_float,_.new_float_n,_.new_int,_.new_int_n;var a0=_.assert,U=La(),r0=xa(),z=la(),G=va(),J=Ha(),q=ua(),K=Oa(),V=sa(),T=ha();g0();var L=ka(),$=Fa();function g(){this.setModules=function(B,j){}}function A(){this.setModules=function(B,j,X){}}function E(){}function b(){this.setModules=function(B,j){}}function O(B,j,X){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),B=1,j=44100,X=128);var k=new U,i0=new g,v0=new z,Q=new T,c=new r0,T0=new G,H=new J,y=new $,s=new L,m=new b,I=new K,N=new q,v=new A,e=new E;k.setModules(v0,Q,c,T0,H,y,s,m,e),Q.setModules(v0,e,s,y),m.setModules(Q,s),c.setModules(k),H.setModules(Q,I,T0,N),T0.setModules(N,I,k.enc.psy),I.setModules(Q),N.setModules(T0),y.setModules(k,Q,s),i0.setModules(v,e),v.setModules(s,m,c);var r=k.lame_init();r.num_channels=B,r.in_samplerate=j,r.brate=X,r.mode=V.STEREO,r.quality=3,r.bWriteVbrTag=!1,r.disable_reservoir=!0,r.write_id3tag_automatic=!1;var a=k.lame_init_params(r);a0(a==0);var n=1152,l=0|1.25*n+7200,d=R(l);this.encodeBuffer=function(M,f){B==1&&(f=M),a0(M.length==f.length),M.length>n&&(n=M.length,l=0|1.25*n+7200,d=R(l));var F=k.lame_encode_buffer(r,M,f,M.length,d,0,l);return new Int8Array(d.subarray(0,F))},this.flush=function(){var M=k.lame_encode_flush(r,d,0,l);return new Int8Array(d.subarray(0,M))}}function t(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function p(B){return B.charCodeAt(0)<<24|B.charCodeAt(1)<<16|B.charCodeAt(2)<<8|B.charCodeAt(3)}return t.RIFF=p("RIFF"),t.WAVE=p("WAVE"),t.fmt_=p("fmt "),t.data=p("data"),t.readHeader=function(B){var j=new t,X=B.getUint32(0,!1);if(t.RIFF==X&&(B.getUint32(4,!0),t.WAVE==B.getUint32(8,!1)&&t.fmt_==B.getUint32(12,!1))){var k=B.getUint32(16,!0),i0=20;switch(k){case 16:case 18:j.channels=B.getUint16(i0+2,!0),j.sampleRate=B.getUint32(i0+4,!0);break;default:throw"extended fmt chunk not implemented"}i0+=k;for(var v0=t.data,Q=0;v0!=X&&(X=B.getUint32(i0,!1),Q=B.getUint32(i0+4,!0),v0!=X);)i0+=Q+8;return j.dataLen=Q,j.dataOffset=i0+8,j}},w1.Mp3Encoder=O,w1.WavHeader=t,w1}var fa=qa();const Xa=ba(fa),Ya=ca({__proto__:null,default:Xa},[fa]);export{Ya as i};
//# sourceMappingURL=index-ChykF4VP.js.map
